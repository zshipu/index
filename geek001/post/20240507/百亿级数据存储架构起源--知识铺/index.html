<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="baidu-site-verification" content="codeva-odZno92jxn" />
<meta name="360-site-verification" content="b46a7087f21ff6cf8dcee8ee59ee9a61" />
<meta name="sogou_site_verification" content="F2mmMQ4NdU" />

    <title>百亿级数据存储架构起源 -- 知识铺 | 知识铺的博客</title>
    <meta property="og:title" content="百亿级数据存储架构起源 -- 知识铺 - 知识铺的博客">
    <meta property="og:type" content="article">

    
    <meta property="article:modified_time" content='2024-06-14T02:14:18&#43;08:00'>
    
    <meta name="Keywords" content="golang,go语言,go语言笔记,知识铺,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="百亿级数据存储架构起源 -- 知识铺">
    <meta name="author" content="知识铺">
    
    <meta property="og:url" content="https://index.zshipu.com/geek001/post/20240507/%E7%99%BE%E4%BA%BF%E7%BA%A7%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84%E8%B5%B7%E6%BA%90--%E7%9F%A5%E8%AF%86%E9%93%BA/">
    <link rel="shortcut icon" href='/geek001/favicon.ico' type="image/x-icon">

    <link rel="stylesheet" href='/geek001/css/normalize.css'>
    <link rel="stylesheet" href='/geek001/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2874221941555456" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    

    
    
    
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WLWJSST');</script>
    
</head>

<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLWJSST"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://index.zshipu.com/geek001">
                        知识铺的博客
                    </a>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://index.zshipu.com/geek001">首页</a>
                    
                    <a  href="https://index.zshipu.com" title="总站">总站</a>
                    
                    <a  href="https://index.zshipu.com/geek/" title="技术">技术</a>
                    
                    <a  href="https://index.zshipu.com/geek001/archives/" title="归档">归档</a>
                    
                    <a  href="https://index.zshipu.com/geek001/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#尼恩百亿级数据存储架构起源">尼恩：百亿级数据存储架构起源</a></li>
    <li><a href="#本文目录">本文目录</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#百亿级数据存储架构只有分库分表吗">百亿级数据存储架构，只有分库分表吗？</a>
      <ul>
        <li><a href="#从0到1-百亿级数据存储架构怎么设计">从0到1, 百亿级数据存储架构，怎么设计？</a></li>
      </ul>
    </li>
    <li><a href="#百亿级数据存储架构需要使用es完成高性能跨库搜索">百亿级数据存储架构，需要使用ES完成高性能、跨库搜索</a></li>
    <li><a href="#从0到1-百亿级数据存储架构怎么设计-1">从0到1, 百亿级数据存储架构，怎么设计？</a></li>
    <li><a href="#elasticsearch-从入门到工业级使用">ElasticSearch 从入门到工业级使用</a></li>
    <li><a href="#11-什么是全文检索">1.1 什么是全文检索</a></li>
    <li><a href="#12-es简介">1.2 ES简介</a></li>
    <li><a href="#13-es基本概念">1.3 ES基本概念</a></li>
    <li><a href="#2-安装和dsl的使用">2 安装和DSL的使用</a></li>
    <li><a href="#21-安装es">2.1 安装ES</a></li>
    <li><a href="#22-安装kibana">2.2 安装Kibana</a></li>
    <li><a href="#23通过脚本一键启动es">2.3通过脚本一键启动ES</a></li>
    <li><a href="#24使用-dsl-操作es">2.4使用 DSL 操作ES</a>
      <ul>
        <li><a href="#241dsl-定义基本介绍">2.4.1DSL 定义基本介绍</a></li>
        <li><a href="#242dsl-定义语法说明">2.4.2DSL 定义语法说明</a></li>
        <li><a href="#243dsl常见语法">2.4.3DSL常见语法</a></li>
      </ul>
    </li>
    <li><a href="#3-es-的分词器">3 ES 的分词器</a></li>
    <li><a href="#31-倒排索引">3.1 倒排索引</a></li>
    <li><a href="#32-默认分词器">3.2 默认分词器</a></li>
    <li><a href="#33-中文分词">3.3 中文分词</a></li>
    <li><a href="#34-ik分词器">3.4 IK分词器</a></li>
    <li><a href="#35-自定义扩展字典">3.5 自定义扩展字典</a></li>
    <li><a href="#4-高级的dsl-查询">4 高级的DSL 查询</a></li>
    <li><a href="#41-管理索引">4.1 管理索引</a></li>
    <li><a href="#42-数据查询">4.2 数据查询</a></li>
    <li><a href="#43-查询模式">4.3 查询模式</a></li>
    <li><a href="#44-使用别名">4.4 使用别名</a></li>
    <li><a href="#5-从0开始es工业级java-应用开发">5 从0开始，ES工业级Java 应用开发</a></li>
    <li><a href="#51-high-level-client基本用法">5.1 High Level Client基本用法</a></li>
    <li><a href="#52-聚合查询">5.2 聚合查询</a>
      <ul>
        <li><a href="#521-dsl聚合查询">5.2.1 DSL聚合查询</a></li>
        <li><a href="#522-es客户端实现聚合查询">5.2.2 ES客户端实现聚合查询</a></li>
      </ul>
    </li>
    <li><a href="#53-es-es工业级java-应用开发">5.3 ES ES工业级Java 应用开发</a></li>
    <li><a href="#6-es集群架构">6 ES集群架构</a></li>
    <li><a href="#61-es集群的5大角色">6.1 ES集群的5大角色</a></li>
    <li><a href="#62-es集群节点角色配置">6.2 ES集群节点角色配置</a></li>
    <li><a href="#63-es节点配置组合">6.3 ES节点配置组合</a></li>
    <li><a href="#64-高可用es的部署架构">6.4 高可用ES的部署架构</a></li>
    <li><a href="#65-小型es集群的安装">6.5 小型ES集群的安装</a>
      <ul>
        <li><a href="#651-image镜像">6.5.1 Image镜像</a></li>
        <li><a href="#652-创建目录结构">6.5.2 创建目录结构</a></li>
        <li><a href="#653-安装es集群">6.5.3 安装ES集群</a></li>
      </ul>
    </li>
    <li><a href="#66-使用kibana访问集群">6.6 使用kibana访问集群</a></li>
    <li><a href="#7-数据类型和映射">7 数据类型和映射</a></li>
    <li><a href="#71-映射的创建">7.1 映射的创建</a></li>
    <li><a href="#72-动态映射dynamic-mapping">7.2 动态映射Dynamic Mapping</a></li>
    <li><a href="#73-显示的设置mapping">7.3 显示的设置mapping</a></li>
    <li><a href="#74-es中常见数据类型">7.4 ES中常见数据类型</a></li>
    <li><a href="#8-底层知识正排索引和倒排索引底层原理">8 底层知识：正排索引和倒排索引底层原理</a></li>
    <li><a href="#81-什么是正排索引">8.1 什么是正排索引</a></li>
    <li><a href="#82-什么是倒排索引">8.2 什么是倒排索引</a></li>
    <li><a href="#83-es如何做到快速索引">8.3 ES如何做到快速索引</a>
      <ul>
        <li><a href="#831-posting-list">8.3.1 Posting List</a></li>
        <li><a href="#832-term-dictionary">8.3.2 Term Dictionary</a></li>
        <li><a href="#833-term-index">8.3.3 Term Index</a></li>
        <li><a href="#834-trie树前缀树字典树">8.3.4 Trie树（前缀树，字典树）</a></li>
        <li><a href="#835-为什么es检索比mysql快">8.3.5 为什么ES检索比Mysql快</a></li>
      </ul>
    </li>
    <li><a href="#附录elasticsearch-中dsl常用">附录：ElasticSearch 中DSL常用</a></li>
    <li><a href="#从0到1-百亿级数据存储架构怎么设计-2">从0到1, 百亿级数据存储架构，怎么设计？</a></li>
    <li><a href="#说在最后有问题找老架构取经">说在最后：有问题找老架构取经</a></li>
    <li><a href="#部分历史案例">部分历史案例</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">百亿级数据存储架构起源 -- 知识铺</h1>
        </header>
        <date class="post-meta meta-date">
            2024年6月14日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="尼恩百亿级数据存储架构起源">尼恩：百亿级数据存储架构起源</h2>
<p>在40岁老架构师 尼恩的<strong>读者交流群</strong>(50+)中，经常性的指导小伙伴们改造简历。</p>
<p>经过尼恩的改造之后，很多小伙伴拿到了一线互联网企业如得物、阿里、滴滴、极兔、有赞、希音、百度、网易、美团的面试机会，拿到了大厂机会。</p>
<p>这些机会的来源，主要是尼恩给小伙伴 改造了简历，植入了亮点项目、黄金项目。</p>
<p>尼恩的 亮点项目、黄金项目 需要持续迭代。</p>
<p>下一个亮点项目、黄金项目是：百亿级数据存储架构。</p>
<p>同时，小伙伴在面试时，经常遇到这个面试难题。比如，前几天一个小伙伴面试字节，就遇到了这道题</p>
<blockquote>
<p>字节面试：百亿级数据存储，怎么设计？只是分库分表吗？</p>
</blockquote>
<p>于是，尼恩组织小伙伴开始研究和 设计 《百亿级数据存储架构》,其中包含《ES学习圣经》，帮助大家打造一个新的黄金项目，实现大厂的梦想。</p>
<p>这个文档将成为大家 面试的杀手锏， 此文当最新PDF版本，可以找40岁老架构师尼恩获取。</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_jpg/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzkRbRSB3BLC30juyDeTnjdghHqmsLqxTFzzFia2xZVWxzoM21G3QBjEA/640?wx_fmt=jpeg&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>当然，上面的面试题以及参考答案，也会收入咱们的 《<a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247497474&amp;idx=1&amp;sn=54a7b194a72162e9f13695443eabe186&amp;scene=21#wechat_redirect">尼恩Java面试宝典PDF</a>》V171版本，供后面的小伙伴参考，提升大家的 3高 架构、设计、开发水平。</p>
<blockquote>
<p>最新《尼恩 架构笔记》《尼恩高并发三部曲》《尼恩Java面试宝典》的PDF，请关注本公众号【技术自由圈】获取，回复：领电子书</p>
</blockquote>
<p>本文作者：</p>
<ul>
<li>
<p>第一作者 Moen （负责写初稿 ）</p>
</li>
<li>
<p>第二作者 尼恩 （40岁老架构师， 负责提升此文的 技术高度，让大家有一种 俯视 技术的感觉）</p>
</li>
</ul>
<h2 id="本文目录">本文目录</h2>
<p><strong>- 尼恩：百亿级数据存储架构起源</strong></p>
<p><strong>- 百亿级数据存储架构，只有分库分表吗？</strong></p>
<p> - 从0到1, 百亿级数据存储架构，怎么设计？</p>
<p><strong>- 百亿级数据存储架构，需要使用ES完成高性能、跨库搜索</strong></p>
<p><strong>- 从0到1, 百亿级数据存储架构，怎么设计？</strong></p>
<p><strong>- ElasticSearch 从入门到工业级使用</strong></p>
<p><strong>- 1.1 什么是全文检索</strong></p>
<p><strong>- 1.2 ES简介</strong></p>
<p><strong>- 1.3 ES基本概念</strong></p>
<p><strong>- 2 安装和DSL的使用</strong></p>
<p><strong>- 2.1 安装ES</strong></p>
<p><strong>- 2.2 安装Kibana</strong></p>
<p><strong>- 2.3通过脚本一键启动ES</strong></p>
<p><strong>- 2.4使用 DSL 操作ES</strong></p>
<p> - 2.4.1DSL 定义基本介绍</p>
<h5 id="-dsldomain-specific-language一种特定领域的查询语言用于构建复杂的查询和聚合操作">    -DSL（Domain Specific Language），一种特定领域的查询语言，用于构建复杂的查询和聚合操作。</h5>
<p> - 2.4.2DSL 定义语法说明</p>
<h5 id="-1关键字keywords">    -（1）关键字(Keywords)</h5>
<h5 id="-2标识符identifiers">    -（2）标识符(Identifiers)</h5>
<h5 id="-3表达式expressions">    -（3）表达式(Expressions)</h5>
<h5 id="-4运算符operators">    -（4）运算符(Operators)</h5>
<h5 id="-5函数调用function-calls">    -（5）函数调用(Function Calls)</h5>
<h5 id="-6控制流control-flow">    -（6）控制流(Control Flow)</h5>
<h5 id="-7注释comments">    -（7）注释(Comments)</h5>
<p> - 2.4.3DSL常见语法</p>
<p><strong>- 3 ES 的分词器</strong></p>
<p><strong>- 3.1 倒排索引</strong></p>
<p><strong>- 3.2 默认分词器</strong></p>
<p><strong>- 3.3 中文分词</strong></p>
<p><strong>- 3.4 IK分词器</strong></p>
<p><strong>- 3.5 自定义扩展字典</strong></p>
<p><strong>- 4 高级的DSL 查询</strong></p>
<p><strong>- 4.1 管理索引</strong></p>
<p><strong>- 4.2 数据查询</strong></p>
<p><strong>- 4.3 查询模式</strong></p>
<p><strong>- 4.4 使用别名</strong></p>
<p><strong>- 5 从0开始，ES工业级Java 应用开发</strong></p>
<p><strong>- 5.1 High Level Client基本用法</strong></p>
<p><strong>- 5.2 聚合查询</strong></p>
<p> - 5.2.1 DSL聚合查询</p>
<p> - 5.2.2 ES客户端实现聚合查询</p>
<p><strong>- 5.3 ES ES工业级Java 应用开发</strong></p>
<p><strong>- 6 ES集群架构</strong></p>
<p><strong>- 6.1 ES集群的5大角色</strong></p>
<p><strong>- 6.2 ES集群节点角色配置</strong></p>
<p><strong>- 6.3 ES节点配置组合</strong></p>
<p><strong>- 6.4 高可用ES的部署架构</strong></p>
<p><strong>- 6.5 小型ES集群的安装</strong></p>
<p> - 6.5.1 Image镜像</p>
<p> - 6.5.2 创建目录结构</p>
<p> - 6.5.3 安装ES集群</p>
<p><strong>- 6.6 使用kibana访问集群</strong></p>
<p><strong>- 7 数据类型和映射</strong></p>
<p><strong>- 7.1 映射的创建</strong></p>
<p><strong>- 7.2 动态映射Dynamic Mapping</strong></p>
<p><strong>- 7.3 显示的设置mapping</strong></p>
<p><strong>- 8 底层知识：正排索引和倒排索引底层原理</strong></p>
<p><strong>- 8.1 什么是正排索引</strong></p>
<p><strong>- 8.2 什么是倒排索引</strong></p>
<p><strong>- 8.3 ES如何做到快速索引</strong></p>
<p> - 8.3.1 Posting List</p>
<p> - 8.3.2 Term Dictionary</p>
<p> - 8.3.3 Term Index</p>
<p> - 8.3.4 Trie树（前缀树，字典树）</p>
<p> - 8.3.5 为什么ES检索比Mysql快</p>
<p><strong>- 附录：ElasticSearch 中DSL常用</strong></p>
<p><strong>- 从0到1, 百亿级数据存储架构，怎么设计？</strong></p>
<p><strong>- 说在最后：有问题找老架构取经</strong></p>
<h2 id="百亿级数据存储架构只有分库分表吗">百亿级数据存储架构，只有分库分表吗？</h2>
<p>很多的小伙伴来咨询尼恩， 百亿级数据存储怎么架构，说他们的面试中，都遇到的。</p>
<p>他们回到回答了分库分表，比如，当一个表（比如t_order） 达到500万条或2GB时，需要考虑水平分表。</p>
<p>然后面试官，不满意。</p>
<p>很多的小伙伴来咨询尼恩，为什么？</p>
<p>这里，尼恩用20年的技术功力，给大家做一个彻底性、系统化梳理，帮助大家吊打面试。</p>
<h3 id="从0到1-百亿级数据存储架构怎么设计">从0到1, 百亿级数据存储架构，怎么设计？</h3>
<p>咱们的生产需求上，百亿级数据存储架构， 一般来说，需要具备以下四个能力：</p>
<ul>
<li>
<p>高并发的在线ACID事务 （分库分表）</p>
</li>
<li>
<p>高并发的在线搜索 （倒排表副本）</p>
</li>
<li>
<p>海量数据的离线处理 （高可用+全量副本）</p>
</li>
<li>
<p>冗余表双写能力 （不同业务维度的副本）</p>
</li>
</ul>
<h2 id="百亿级数据存储架构需要使用es完成高性能跨库搜索">百亿级数据存储架构，需要使用ES完成高性能、跨库搜索</h2>
<p>便于商品的聚合搜索，高速搜索，采用两大优化方案：</p>
<ul>
<li>
<p>把商品数据冗余存储在Elasticsearch中，实现高速搜索</p>
</li>
<li>
<p>把商品数据冗余存储在redis 中，实现高速缓存</p>
</li>
</ul>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzNbUibic1XOpZWHMb9tIdMUgnNIrHxWGacqQD2mMIQgibTQWQibdDgIxZ1A/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>很多的时候，要求保持很高的数据一致性。</p>
<p>比如：</p>
<ul>
<li>
<p>要求 mysql 与 es 做到秒级别的数据同步。</p>
</li>
<li>
<p>要求 mysql 与 redis 做到秒级别的数据同步。</p>
</li>
<li>
<p>要求 mysql 与 hbase 做到秒级别的数据同步。</p>
</li>
</ul>
<p>接下来，以 mysql 与 es 的数据一致，作为业务场景进行分析， 其他的场景比如mysql 与 redis 的数据一致性方案，都是差不多的。</p>
<p>只要大家能把下面的 5大数据一致性方案， 滔滔不绝的说出来，面试官一定会爱到 “不能自已、口水直流”。</p>
<h2 id="从0到1-百亿级数据存储架构怎么设计-1">从0到1, 百亿级数据存储架构，怎么设计？</h2>
<p>从0到1, 百亿级数据存储架构，40岁老架构尼恩团队，计划用一个系列的文章帮大家实现这个架构难题，这个系列还会录成视频，并辅导大家写入简历。</p>
<p>这个系列包括：</p>
<ul>
<li>
<p>高并发搜索ES圣经：从0到1, 从入门到 ElasticSearch 工业级使用</p>
</li>
<li>
<p><strong>100亿级任务调度篇：从0到1, 从入门到 XXLJOB 工业级使用（已经发布）</strong></p>
</li>
<li>
<p>100亿级海量存储篇：从0到1, 从入门到 HABSE 工业级使用</p>
</li>
<li>
<p>100亿级离线计算篇：从0到1, 从入门到 Flink 工业级使用</p>
</li>
</ul>
<p>已经发布的文章包括：</p>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247502366&amp;idx=1&amp;sn=97516e427ed08dee1cdfce7c585f977f&amp;scene=21#wechat_redirect"><strong>字节面试：百亿级存储，怎么设计？只是分库分表？</strong></a></p>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247502246&amp;idx=1&amp;sn=2383a2bb532e3c41fca3f98bc698fa96&amp;scene=21#wechat_redirect"><strong>100亿级任务调度篇：从0到1, 从入门到 XXLJOB 工业级使用</strong></a></p>
<h2 id="elasticsearch-从入门到工业级使用">ElasticSearch 从入门到工业级使用</h2>
<h2 id="11-什么是全文检索">1.1 什么是全文检索</h2>
<p>将非结构化数据中的一部分信息提取出来，重新组织，使其变得有一定结构，然后对此有一定结构的数据进行搜索，从而达到搜索相对较快的目的。这部分从非结构化数据中提取出的然后重新组织的信息，我们称之索引。</p>
<p>例如：字典。字典的拼音表和部首检字表就相当于字典的索引，对每一个字的解释是非结构化的，如果字典没有音节表和部首检字表，在茫茫辞海中找一个字只能顺序扫描。</p>
<p>然而字的某些信息可以提取出来进行结构化处理，比如读音，就比较结构化，分声母和韵母，分别只有几种可以一一列举，于是将读音拿出来按一定的顺序排列，每一项读音都指向此字的详细解释的页数。</p>
<p>我们搜索时按结构化的拼音搜到读音，然后按其指向的页数，便可找到我们的非结构化数据——也即对字的解释。 这种先建立索引，再对索引进行搜索的过程就叫全文检索(Full-text Search)。</p>
<p>虽然创建索引的过程也是非常耗时的，但是索引一旦创建就可以多次使用，全文检索主要处理的是查询，所以耗时间创建索引是值得的。
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzHib1qAkdLwuDFFcziaApcRHmXo2UxUu9JTaxRibGUFssCxaSUkMmn55Kw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>比如使用全文检索，所搜索“生化机”
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzNPJP020EPHDJZM2cJTWiay7TBptaeiaJqkwO1Uu6qiakP8DvCBX5LrzZQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>（有可能是手抖打错了，本来是生化危机），但是期望需要出来右侧的 4条 记录</p>
<p>有 4条 数据将每条数据进行词条拆分。</p>
<p>如“生化危机电影”拆成：生化、危机、电影 关键词（拆分结果与策略算法有关）每个关键词将对应包含此关键词的数据 ID搜索的时候，直接匹配这些关键词，就能拿到包含关键词的数据这个过程就叫做全文检索。</p>
<p>而词条拆分和词条对应的 ID 这个就是倒排索引的的基本原理</p>
<p><strong>对比数据库的缺陷</strong></p>
<p>mysql如果没有索引的情况下，共有100万条,按照之前的思路,其实就要扫描100万次，而且每次扫描,都需要匹配那个文本所有的字符，确认是否包含搜索的关键词，而且还不能将搜索词拆解开来进行检索
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzSstxcJ9MktvLq4vMTKhyjKMg4Aic6O7QS3v2akOcUCcLuYbcogfXxIQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    <strong>利用倒排索引</strong> 进行搜索的话，假设100万条数据,拆分出来的词语,假设有1000万个词语，那么在倒排索引中,就有1000万行,我们可能并不需要搜索1000万次。很可能说,在搜索到第一次的时候,我们就可以找到这个搜索词对应的数据。也可能是第100次,或者第1000次</p>
<p><strong>全文检索使用场景</strong></p>
<ul>
<li>
<p>维基百科，类似百度百科，牙膏，牙膏的维基百科，全文检索，高亮，搜索推荐</p>
</li>
<li>
<p>The Guardian（国外新闻网站），类似搜狐新闻，用户行为日志（点击，浏览，收藏，评论）+社交网络数据（对某某新闻的相关看法），数据分析，给到每篇新闻文章的作者，让他知道他的文章的公众反馈（好，坏，热门，垃圾，鄙视，崇拜）</p>
</li>
<li>
<p>Stack Overflow（国外的程序异常讨论论坛），IT问题，程序的报错，提交上去，有人会跟你讨论和回答，全文检索，搜索相关问题和答案，程序报错了，就会将报错信息粘贴到里面去，搜索有没有对应的答案</p>
</li>
<li>
<p>GitHub（开源代码管理），搜索上千亿行代码（5）电商网站，检索商品</p>
</li>
<li>
<p>日志数据分析，logstash采集日志，ES进行复杂的数据分析（ELK技术，elasticsearch+logstash+kibana）</p>
</li>
<li>
<p>商品价格监控网站，用户设定某商品的价格阈值，当低于该阈值的时候，发送通知消息给用户，比如说订阅牙膏的监控，如果高露洁牙膏的家庭套装低于50块钱，就通知我，我就去买</p>
</li>
<li>
<p>BI系统，商业智能，Business Intelligence。比如说有个大型商场集团，BI，分析一下某某区域最近3年的用户消费金额的趋势以及用户群体的组成构成，产出相关的数张报表，**区，最近3年，每年消费金额呈现100%的增长，而且用户群体85%是高级白领，开一个新商场。ES执行数据分析和挖掘，Kibana进行数据可视化</p>
</li>
</ul>
<h2 id="12-es简介">1.2 ES简介</h2>
<p>Elaticsearch，简称为es， es是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理PB级别的数据。</p>
<p>es也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。</p>
<p>Elasticsearch是面向文档(document oriented)的，这意味着它可以存储整个对象或文档(document)。然而它不仅仅是存储，还会索引(index)每个文档的内容使之可以被搜索。</p>
<p>在Elasticsearch中，你可以对文档（而非成行成列的数据）进行索引、搜索、排序、过滤。Elasticsearch比传统关系型数据库如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;Relational DB -&amp;gt; Databases -&amp;gt; Tables -&amp;gt; Rows -&amp;gt; Columns&lt;br&gt;Elasticsearch -&amp;gt; Indices   -&amp;gt; Types  -&amp;gt; Documents -&amp;gt; Fields&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>Elasticsearch提供多种语言支持，其中Java的客户端为 Java REST Client 。</p>
<p>而它又分成两种：高级和低级的。高级包含更多的功能，如果把高级比作MyBatis的话，那么低级就相当于JDBC，是基于Netty和Server通讯相关。</p>
<p>高级的 Client类似Mybatis是对于Low Level的封装。![图片](<a href="http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml">http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml</a> version=&lsquo;1.0&rsquo; encoding=&lsquo;UTF-8&rsquo;%3F%3E%3Csvg width=&lsquo;1px&rsquo; height=&lsquo;1px&rsquo; viewBox=&lsquo;0 0 1 1&rsquo; version=&lsquo;1.1&rsquo; xmlns=&lsquo;<a href="http://www.w3.org/2000/svg'">http://www.w3.org/2000/svg'</a> xmlns:xlink=&lsquo;<a href="http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg">http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg</a> stroke=&lsquo;none&rsquo; stroke-width=&lsquo;1&rsquo; fill=&lsquo;none&rsquo; fill-rule=&lsquo;evenodd&rsquo; fill-opacity=&lsquo;0&rsquo;%3E%3Cg transform=&lsquo;translate(-249.000000, -126.000000)&rsquo; fill=&rsquo;%23FFFFFF&rsquo;%3E%3Crect x=&lsquo;249&rsquo; y=&lsquo;126&rsquo; width=&lsquo;1&rsquo; height=&lsquo;1&rsquo;%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)</p>
<h2 id="13-es基本概念">1.3 ES基本概念</h2>
<ol>
<li><strong>索引库</strong></li>
</ol>
<p>ElasticSearch将它的数据存储在一个或多个索引（index）中。</p>
<p>用SQL领域的术语来类比，索引就像数据库，可以向索引写入文档或者从索引中读取文档，并通过ElasticSearch内部使用Lucene将数据写入索引或从索引中检索数据。</p>
<p>Elastic Search使用倒排索引（Inverted Index）来做快速的全文搜索，这点与数据库不同，一般数据库 的索引，用B+Tree来实现。</p>
<table>
<thead>
<tr>
<th><strong>Relational DB</strong></th>
<th><strong>Databases</strong></th>
<th><strong>Tables</strong></th>
<th><strong>表结构</strong></th>
<th><strong>Rows</strong></th>
<th><strong>Columns</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ElasticSearch</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>|</p>
<p>Indices</p>
<p>|</p>
<p>Types</p>
<p>|</p>
<p>映射mapping</p>
<p>|</p>
<p>Documents</p>
<p>|</p>
<p>Fields 字段</p>
<p>|</p>
<p>索引库就是存储索引的保存在磁盘上的一系列的文件。里面存储了建立好的索引信息以及文档对象。一个索引库相当于数据库中的一张表。
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzLox2vpyhxnlr6HcpOSd22n8hZnh2g8haed3vVLp7WVibuWicToUIXDfg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<ol start="2">
<li><strong>document对象</strong></li>
</ol>
<p>获取原始内容的目的是为了索引，在索引前需要将原始内容创建成文档（Document），文档中包括一个一个的域（Field），域中存储内容。</p>
<p>每个文档都有一个唯一的编号，就是文档id。</p>
<p>document对象相当于表中的一条记录。</p>
<p>文档（document）是ElasticSearch中的主要实体。</p>
<p>对所有使用ElasticSearch的案例来说，他们最终都可以归结为对文档的搜索。</p>
<p>文档由字段构成。</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzuSeicHvAJFPt7fdRX1boWxXGG3EsmtuKthl72WdMAIsCEib0wu5r3AKQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<ol start="3">
<li><strong>field对象</strong></li>
</ol>
<p>如果我们把document看做是数据库中一条记录的话，field相当于是记录中的字段。field是索引库中存储数据的最小单位。field的数据类型大致可以分为数值类型和文本类型，一般需要查询的字段都是文本类型的，field的还有如下属性：</p>
<ul>
<li>
<p>是否分词：是否对域的内容进行分词处理。前提是我们要对域的内容进行查询。</p>
</li>
<li>
<p>是否索引：将Field分析后的词或整个Field值进行索引，只有索引方可搜索到。比如：商品名称、商品简介分析后进行索引，订单号、身份证号不用分词但也要索引，这些将来都要作为查询条件。</p>
</li>
<li>
<p>是否存储：将Field值存储在文档中，存储在文档中的Field才可以从Document中获取。比如：商品名称、订单号，凡是将来要从Document中获取的Field都要存储。</p>
</li>
</ul>
<ol start="4">
<li><strong>term对象</strong></li>
</ol>
<p>从文档对象中拆分出来的每个单词叫做一个Term，不同的域中拆分出来的相同的单词是不同的term。</p>
<p>term中包含两部分一部分是文档的域名，另一部分是单词的内容。</p>
<p>term是创建索引的关键词对象。</p>
<ol start="8">
<li><strong>类型（type）</strong></li>
</ol>
<p>每个文档都有与之对应的类型（type）定义。</p>
<p>这允许用户在一个索引中存储多种文档类型，并为不同文 档提供类型提供不同的映射。 type的版本迭代</p>
<ul>
<li>
<p>5.x及以前版本一个index有一个或者多个type</p>
</li>
<li>
<p>6.X版本一个index只有一个index</p>
</li>
<li>
<p>7.X版本移除了type，type相关的所有内容全部变成Deprecated，为了兼容升级和过渡，所有的7.X版本es数据写入后type字段都默认被置为_doc</p>
</li>
<li>
<p>8.X版本完全废弃type</p>
</li>
</ul>
<ol start="9">
<li><strong>映射（mapping）</strong></li>
</ol>
<p>mapping是处理数据的方式和规则方面做一些限制，如某个字段的数据类型、默认值、分析器、是否被索引等等，这些都是映射里面可以设置的，其它就是处理es里面数据的一些使用规则设置也叫做映射，按着最优规则处理数据对性能提高很大，因此才需要建立映射，并且需要思考如何建立映射才能对性能更好。</p>
<ol start="10">
<li><strong>分片（shards）</strong></li>
</ol>
<p>代表索引分片，es可以把一个完整的索引分成多个分片，这样的好处是可以把一个大的索引拆分成多个，分布到不同的节点上。构成分布式搜索。分片的数量只能在索引创建前指定，并且索引创建后不能更改。</p>
<p>5.X默认不能通过配置文件定义分片 ES默认5:1 5个主分片，每个分片，1个副本分片</p>
<ol start="11">
<li><strong>副本（replicas）</strong></li>
</ol>
<p>代表索引副本，es可以设置多个索引的副本，副本的作用：</p>
<ul>
<li>
<p>提高系统的容错性，当个某个节点某个分片损坏或丢失时可以从副本中恢复。</p>
</li>
<li>
<p>是提高es的查询效率，es会自动对搜索请求进行负载均衡。</p>
</li>
</ul>
<ol start="12">
<li><strong>集群（cluster）</strong></li>
</ol>
<p>代表一个集群，集群中有多个节点（node），其中有一个为主节点，这个主节点是可以通过选举产生的，主从节点是对于集群内部来说的。es的一个概念就是去中心化，字面上理解就是无中心节点，这是对于集群外部来说的，因为从外部来看es集群，在逻辑上是个整体，你与任何一个节点的通信和与整个es集群通信是等价的。</p>
<h2 id="2-安装和dsl的使用">2 安装和DSL的使用</h2>
<h2 id="21-安装es">2.1 安装ES</h2>
<p>使用docker安装单点Elasticsearch，步骤如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker network create elastic&lt;br&gt;docker pull docker.elastic.co/elasticsearch/elasticsearch:7.15.2&lt;br&gt;docker run -di --name es --net elastic -p 192.168.56.181:9200:9200 -p 192.168.56.181:9300:9300 -e &#34;discovery.type=single-node&#34; docker.elastic.co/elasticsearch/elasticsearch:7.15.2&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>9200端口(Web管理平台端口)  9300(服务默认端口)</p>
<p>浏览器输入地址访问：<code>http://192.168.56.181:9200/</code></p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzgialyHFDpqsE29R30cLnibuO3KaxzTibhcRf9V3bYqPMJXUcoLRHN2bdw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<ol start="3">
<li><strong>系统参数配置</strong></li>
</ol>
<p>es发现重启启动失败了，这时什么原因呢？</p>
<p>这与我们刚才修改的配置有关，因为elasticsearch在启动的时候会进行一些检查，比如最多打开的文件的个数以及虚拟内存区域数量等等，如果你放开了此配置，意味着需要打开更多的文件以及虚拟内存，所以我们还需要系统调优 修改vi /etc/security/limits.conf ，追加内容 (nofile是单个进程允许打开的最大文件个数 soft nofile 是软限制 hard nofile是硬限制 )</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;*&lt;/span&gt; &lt;span&gt;soft nofile 65536&lt;/span&gt;&lt;br&gt;&lt;span&gt;*&lt;/span&gt; &lt;span&gt;hard nofile 65536&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>修改vi /etc/sysctl.conf，追加内容 (限制一个进程可以拥有的VMA(虚拟内存区域)的数量 )</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;vm.max_map_count&lt;/span&gt;=&lt;span&gt;655360&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>执行下面命令 修改内核参数马上生效</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;sysctl&lt;/span&gt; &lt;span&gt;-p&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>重新启动虚拟机，再次启动容器，发现已经可以启动并远程访问</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;reboot&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="22-安装kibana">2.2 安装Kibana</h2>
<p>Kibana是一个针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据。使用Kibana，可以通过各种图表进行高级数据分析及展示。</p>
<p>Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显示Elasticsearch查询动态。</p>
<p>设置Kibana非常简单。</p>
<p>无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动Elasticsearch索引监测。</p>
<p>Query DSL是一个Java开源框架用于构建类型安全的SQL查询语句。</p>
<p>采用API代替传统的拼接字符串来构造查询语句。</p>
<p>目前QueryDSL支持的平台包括JPA，JDO，SQL，Java Collections，RDF，Lucene，Hibernate Search。elasticsearch提供了一整套基于JSON的DSL语言来定义查询。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker pull docker.elastic.co/kibana/kibana:7.15.2&lt;br&gt;docker run -di --name kb --net elastic -p 192.168.56.181:5601:5601 -e &#34;ELASTICSEARCH_HOSTS=http://192.168.56.181:9200&#34; docker.elastic.co/kibana/kibana:7.15.2&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol>
<li>拉取kibana镜像</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker pull docker.elastic.co/kibana/kibana:&lt;span&gt;7.15.2&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li>安装kibana容器</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker run -di --name kb --net elastic -p &lt;span&gt;192.168.56.181&lt;/span&gt;:&lt;span&gt;5601&lt;/span&gt;:&lt;span&gt;5601&lt;/span&gt; -e &lt;span&gt;&#34;ELASTICSEARCH_HOSTS=http://192.168.56.181:9200&#34;&lt;/span&gt; docker.elastic.co/kibana/kibana:&lt;span&gt;7.15.2&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li>修改配置文件</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker exec -it kb /bin/bash&lt;br&gt;vi config/kibana.yml&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>好像不改也可以，因为上面docker启动有了ES地址</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#修改elasticsarch.hosts: [ &#34;http://elasticsearch:9200&#34; ]，如下：&lt;/span&gt;&lt;br&gt;&lt;span&gt;elasticsearch.hosts:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt; &lt;span&gt;&#34;http://192.168.56.181:9200&#34;&lt;/span&gt; &lt;span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="23通过脚本一键启动es">2.3通过脚本一键启动ES</h2>
<p>通过尼恩提供的脚本，和配置文件，可以一键启动ES</p>
<p>这个非常的容易，非常的轻量级。 具体请参见视频。</p>
<p>![图片](<a href="http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml">http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml</a> version=&lsquo;1.0&rsquo; encoding=&lsquo;UTF-8&rsquo;%3F%3E%3Csvg width=&lsquo;1px&rsquo; height=&lsquo;1px&rsquo; viewBox=&lsquo;0 0 1 1&rsquo; version=&lsquo;1.1&rsquo; xmlns=&lsquo;<a href="http://www.w3.org/2000/svg'">http://www.w3.org/2000/svg'</a> xmlns:xlink=&lsquo;<a href="http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg">http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg</a> stroke=&lsquo;none&rsquo; stroke-width=&lsquo;1&rsquo; fill=&lsquo;none&rsquo; fill-rule=&lsquo;evenodd&rsquo; fill-opacity=&lsquo;0&rsquo;%3E%3Cg transform=&lsquo;translate(-249.000000, -126.000000)&rsquo; fill=&rsquo;%23FFFFFF&rsquo;%3E%3Crect x=&lsquo;249&rsquo; y=&lsquo;126&rsquo; width=&lsquo;1&rsquo; height=&lsquo;1&rsquo;%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)</p>
<p>启动完之后的效果</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzd0Do68N7Ka0m691PBRicfhY3nCtEyL6tUiamgXR8YuibpbVmqw6CkFHZA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>接下来，可以访问es</p>
<p>http://cdh1:9200</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzV2CckqyOo8acjicstwV7cSn5nicmR8LdIKvR9ZDoMc2a1oVoz9I9niaxg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>接下来，可以访问 Kibana</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;默认的地址     http://cdh1:5601             &lt;br&gt;&lt;br&gt;尼恩的一键环境地址     http://cdh1:5601             &lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzfDHic0icutCYomibTuqYbtamia7sIYY8NEF6wTNdqZyFcgEs9UpBNDBFkg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="24使用-dsl-操作es">2.4使用 DSL 操作ES</h2>
<p>在 Kibana的开发工具界面，可以执行 DSL 去进行ES的查询。</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzrVD9TyIkZ7nf4xlfCVeOG0icQlNicbicqaP0EzJw8d0c8XNyiaNEshMKFw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>es开发，常常需要用到DSL语法去定义好 es的查询语句。</p>
<p>就像 myql开发，需要提前定义好 sql语句，并进行sql 的执行和测试一样。</p>
<h3 id="241dsl-定义基本介绍">2.4.1DSL 定义基本介绍</h3>
<h5 id="dsldomain-specific-language一种特定领域的查询语言用于构建复杂的查询和聚合操作">DSL（Domain Specific Language），一种特定领域的查询语言，用于构建复杂的查询和聚合操作。</h5>
<p>在Elasticsearch中，可用DSL语法来定义查询和过滤条件，以及执行聚合操作。</p>
<p>DSL语法 具有JSON格式，因此它非常易于阅读和编写。</p>
<h3 id="242dsl-定义语法说明">2.4.2DSL 定义语法说明</h3>
<h6 id="1关键字keywords">（1）关键字(Keywords)</h6>
<ul>
<li>
<p>DSL通常会定义一组关键字，这些关键字具有特殊含义，并在DSL中起到关键作用。关键字通常不能用作标识符或变量名。</p>
</li>
<li>
<p>示例：在一个简单的数学表达式DSL中，可能会定义关键字如&quot;add&quot;、&ldquo;subtract&quot;等来表示加法和减法操作。</p>
</li>
</ul>
<h6 id="2标识符identifiers">（2）标识符(Identifiers)</h6>
<ul>
<li>
<p>标识符是用来表示变量名、函数名或其他用户定义的名称。它们需要遵循特定的命名规则，如大小写敏感、不包含特殊字符等。</p>
</li>
<li>
<p>示例：在一个配置文件DSL中，可以使用标识符来表示不同的配置项，如&quot;username&rdquo;、&ldquo;password&quot;等。</p>
</li>
</ul>
<h6 id="3表达式expressions">（3）表达式(Expressions)</h6>
<ul>
<li>
<p>表达式是DSL中最基本的构建块，用于计算或产生某个值。表达式可以包括变量、常量、运算符和函数调用。</p>
</li>
<li>
<p>示例：在一个数学表达式DSL中，可以将&quot;2 + 3&quot;作为一个表达式，计算结果为5。</p>
</li>
</ul>
<h6 id="4运算符operators">（4）运算符(Operators)</h6>
<ul>
<li>
<p>运算符用于执行各种操作，例如算术运算、逻辑运算、比较运算等。DSL中的运算符根据所涉及的领域和需求而定。</p>
</li>
<li>
<p>示例：在一个布尔表达式DSL中，可以定义逻辑运算符如&quot;and&rdquo;、&ldquo;or&quot;用于连接多个条件。</p>
</li>
</ul>
<h6 id="5函数调用function-calls">（5）函数调用(Function Calls)</h6>
<ul>
<li>
<p>DSL可以支持函数调用，允许用户使用预定义或自定义的函数来完成特定的任务。函数调用通常由函数名称和传递给函数的参数组成。</p>
</li>
<li>
<p>示例：在一个日期处理DSL中，可以定义函数&quot;formatDate(date, format)&quot;，其中&quot;date&quot;是日期值，&ldquo;format&quot;是日期格式字符串。</p>
</li>
</ul>
<h6 id="6控制流control-flow">（6）控制流(Control Flow)</h6>
<ul>
<li>
<p>控制流语句用于控制程序的执行流程，例如条件语句(if-else)和循环语句(while、for)等。DSL可以支持特定的控制流语句来满足领域特定需求。</p>
</li>
<li>
<p>示例：在一个工作流程DSL中，可以使用条件语句来判断某个条件是否满足并执行相应的操作。</p>
</li>
</ul>
<h6 id="7注释comments">（7）注释(Comments)</h6>
<ul>
<li>
<p>注释用于向DSL代码添加说明性文本，以便开发人员理解和维护代码。注释通常不会被编译或执行，仅用于阅读目的。</p>
</li>
<li>
<p>示例：在DSL中，可以使用双斜杠(//)或特定的注释标记来添加注释，如：“// 这是一个示例注释”。</p>
</li>
</ul>
<h3 id="243dsl常见语法">2.4.3DSL常见语法</h3>
<blockquote>
<p>文章实在太长， 这里省略了500字+， 省略的内容请参见尼恩的免费电子书 PDF版本《ES学习圣经：从0到1, 精通 ElasticSearch 工业级使用 》</p>
</blockquote>
<h2 id="3-es-的分词器">3 ES 的分词器</h2>
<h2 id="31-倒排索引">3.1 倒排索引</h2>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzL52nD2L3fsmhEFaMtMPwbG8KrbBVUhZSIvhakRz2JrFTX4pWKa5RQw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>如上图</p>
<ul>
<li>
<p>左边的是正排索引，通过文档的id如查找文档的内容</p>
</li>
<li>
<p>右边的是倒排索引，通过单词统计次数以及文档的位置，</p>
</li>
</ul>
<p>如Elasticsearch出现的次数为3，在id=1，id=2，id=3都出现过，且位置分别为1，0，0</p>
<h2 id="32-默认分词器">3.2 默认分词器</h2>
<p>默认分词器对于英文分词的效果如下</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /_analyze&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;text&#34;&lt;/span&gt;: &lt;span&gt;&#34;You can use Elasticsearch to store, search, and manage data&#34;&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;standard&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>结果如下： 
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzfpRgUb7kJqgrkyicHRCXhiaicmWucVauHzVfCRkfRK8vCqO5r10Gv2cug/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
     默认分词器对于中文的分词</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /_analyze&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;text&#34;&lt;/span&gt;: &lt;span&gt;&#34;中华人民共和国人民大会堂&#34;&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;standard&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzhbp1MZCSx1H4SktLnXEiabnhSG2zRAicicfK6d0VTb5dx13g1SuHETPRQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="33-中文分词">3.3 中文分词</h2>
<p>中文分词是中文文本处理的一个基础步骤，也是中文人机自然语言交互的基础模块。</p>
<p>不同于英文的是，中文句子中没有词的界限，因此在进行中文自然语言处理时，通常需要先进行分词，</p>
<p>分词效果将直接影响词性、句法树等模块的效果。</p>
<p>当然分词只是一个工具，场景不同，要求也不同。</p>
<p>部分分词工具如下：</p>
<ul>
<li>
<p>中科院计算所NLPIR http://ictclas.nlpir.org/nlpir/</p>
</li>
<li>
<p>ansj分词器 https://github.com/NLPchina/ansj_seg</p>
</li>
<li>
<p>哈工大的LTP https://github.com/HIT-SCIR/ltp</p>
</li>
<li>
<p>清华大学THULAC https://github.com/thunlp/THULAC</p>
</li>
<li>
<p>斯坦福分词器 https://nlp.stanford.edu/software/segmenter.shtml</p>
</li>
<li>
<p>Hanlp分词器 https://github.com/hankcs/HanLP</p>
</li>
<li>
<p>结巴分词 https://github.com/yanyiwu/cppjieba</p>
</li>
<li>
<p>KCWS分词器(字嵌入+Bi-LSTM+CRF) https://github.com/koth/kcws</p>
</li>
<li>
<p>ZPar https://github.com/frcchang/zpar/releases</p>
</li>
<li>
<p>IKAnalyzer https://github.com/wks/ik-analyzer</p>
</li>
</ul>
<h2 id="34-ik分词器">3.4 IK分词器</h2>
<p>IK分词器下载地址https://github.com/medcl/elasticsearch-analysis-ik/releases 将ik分词器上传到服务器上，然后解压，并改名字为ik</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;mkdir&lt;/span&gt; &lt;span&gt;~/ik&lt;/span&gt;&lt;br&gt;&lt;span&gt;mv&lt;/span&gt; &lt;span&gt;elasticsearch-analysis-ik-7.15.2.zip ~/ik&lt;/span&gt;&lt;br&gt;&lt;span&gt;unzip&lt;/span&gt; &lt;span&gt;elasticsearch-analysis-ik-7.15.2.zip&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>将ik目录拷贝到docker容器的plugins目录下</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;docker&lt;/span&gt; &lt;span&gt;cp ./ik es:/usr/share/elasticsearch/plugins&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><blockquote>
<p>特别说明，尼恩的一键启动版本，已经默认戴上了IK分词器</p>
</blockquote>
<p>IKAnalyzer是一个开源的，基于java语言开发的轻量级的中文分词工具包，IK分词器分为两种模式</p>
<ol>
<li><strong>ik_max_word：会将文本做最细粒度的拆分</strong></li>
</ol>
<p>比如会将“中华人民共和国人民大会堂”拆分为“中华人民共和国、中华人民、中华、华人、人民共和国、人民、共和国、大会堂、大会、会堂等词语。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /_analyze&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;text&#34;&lt;/span&gt;:&lt;span&gt;&#34;中华人民共和国人民大会堂&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;:&lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>![图片](<a href="http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml">http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml</a> version=&lsquo;1.0&rsquo; encoding=&lsquo;UTF-8&rsquo;%3F%3E%3Csvg width=&lsquo;1px&rsquo; height=&lsquo;1px&rsquo; viewBox=&lsquo;0 0 1 1&rsquo; version=&lsquo;1.1&rsquo; xmlns=&lsquo;<a href="http://www.w3.org/2000/svg'">http://www.w3.org/2000/svg'</a> xmlns:xlink=&lsquo;<a href="http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg">http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg</a> stroke=&lsquo;none&rsquo; stroke-width=&lsquo;1&rsquo; fill=&lsquo;none&rsquo; fill-rule=&lsquo;evenodd&rsquo; fill-opacity=&lsquo;0&rsquo;%3E%3Cg transform=&lsquo;translate(-249.000000, -126.000000)&rsquo; fill=&rsquo;%23FFFFFF&rsquo;%3E%3Crect x=&lsquo;249&rsquo; y=&lsquo;126&rsquo; width=&lsquo;1&rsquo; height=&lsquo;1&rsquo;%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)</p>
<ol start="2">
<li><strong>ik_smart：会做最粗粒度的拆分</strong></li>
</ol>
<p>比如会将“中华人民共和国人民大会堂”拆分为中华人民共和国、人民大会堂。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /_analyze&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;text&#34;&lt;/span&gt;: &lt;span&gt;&#34;中华人民共和国人民大会堂&#34;&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzKq8KD4z6EiaZkrHmB8VYn4Jy59lPuL4KkwbmNyuRJmiaEcwrseiamg6cQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="35-自定义扩展字典">3.5 自定义扩展字典</h2>
<p>IK分词器的两种模式的最佳实践是：索引时用ik_max_word，搜索时用ik_smart，索引时最大化的将文章内容分词，搜索时更精确的搜索到想要的结果。</p>
<p>举个例子：用户输入“华为手机”搜索，此时应该搜索出“华为手机”的商品，而不是“华为”和“手机”这两个词，这样会搜索出华为其它的商品，</p>
<p>此时使用ik_smart和ik_max_word都会将华为手机拆分为华为和手机两个词，那些只包括“华为”这个词的信息也被搜索出来了，我的目标是搜索只包含华为手机这个词的信息，这没有满足我的目标。</p>
<p>ik_smart默认情况下分词“华为手机”，依然会分成两个词“华为”和“手机”，这时需要使用自定义扩展字典</p>
<ol>
<li><strong>进入es</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker exec -it es /bin/bash&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>增加自定义字典文件</strong></li>
</ol>
<p>如果容器编辑乱码，可以在宿主机编辑，然后拷贝到容器中</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#进入ik配置目录&lt;br&gt;cd plugins/ik/config/&lt;br&gt;vi new_word.dic&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>内容如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;老铁&lt;br&gt;王者荣耀&lt;br&gt;洪荒之力&lt;br&gt;共有产权房&lt;br&gt;一带一路&lt;br&gt;java日知录&lt;br&gt;华为手机&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>修改配置文件</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;vi IKAnalyzer.cfg.xml&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>内容如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&amp;lt;?xml version=&lt;span&gt;&#34;1.0&#34;&lt;/span&gt; encoding=&lt;span&gt;&#34;UTF-8&#34;&lt;/span&gt;?&amp;gt;&lt;br&gt;&amp;lt;!DOCTYPE properties SYSTEM &lt;span&gt;&#34;http://java.sun.com/dtd/properties.dtd&#34;&lt;/span&gt;&amp;gt;&lt;br&gt;&amp;lt;properties&amp;gt;&lt;br&gt;        &amp;lt;comment&amp;gt;IK Analyzer 扩展配置&amp;lt;/comment&amp;gt;&lt;br&gt;        &amp;lt;!--用户可以在这里配置自己的扩展字典 --&amp;gt;&lt;br&gt;        &amp;lt;entry key=&lt;span&gt;&#34;ext_dict&#34;&lt;/span&gt;&amp;gt;new_word.dic&amp;lt;/entry&amp;gt;&lt;br&gt;         &amp;lt;!--用户可以在这里配置自己的扩展停止词字典--&amp;gt;&lt;br&gt;        &amp;lt;entry key=&lt;span&gt;&#34;ext_stopwords&#34;&lt;/span&gt;&amp;gt;&amp;lt;/entry&amp;gt;&lt;br&gt;        &amp;lt;!--用户可以在这里配置远程扩展字典 --&amp;gt;&lt;br&gt;        &amp;lt;!-- &amp;lt;entry key=&lt;span&gt;&#34;remote_ext_dict&#34;&lt;/span&gt;&amp;gt;words_location&amp;lt;/entry&amp;gt; --&amp;gt;&lt;br&gt;        &amp;lt;!--用户可以在这里配置远程扩展停止词字典--&amp;gt;&lt;br&gt;        &amp;lt;!-- &amp;lt;entry key=&lt;span&gt;&#34;remote_ext_stopwords&#34;&lt;/span&gt;&amp;gt;words_location&amp;lt;/entry&amp;gt; --&amp;gt;&lt;br&gt;&amp;lt;/properties&amp;gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>拷贝到宿主机</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker cp es:/usr/share/elasticsearch/plugins/elasticsearch-analysis-ik/config ~/ik&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li><strong>重启</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker restart es&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="4-高级的dsl-查询">4 高级的DSL 查询</h2>
<p>前面介绍了基础的DSL查询，接下来，介绍一下高级的DSL 查询</p>
<p>ES提供基于DSL(Domain Specific Language)的索引查询模式，</p>
<p>DSL查询基于JSON定义查询</p>
<p>Wikipedia对于DSL的定义&rdquo;<strong>为了解决某一类任务而专门设计的计算机语言&rdquo;</strong></p>
<p>大师Martin Fowler对于DSL定义“<strong>DSL 通过在表达能力上做的妥协换取在某一领域内的高效</strong>”</p>
<p>我们在使用ES的时候，避免不了使用DSL语句去查询，就像使用关系型数据库的时候要学会SQL语法一样。</p>
<p>如果我们学习好了DSL语法的使用，那么在日后使用和使用Java Client调用时候也会变得非常简单。</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzs4F0HBqQZyFZO7Y6ibs3sT1MWXrHnJlAXJtXJnNcYp02UCNLsvROY7w/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<blockquote>
<p>Elasticsearch provides a full Query DSL (Domain Specific Language) based on JSON to define queries. Think of the Query DSL as an AST (Abstract Syntax Tree) of queries</p>
</blockquote>
<h2 id="41-管理索引">4.1 管理索引</h2>
<p>查看所有的索引</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _cat/indices?v&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzJnLvZHibWIhlF0G5t0SLvfyxBsDiaicVoSRGQAUV64jibWKbgcKsCu1R0Q/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<ol>
<li><strong>删除某个索引</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;DELETE&lt;/span&gt; &lt;span&gt;/skuinfo&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>新增索引</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>创建映射</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_mapping&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;long&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>新增文档数据</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/1&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;22,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四来自湖北武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>再增加几条记录：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#新增文档数据 id=2&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/2&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;35,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五家住在深圳！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=3&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/3&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;19,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在深圳打工，来自湖北武汉&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=4&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;66,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=5&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/5&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵子龙&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;77,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;广州&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵子龙来自深圳宝安，但是在广州工作！&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;address&#34;&lt;/span&gt;:&lt;span&gt;&#34;广东省茂名市&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=6&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/6&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵毅&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;55,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;广州&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵毅来自广州白云区，从事电子商务8年！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=7&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/7&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵哈哈&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;57,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉赵哈哈，在深圳打工已有半年了，月薪7500！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li><strong>修改数据</strong></li>
</ol>
<p><strong>（1）操作1</strong></p>
<p>更新数据可以使用之前的增加操作,这种操作会将整个数据替换掉，代码如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#更新数据,id=4&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！在深圳工作！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>使用GET命令查看：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#根据ID查询&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p><strong>（2）操作2</strong></p>
<p>我们先使用下面命令恢复数据：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#恢复文档数据 id=4&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;66,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>使用POST更新某个列的数据</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#使用POST更新某个域的数据&lt;/span&gt;&lt;br&gt;&lt;span&gt;POST&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;doc&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！在深圳工作！&#34;&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="6">
<li><strong>删除Document</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#删除数据&lt;/span&gt;&lt;br&gt;&lt;span&gt;DELETE&lt;/span&gt; &lt;span&gt;user/userinfo/7&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="42-数据查询">4.2 数据查询</h2>
<ol>
<li><strong>查询所有数据</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#查询所有&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>根据ID查询</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#根据ID查询&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_doc/2&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>Sort排序</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#搜索排序&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: &lt;span&gt;{}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;sort&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;order&#34;&lt;/span&gt;:&lt;span&gt;&#34;desc&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>分页</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#分页实现&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: &lt;span&gt;{}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;sort&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;order&#34;&lt;/span&gt;:&lt;span&gt;&#34;desc&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;from&#34;&lt;/span&gt;: &lt;span&gt;0,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;: &lt;span&gt;2&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ul>
<li>
<p>from:从下N的记录开始查询</p>
</li>
<li>
<p>size:每页显示条数</p>
</li>
</ul>
<h2 id="43-查询模式">4.3 查询模式</h2>
<ol>
<li><strong>term查询</strong></li>
</ol>
<p>term主要用于分词精确匹配，如字符串、数值、日期等（不适合情况：1.列中除英文字符外有其它值 2.字符串值中有冒号或中文 3.系统自带属性如_version）</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#查询-term&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;term&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;&lt;/span&gt;&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>terms 查询</strong></li>
</ol>
<p>terms 跟 term 有点类似，但 terms 允许指定多个匹配条件。 如果某个字段指定了多个值，那么文档需要一起去做匹配 。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#查询-terms 允许多个Term&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;terms&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;br&gt;        [&lt;br&gt;          &lt;span&gt;&#34;武汉&#34;&lt;/span&gt;,&lt;br&gt;          &lt;span&gt;&#34;广州&#34;&lt;/span&gt;&lt;br&gt;        ]&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>match查询</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _search&lt;br&gt;{&lt;br&gt;  &#34;query&#34;: {&lt;br&gt;    &#34;match&#34;: {&lt;br&gt;      &#34;city&#34;: &#34;广州武汉&#34;&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>query_string查询</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _search&lt;br&gt;{&lt;br&gt;  &#34;query&#34;: {&lt;br&gt;    &#34;query_string&#34;: {&lt;br&gt;      &#34;default_field&#34;: &#34;city&#34;,&lt;br&gt;      &#34;query&#34;: &#34;广州武汉&#34;&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li><strong>range 查询</strong></li>
</ol>
<p>range过滤允许我们按照指定范围查找一批数据。例如我们查询年龄范围</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#-range 范围过滤&lt;br&gt;#gt表示&amp;gt; gte表示=&amp;gt;&lt;br&gt;#lt表示&amp;lt; lte表示&amp;lt;=&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;range&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;age&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;gte&#34;&lt;/span&gt;: &lt;span&gt;30&lt;/span&gt;,&lt;br&gt;        &lt;span&gt;&#34;lte&#34;&lt;/span&gt;: &lt;span&gt;57&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="6">
<li><strong>exists</strong></li>
</ol>
<p>exists 过滤可以用于查找拥有某个域的数据</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#搜索 exists：是指包含某个域的数据检索&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;exists&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;field&#34;&lt;/span&gt;:&lt;span&gt;&#34;address&#34;&lt;/span&gt;&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="7">
<li><strong>bool 查询</strong></li>
</ol>
<p>bool 可以用来合并多个条件查询结果的布尔逻辑，它包含以下操作符：</p>
<ul>
<li>
<p>must : 多个查询条件的完全匹配,相当于 and。</p>
</li>
<li>
<p>must_not : 多个查询条件的相反匹配，相当于 not。</p>
</li>
<li>
<p>should : 至少有一个查询条件匹配, 相当于 or。</p>
</li>
</ul>
<p>这些参数可以分别继承一个过滤条件或者一个过滤条件的数组：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#过滤搜索 bool &lt;br&gt;#must : 多个查询条件的完全匹配,相当于 and。&lt;br&gt;#must_not : 多个查询条件的相反匹配，相当于 not。&lt;br&gt;#should : 至少有一个查询条件匹配, 相当于 or。&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;bool&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;must&#34;&lt;/span&gt;: [&lt;br&gt;        {&lt;br&gt;          &lt;span&gt;&#34;term&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;city&#34;&lt;/span&gt;: {&lt;br&gt;              &lt;span&gt;&#34;value&#34;&lt;/span&gt;: &lt;span&gt;&#34;深圳&#34;&lt;/span&gt;&lt;br&gt;            }&lt;br&gt;          }&lt;br&gt;        },&lt;br&gt;        {&lt;br&gt;          &lt;span&gt;&#34;range&#34;&lt;/span&gt;:{&lt;br&gt;            &lt;span&gt;&#34;age&#34;&lt;/span&gt;:{&lt;br&gt;              &lt;span&gt;&#34;gte&#34;&lt;/span&gt;:&lt;span&gt;20&lt;/span&gt;,&lt;br&gt;              &lt;span&gt;&#34;lte&#34;&lt;/span&gt;:&lt;span&gt;99&lt;/span&gt;&lt;br&gt;            }&lt;br&gt;          }&lt;br&gt;        }&lt;br&gt;      ]&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="8">
<li><strong>match_all 查询</strong></li>
</ol>
<p>可以查询到所有文档，是没有查询条件下的默认语句。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#查询所有 match_all&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: {}&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="9">
<li><strong>match 查询</strong></li>
</ol>
<p>match查询是一个标准查询，不管你需要全文本查询还是精确查询基本上都要用到它。如果你使用 match 查询一个全文本字段，它会在真正查询之前用分析器先分析match一下查询字符：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#字符串匹配&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;match&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;description&#34;&lt;/span&gt;: &lt;span&gt;&#34;武汉广州&#34;&lt;/span&gt;&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="10">
<li><strong>prefix 查询</strong></li>
</ol>
<p>以什么字符开头的，可以更简单地用 prefix ,例如查询所有以张开始的用户描述</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;#前缀匹配 prefix&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;prefix&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;name&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;value&#34;&lt;/span&gt;: &lt;span&gt;&#34;赵&#34;&lt;/span&gt;&lt;br&gt;      &lt;span&gt;}&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="10">
<li><strong>multi_match 查询</strong></li>
</ol>
<p>multi_match查询允许你做match查询的基础上同时搜索多个字段，在多个字段中同时查一个</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#多个域匹配搜索&lt;br&gt;GET _search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;multi_match&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;&#34;深圳&#34;&lt;/span&gt;,&lt;br&gt;      &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: [&lt;br&gt;        &lt;span&gt;&#34;city&#34;&lt;/span&gt;,&lt;br&gt;        &lt;span&gt;&#34;description&#34;&lt;/span&gt;&lt;br&gt;      ]&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="11">
<li><strong>filter</strong></li>
</ol>
<p>因为过滤可以使用缓存，同时不计算分数，通常的规则是，使用查询（query）语句来进行 全文 搜索或者其它任何需要影响 相关性得分 的搜索。除此以外的情况都使用过滤（filters)</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET /user/_search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;bool&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;filter&#34;&lt;/span&gt;: {&lt;br&gt;         &lt;span&gt;&#34;range&#34;&lt;/span&gt;:{&lt;br&gt;          &lt;span&gt;&#34;age&#34;&lt;/span&gt;:{&lt;br&gt;            &lt;span&gt;&#34;gte&#34;&lt;/span&gt;:&lt;span&gt;25&lt;/span&gt;,&lt;br&gt;            &lt;span&gt;&#34;lte&#34;&lt;/span&gt;: &lt;span&gt;80&lt;/span&gt;&lt;br&gt;          }&lt;br&gt;        }&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>完整DSL案例代码如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;br&gt;&lt;span&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_cat/health?v&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_cat/nodes?v&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_cat/indices?v&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;DELETE&lt;/span&gt; &lt;span&gt;/user&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_mapping&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;long&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;},&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_smart&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/1&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;22,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四来自湖北武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;&lt;br&gt;#新增文档数据 id=2&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/2&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;35,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五家住在深圳！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=3&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/3&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;19,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在深圳打工，来自湖北武汉&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=4&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;66,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=5&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/5&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵子龙&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;77,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;广州&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵子龙来自深圳宝安，但是在广州工作！&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;address&#34;&lt;/span&gt;:&lt;span&gt;&#34;广东省茂名市&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=6&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/6&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵毅&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;55,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;广州&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵毅来自广州白云区，从事电子商务8年！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#新增文档数据 id=7&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/7&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵哈哈&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;57,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉赵哈哈，在深圳打工已有半年了，月薪7500！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;&lt;br&gt;#更新数据,id=4&lt;/span&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！在深圳工作！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;PUT&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;66,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！&#34;&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#使用POST更新某个域的数据&lt;/span&gt;&lt;br&gt;&lt;span&gt;POST&lt;/span&gt; &lt;span&gt;/user/_doc/4&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;doc&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三丰&#34;,&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;description&#34;&lt;/span&gt;:&lt;span&gt;&#34;在武汉读书，家在武汉！在深圳工作！&#34;&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_doc/2&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#搜索排序&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: &lt;span&gt;{}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;sort&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;order&#34;&lt;/span&gt;:&lt;span&gt;&#34;desc&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#分页实现&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: &lt;span&gt;{}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;sort&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;order&#34;&lt;/span&gt;:&lt;span&gt;&#34;desc&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;},&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;from&#34;&lt;/span&gt;: &lt;span&gt;0,&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;: &lt;span&gt;2&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#查询-term&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;term&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;span&gt;&#34;武汉&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#查询-terms 允许多个Term&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;terms&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;city&#34;&lt;/span&gt;:&lt;br&gt;        &lt;span&gt;[&lt;/span&gt;&lt;br&gt;          &lt;span&gt;&#34;武汉&#34;,&lt;/span&gt;&lt;br&gt;          &lt;span&gt;&#34;广州&#34;&lt;/span&gt;&lt;br&gt;        &lt;span&gt;]&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;city&#34;&lt;/span&gt;: &lt;span&gt;&#34;广州武汉&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;  &lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;query_string&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;default_field&#34;&lt;/span&gt;: &lt;span&gt;&#34;city&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;&#34;广州武汉&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#-range 范围过滤&lt;/span&gt;&lt;br&gt;&lt;span&gt;#gt表示&amp;gt; gte表示=&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;#lt表示&amp;lt; lte表示&amp;lt;=&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;range&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;age&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;gte&#34;&lt;/span&gt;: &lt;span&gt;30,&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;lte&#34;&lt;/span&gt;: &lt;span&gt;57&lt;/span&gt;&lt;br&gt;      &lt;span&gt;}&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#搜索 exists：是指包含某个域的数据检索&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;exists&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;field&#34;&lt;/span&gt;:&lt;span&gt;&#34;address&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#过滤搜索 bool &lt;/span&gt;&lt;br&gt;&lt;span&gt;#must : 多个查询条件的完全匹配,相当于 and。&lt;/span&gt;&lt;br&gt;&lt;span&gt;#must_not : 多个查询条件的相反匹配，相当于 not。&lt;/span&gt;&lt;br&gt;&lt;span&gt;#should : 至少有一个查询条件匹配, 相当于 or。&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;bool&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;must&#34;&lt;/span&gt;: &lt;span&gt;[&lt;/span&gt;&lt;br&gt;        &lt;span&gt;{&lt;/span&gt;&lt;br&gt;          &lt;span&gt;&#34;term&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;            &lt;span&gt;&#34;city&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;              &lt;span&gt;&#34;value&#34;&lt;/span&gt;: &lt;span&gt;&#34;深圳&#34;&lt;/span&gt;&lt;br&gt;            &lt;span&gt;}&lt;/span&gt;&lt;br&gt;          &lt;span&gt;}&lt;/span&gt;&lt;br&gt;        &lt;span&gt;},&lt;/span&gt;&lt;br&gt;        &lt;span&gt;{&lt;/span&gt;&lt;br&gt;          &lt;span&gt;&#34;range&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;            &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;              &lt;span&gt;&#34;gte&#34;&lt;/span&gt;:&lt;span&gt;20,&lt;/span&gt;&lt;br&gt;              &lt;span&gt;&#34;lte&#34;&lt;/span&gt;:&lt;span&gt;99&lt;/span&gt;&lt;br&gt;            &lt;span&gt;}&lt;/span&gt;&lt;br&gt;          &lt;span&gt;}&lt;/span&gt;&lt;br&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br&gt;      &lt;span&gt;]&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#查询所有 match_all&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: &lt;span&gt;{}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#字符串匹配&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;match&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;description&#34;&lt;/span&gt;: &lt;span&gt;&#34;武汉广州&#34;&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#前缀匹配 prefix&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;prefix&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;name&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;value&#34;&lt;/span&gt;: &lt;span&gt;&#34;赵&#34;&lt;/span&gt;&lt;br&gt;      &lt;span&gt;}&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;br&gt;#多个域匹配搜索&lt;/span&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;multi_match&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;&#34;深圳&#34;,&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: &lt;span&gt;[&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;city&#34;,&lt;/span&gt;&lt;br&gt;        &lt;span&gt;&#34;description&#34;&lt;/span&gt;&lt;br&gt;      &lt;span&gt;]&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&gt;GET&lt;/span&gt; &lt;span&gt;/user/_search&lt;/span&gt;&lt;br&gt;&lt;span&gt;{&lt;/span&gt;&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;    &lt;span&gt;&#34;bool&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;      &lt;span&gt;&#34;filter&#34;&lt;/span&gt;: &lt;span&gt;{&lt;/span&gt;&lt;br&gt;         &lt;span&gt;&#34;range&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;          &lt;span&gt;&#34;age&#34;&lt;/span&gt;:&lt;span&gt;{&lt;/span&gt;&lt;br&gt;            &lt;span&gt;&#34;gte&#34;&lt;/span&gt;:&lt;span&gt;25,&lt;/span&gt;&lt;br&gt;            &lt;span&gt;&#34;lte&#34;&lt;/span&gt;: &lt;span&gt;80&lt;/span&gt;&lt;br&gt;          &lt;span&gt;}&lt;/span&gt;&lt;br&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br&gt;      &lt;span&gt;}&lt;/span&gt;&lt;br&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="44-使用别名">4.4 使用别名</h2>
<p>在mysql中 我们经常遇到产品修改需求 我们可能会在原有数据库表基础上 对字段 索引 类型进行修改比如 增加一个字段 添加一个字段的索引 又或者修改某个字段的类型，这一切都看起来这么自然 不过在ES这里却是行不通的 ES的mapping一旦设置了之后，可以改，但是改了没有用，因为ES默认是对所有字段进行索引 如果你修改了mapping 那么已经索引过的数据就必须全部重新索引一遍 , ES没有提供这个机制, 只能利用别名手工刷数据，</p>
<ol>
<li><strong>添加索引别名</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;PUT article1/_alias/article&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;acknowledged&#34;&lt;/span&gt; : &lt;span&gt;true&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>创建新article2索引（增加了一个owner字段）</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;PUT article2&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;settings&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;number_of_shards&#34;&lt;/span&gt;: &lt;span&gt;3&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;number_of_replicas&#34;&lt;/span&gt;: &lt;span&gt;1&lt;/span&gt; ,&lt;br&gt;&lt;span&gt;&#34;analysis&#34;&lt;/span&gt; : {&lt;br&gt;&lt;span&gt;&#34;analyzer&#34;&lt;/span&gt; : {&lt;br&gt;&lt;span&gt;&#34;ik&#34;&lt;/span&gt; : {&lt;br&gt;&lt;span&gt;&#34;tokenizer&#34;&lt;/span&gt; : &lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;}&lt;br&gt;}&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;id&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;title&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;content&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;viewCount&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;integer&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;creatDate&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;date&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;format&#34;&lt;/span&gt;: &lt;span&gt;&#34;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;tags&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;}, &lt;br&gt;&lt;span&gt;&#34;owner&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;}&lt;br&gt;}&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>重建索引 reindex</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST _reindex&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;source&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;index&#34;&lt;/span&gt;: &lt;span&gt;&#34;article1&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;dest&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;index&#34;&lt;/span&gt;: &lt;span&gt;&#34;article2&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>修改别名映射</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /_aliases&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;actions&#34;&lt;/span&gt;: [&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;remove&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;index&#34;&lt;/span&gt;: &lt;span&gt;&#34;article1&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;alias&#34;&lt;/span&gt;: &lt;span&gt;&#34;article&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;},&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;add&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;index&#34;&lt;/span&gt;: &lt;span&gt;&#34;article2&#34;&lt;/span&gt;,&lt;br&gt;&lt;span&gt;&#34;alias&#34;&lt;/span&gt;: &lt;span&gt;&#34;article&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;}&lt;br&gt;]&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li>使用别名搜索</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET /article/_search&lt;br&gt;{&lt;br&gt;    &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;match_all&#34;&lt;/span&gt;: {}&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="5-从0开始es工业级java-应用开发">5 从0开始，ES工业级Java 应用开发</h2>
<h2 id="51-high-level-client基本用法">5.1 High Level Client基本用法</h2>
<p>High Level Client客户端是构建于 Low Level Client之上的封装。</p>
<p>类似于Hibernate和JDBC的关系。</p>
<p>使用Spring Data ElasticSearch访问ElastiSearch,注意版本对应关系</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzNtZfx42CvCOJibS9osTCECnZ5Nt1bWXXI9aexPVmm98iaJUWlRdQJfOg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>spring boot 2.6.1对应的ES版本
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzcqW1vWURE8kmG5JWpEaIyTianC8jkUyqLDXdy6o3ibkhwEnibKxpnIiapg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>High Level Client客户端测试案例</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;@SpringBootTest&lt;/span&gt;(webEnvironment = SpringBootTest.WebEnvironment.NONE)&lt;br&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;RestHighLevelClientTest&lt;/span&gt;&lt;br&gt;{&lt;br&gt;&lt;br&gt;    &lt;span&gt;//用来操作 Elasticsearch 服务器的一个客户端对象类&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Autowired&lt;/span&gt;&lt;br&gt;    &lt;span&gt;private&lt;/span&gt; RestHighLevelClient restHLClient;&lt;br&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ValueSource&lt;/span&gt;(ints = {&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;, &lt;span&gt;3&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testWithSimpleValueSource&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt; argument) {&lt;br&gt;        System.out.println(&lt;span&gt;&#34;Parameterized test with value: &#34;&lt;/span&gt; + argument);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testWithSneakyThrows&lt;/span&gt;() {&lt;br&gt;        &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Exception(&lt;span&gt;&#34;This exception is sneaky thrown!&#34;&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@CsvSource&lt;/span&gt;({&lt;span&gt;&#34;1, 1, 2&#34;&lt;/span&gt;, &lt;span&gt;&#34;2, 3, 5&#34;&lt;/span&gt;, &lt;span&gt;&#34;3, 5, 8&#34;&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testAddition&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt; a, &lt;span&gt;int&lt;/span&gt; b, &lt;span&gt;int&lt;/span&gt; result) {&lt;br&gt;        &lt;span&gt;int&lt;/span&gt; sum = a + b;&lt;br&gt;        Assertions.assertEquals(result, sum, &lt;span&gt;&#34;Sum of &#34;&lt;/span&gt; + a + &lt;span&gt;&#34; and &#34;&lt;/span&gt; + b + &lt;span&gt;&#34; should be &#34;&lt;/span&gt; + result);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;//创建三个索引库&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt; &lt;span&gt;//参数测试&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ValueSource&lt;/span&gt;(strings = {&lt;span&gt;&#34;books&#34;&lt;/span&gt;, &lt;span&gt;&#34;items&#34;&lt;/span&gt;, &lt;span&gt;&#34;users&#34;&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testCreateIndex&lt;/span&gt;(String indexName)&lt;br&gt;    {&lt;br&gt;&lt;br&gt;        &lt;span&gt;//指定分词器创建索引库的json格式的数据，每一行用双引号包起来，然后里面的每个双引号前面用反斜杠\转义&lt;/span&gt;&lt;br&gt;        String json = &lt;span&gt;&#34;{&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;\&#34;settings\&#34;: {&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;    \&#34;analysis\&#34;: {&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;      \&#34;analyzer\&#34;: {&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;        \&#34;default\&#34;: {&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;           \&#34;tokenizer\&#34;: \&#34;ik_max_word\&#34;&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;        }&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;      }&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;    }&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;  }&#34;&lt;/span&gt; +&lt;br&gt;                &lt;span&gt;&#34;}&#34;&lt;/span&gt;;&lt;br&gt;&lt;br&gt;        CreateIndexRequest request = &lt;span&gt;new&lt;/span&gt; CreateIndexRequest(indexName)&lt;br&gt;                &lt;span&gt;//参数1：指定创建索引库时要传入的参数  ； 参数2：指定传入内容的类型&lt;/span&gt;&lt;br&gt;                .source(json, XContentType.JSON);&lt;br&gt;        &lt;span&gt;//创建索引库后返回的响应类型--CreateIndexResponse&lt;/span&gt;&lt;br&gt;        CreateIndexResponse resp = restHLClient.indices().create(request, RequestOptions.DEFAULT);&lt;br&gt;&lt;br&gt;        &lt;span&gt;//获取Elasticsearch服务器的响应，就是响应索引库是否创建成功&lt;/span&gt;&lt;br&gt;        System.err.println(resp.isAcknowledged());&lt;br&gt;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;//删除索引库&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ValueSource&lt;/span&gt;(strings = {&lt;span&gt;&#34;items&#34;&lt;/span&gt;, &lt;span&gt;&#34;users&#34;&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testDeleteIndex&lt;/span&gt;(String indexName)&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;//删除索引的请求数据&lt;/span&gt;&lt;br&gt;        DeleteIndexRequest request = &lt;span&gt;new&lt;/span&gt; DeleteIndexRequest(indexName);&lt;br&gt;        &lt;span&gt;//客户端调用操作索引的方法，然后再调用删除的方法&lt;/span&gt;&lt;br&gt;        AcknowledgedResponse resp = restHLClient.indices().delete(request, RequestOptions.DEFAULT);&lt;br&gt;        &lt;span&gt;//查看删除后的响应&lt;/span&gt;&lt;br&gt;        System.err.println(resp.isAcknowledged());&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;//查询所有的索引库&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt; &lt;span&gt;//这个测试不需要参数，直接用这个@Test注解即可&lt;/span&gt;&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testGetIndex&lt;/span&gt;()&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;//参数 &#34;*&#34; ： 表示匹配所有的索引库&lt;/span&gt;&lt;br&gt;        GetIndexRequest request = &lt;span&gt;new&lt;/span&gt; GetIndexRequest(&lt;span&gt;&#34;*&#34;&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;//用rest客户端的方法来查询&lt;/span&gt;&lt;br&gt;        GetIndexResponse resp = restHLClient.indices().get(request, RequestOptions.DEFAULT);&lt;br&gt;        &lt;span&gt;//返回的索引库是一个String类型的数组&lt;/span&gt;&lt;br&gt;        String[] indices = resp.getIndices();&lt;br&gt;        &lt;span&gt;//把数组转成字符串&lt;/span&gt;&lt;br&gt;        String s = Arrays.toString(indices);&lt;br&gt;        System.err.println(s);&lt;br&gt;&lt;br&gt;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;//往索引库添加文档&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;//测试参数有多个值 ，用这个注解&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@CsvSource&lt;/span&gt;({&lt;br&gt;            &lt;span&gt;&#34;1,火影忍者,旋涡鸣人成长为第七代火影的故事,150&#34;&lt;/span&gt;,&lt;br&gt;            &lt;span&gt;&#34;2,家庭教师,废材纲成长为十代首领的热血事迹,200&#34;&lt;/span&gt;,&lt;br&gt;            &lt;span&gt;&#34;4,七龙珠Z,超级赛亚人贝吉塔来到地球后的热闹景象,400&#34;&lt;/span&gt;&lt;br&gt;    })&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testSaveDocument&lt;/span&gt;(Integer id, String title, String description, Double price)&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;//表明向 books 索引库添加文档&lt;/span&gt;&lt;br&gt;        IndexRequest request = &lt;span&gt;new&lt;/span&gt; IndexRequest(&lt;span&gt;&#34;books&#34;&lt;/span&gt;)&lt;br&gt;                .id(id + &lt;span&gt;&#34;&#34;&lt;/span&gt;)&lt;br&gt;                .source(&lt;br&gt;                        &lt;span&gt;&#34;title&#34;&lt;/span&gt;, title,&lt;br&gt;                        &lt;span&gt;&#34;description&#34;&lt;/span&gt;, description,&lt;br&gt;                        &lt;span&gt;&#34;price&#34;&lt;/span&gt;, price&lt;br&gt;                );&lt;br&gt;&lt;br&gt;        IndexResponse resp = restHLClient.index(request, RequestOptions.DEFAULT);&lt;br&gt;        System.err.println(resp);&lt;br&gt;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;//根据文档的id获取文档&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ValueSource&lt;/span&gt;(ints = {&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;3&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testGetDocumentById&lt;/span&gt;(Integer id)&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;//表明从 books 索引库获取文档&lt;/span&gt;&lt;br&gt;        GetRequest request = &lt;span&gt;new&lt;/span&gt; GetRequest(&lt;span&gt;&#34;books&#34;&lt;/span&gt;)&lt;br&gt;                &lt;span&gt;//表明根据指定的文档的id获取文档&lt;/span&gt;&lt;br&gt;                .id(id + &lt;span&gt;&#34;&#34;&lt;/span&gt;);&lt;br&gt;&lt;br&gt;        GetResponse resp = restHLClient.get(request, RequestOptions.DEFAULT);&lt;br&gt;&lt;br&gt;        System.err.println(resp);&lt;br&gt;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;//根据条件查询文档（普通关键字查询和通配符查询）&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@CsvSource&lt;/span&gt;({&lt;br&gt;            &lt;span&gt;&#34;description,热*&#34;&lt;/span&gt;,&lt;br&gt;            &lt;span&gt;&#34;description,成长&#34;&lt;/span&gt;&lt;br&gt;    })&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testSearchDocument&lt;/span&gt;(String field, String term)&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;// 构建查询条件的类&lt;/span&gt;&lt;br&gt;        SearchSourceBuilder builder = &lt;span&gt;new&lt;/span&gt; SearchSourceBuilder();&lt;br&gt;&lt;br&gt;        &lt;span&gt;// 通过 SearchSourceBuilder 可以用面向对象的方式来构建查询的 JSON 字符串&lt;/span&gt;&lt;br&gt;        &lt;span&gt;// SearchSourceBuilder 需要传入 QueryBuilders，而 QueryBuilders 用于构建 QueryBuilder&lt;/span&gt;&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (term != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; term.contains(&lt;span&gt;&#34;*&#34;&lt;/span&gt;))&lt;br&gt;        {&lt;br&gt;            &lt;span&gt;//根据字段和通配符关键字查询&lt;/span&gt;&lt;br&gt;            builder.query(QueryBuilders.wildcardQuery(field, term));&lt;br&gt;        } &lt;span&gt;else&lt;/span&gt;&lt;br&gt;        {&lt;br&gt;            &lt;span&gt;//根据字段和普通关键字查询&lt;/span&gt;&lt;br&gt;            builder.query(QueryBuilders.matchQuery(field,term));&lt;br&gt;        }&lt;br&gt;&lt;br&gt;        &lt;span&gt;//表明从 books 索引库查询文档&lt;/span&gt;&lt;br&gt;        SearchRequest request = &lt;span&gt;new&lt;/span&gt; SearchRequest(&lt;span&gt;&#34;books&#34;&lt;/span&gt;)&lt;br&gt;                &lt;span&gt;// 此处的 builder 参数用于构建查询语法&lt;/span&gt;&lt;br&gt;                .source(builder);&lt;br&gt;&lt;br&gt;        &lt;span&gt;//客户端调用查询的方法 ， 参数1：查询条件语法  参数2：默认的请求选项，比如超时时间之类的&lt;/span&gt;&lt;br&gt;        SearchResponse resp = restHLClient.search(request, RequestOptions.DEFAULT);&lt;br&gt;&lt;br&gt;        System.err.println(resp);&lt;br&gt;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;//根据 id 删除文档&lt;/span&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;@ParameterizedTest&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@ValueSource&lt;/span&gt;(ints = {&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;})&lt;br&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;testDeleteDocumentById&lt;/span&gt;(Integer id)&lt;br&gt;    {&lt;br&gt;        &lt;span&gt;//表明从 books 索引库删除文档&lt;/span&gt;&lt;br&gt;        DeleteRequest request = &lt;span&gt;new&lt;/span&gt; DeleteRequest(&lt;span&gt;&#34;books&#34;&lt;/span&gt;)&lt;br&gt;                &lt;span&gt;//获取指定id的文档&lt;/span&gt;&lt;br&gt;                .id(id+&lt;span&gt;&#34;&#34;&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;//rest客户端调用删除文档的方法&lt;/span&gt;&lt;br&gt;        DeleteResponse resp = restHLClient.delete(request, RequestOptions.DEFAULT);&lt;br&gt;        System.err.println(resp);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="52-聚合查询">5.2 聚合查询</h2>
<h3 id="521-dsl聚合查询">5.2.1 DSL聚合查询</h3>
<ol>
<li>创建测试索引</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;PUT /jh_test&lt;br&gt;{&lt;br&gt;&lt;span&gt;&#34;settings&#34;&lt;/span&gt;: {},&lt;br&gt;&lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;name&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;: {&lt;br&gt;                        &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;,&lt;br&gt;                        &lt;span&gt;&#34;ignore_above&#34;&lt;/span&gt;: &lt;span&gt;256&lt;/span&gt;&lt;br&gt;                    }&lt;br&gt;                }&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;sex&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;long&#34;&lt;/span&gt;&lt;br&gt;},&lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:{&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;:&lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;            }&lt;br&gt;}&lt;br&gt;}&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>其中字段的含义为：name：姓名、buyCount：购买数量，sex：性别，createMonth：创建月 添加测试数据</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /jh_test/_doc/&lt;span&gt;1&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;5&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-01&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;2&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;5&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-01&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;3&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;小卷&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;18&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;女&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-01&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;4&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;小明&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;6&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;女&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-01&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;5&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-02&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;6&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;8&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-02&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;7&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵四&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-02&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;8&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;诸葛亮&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;6&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-02&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;9&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;黄忠&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;9&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;10&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李白&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;11&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;赵四&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;12&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;张三&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;13&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;6&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-04&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;14&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;9&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-04&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;15&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;李四&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-04&#34;&lt;/span&gt;}&lt;br&gt;POST /jh_test/_doc/&lt;span&gt;16&lt;/span&gt;&lt;br&gt;{&lt;span&gt;&#34;name&#34;&lt;/span&gt;:&lt;span&gt;&#34;王五&#34;&lt;/span&gt;,&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;:&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;&#34;sex&#34;&lt;/span&gt;:&lt;span&gt;&#34;男&#34;&lt;/span&gt;,&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;:&lt;span&gt;&#34;2021-04&#34;&lt;/span&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>聚合查询语法：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;&#34;aggs&#34;&lt;/span&gt; : {&lt;br&gt;    &lt;span&gt;&#34;&amp;lt;aggregation_name&amp;gt;&#34;&lt;/span&gt; : {                                 &amp;lt;!--聚合名称 --&amp;gt;&lt;br&gt;        &lt;span&gt;&#34;&amp;lt;aggregation_type&amp;gt;&#34;&lt;/span&gt; : {                             &amp;lt;!--聚合类型 --&amp;gt;&lt;br&gt;            &amp;lt;aggregation_body&amp;gt;                               &amp;lt;!--聚合具体字段 --&amp;gt;&lt;br&gt;        }&lt;br&gt;        [,&lt;span&gt;&#34;meta&#34;&lt;/span&gt; : {  [&amp;lt;meta_data_body&amp;gt;] } ]?                &amp;lt;!--元信息 --&amp;gt;&lt;br&gt;        [,&lt;span&gt;&#34;aggs&#34;&lt;/span&gt; : { [&amp;lt;sub_aggregation&amp;gt;]+ } ]?       &amp;lt;!--子聚合 --&amp;gt;&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol>
<li><strong>查询 buyCount 的总和</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET /jh_test/_search&lt;br&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;sum&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="2">
<li><strong>查询 2021-02 月 buyCount 的总和</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;   &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;term&#34;&lt;/span&gt;: { &lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;: &lt;span&gt;&#34;2021-02&#34;&lt;/span&gt; &lt;br&gt;        }&lt;br&gt;},&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;sum&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>查询 2021-03 月 buyCount 的最大值：</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;   &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;term&#34;&lt;/span&gt;: { &lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;: &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt; &lt;br&gt;        }&lt;br&gt;},&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;max&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>查询 2021-03 月 buyCount 的最小值：</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;   &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;term&#34;&lt;/span&gt;: { &lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;: &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt; &lt;br&gt;        }&lt;br&gt;},&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;min&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li><strong>同时查询 2021-03 月 buyCount 的最大值和最小值：</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;   &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;term&#34;&lt;/span&gt;: { &lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;: &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt; &lt;br&gt;        }&lt;br&gt;},&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;max&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    },&lt;br&gt;     &lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;min&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="6">
<li><strong>查询所有 name 的去重后的数量</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;cardinality&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;name.keyword&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="7">
<li><strong>查询 2021-04 月 name 的去重后的数量</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;query&#34;&lt;/span&gt;: {&lt;br&gt;&lt;span&gt;&#34;term&#34;&lt;/span&gt;: { &lt;br&gt;            &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;: &lt;span&gt;&#34;2021-04&#34;&lt;/span&gt; &lt;br&gt;        }&lt;br&gt;},&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;cardinality&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;name.keyword&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="8">
<li><strong>查询 BuyCount 的平均值</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;&#34;0&#34;&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;        &lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;:{&lt;br&gt;            &lt;span&gt;&#34;avg&#34;&lt;/span&gt;:{&lt;br&gt;                &lt;span&gt;&#34;field&#34;&lt;/span&gt;:&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="9">
<li><strong>一次查询 总数，最大值，最小值，平均值，总和</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;  &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;  &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;:{&lt;br&gt;    &lt;span&gt;&#34;statsAll&#34;&lt;/span&gt;:{&lt;br&gt;      &lt;span&gt;&#34;stats&#34;&lt;/span&gt;:{&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;:&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="10">
<li><strong>根据 createMonth 分组查询每个月的最大 buyCount</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;terms&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;&lt;br&gt;      },&lt;br&gt;      &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;: {&lt;br&gt;          &lt;span&gt;&#34;max&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;          }&lt;br&gt;        }&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="11">
<li><strong>查询每 createMonth 下，根据 sex 区分，统计buyCount 的平均值</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;size&#34;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;: {&lt;br&gt;    &lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;: {&lt;br&gt;      &lt;span&gt;&#34;terms&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;&lt;br&gt;      },&lt;br&gt;      &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;sexGroup&#34;&lt;/span&gt;: {&lt;br&gt;          &lt;span&gt;&#34;terms&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;sex&#34;&lt;/span&gt;&lt;br&gt;          },&lt;br&gt;          &lt;span&gt;&#34;aggs&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;avg&#34;&lt;/span&gt;: {&lt;br&gt;                        &lt;span&gt;&#34;field&#34;&lt;/span&gt;: &lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;&lt;br&gt;                    }&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;      }&lt;br&gt;    }&lt;br&gt;  }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h3 id="522-es客户端实现聚合查询">5.2.2 ES客户端实现聚合查询</h3>
<p>测试代码如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;@SpringBootTest&lt;/span&gt;&lt;br&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;AggregationTest&lt;/span&gt; {&lt;br&gt;&lt;br&gt;    &lt;span&gt;@Resource&lt;/span&gt;&lt;br&gt;    ElasticsearchRestTemplate elasticsearchRestTemplate;&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询 buyCount 的总和&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs1&lt;/span&gt;() {&lt;br&gt;        SumAggregationBuilder buyCountSum = AggregationBuilders.sum(&lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(buyCountSum)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountSum)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Sum sum = aggregations.get(&lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 总数：{} &#34;&lt;/span&gt;, sum.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询 2021-02 月 buyCount 的总和：&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs2&lt;/span&gt;() {&lt;br&gt;        QueryBuilder queryBuilder = QueryBuilders.termQuery(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;, &lt;span&gt;&#34;2021-02&#34;&lt;/span&gt;);&lt;br&gt;        SumAggregationBuilder buyCountSum = AggregationBuilders.sum(&lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withQuery(queryBuilder)&lt;br&gt;                .withAggregations(buyCountSum)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountSum)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Sum sum = aggregations.get(&lt;span&gt;&#34;buyCountSum&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 总数：{} &#34;&lt;/span&gt;, sum.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询 2021-03 月 buyCount 的最大值：&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs3&lt;/span&gt;() {&lt;br&gt;        QueryBuilder queryBuilder = QueryBuilders.termQuery(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;, &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;);&lt;br&gt;        MaxAggregationBuilder buyCountMax = AggregationBuilders.max(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withQuery(queryBuilder)&lt;br&gt;                .withAggregations(buyCountMax)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountMax)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Max max = aggregations.get(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 最大值：{} &#34;&lt;/span&gt;, max.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询 2021-03 月 buyCount 的最小值：&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs4&lt;/span&gt;() {&lt;br&gt;        QueryBuilder queryBuilder = QueryBuilders.termQuery(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;, &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;);&lt;br&gt;        MinAggregationBuilder buyCountMin = AggregationBuilders.min(&lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withQuery(queryBuilder)&lt;br&gt;                .withAggregations(buyCountMin)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountMin)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Min min = aggregations.get(&lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 最小值：{} &#34;&lt;/span&gt;, min.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 同时查询 2021-03 月 buyCount 的最大值和最小值：&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs5&lt;/span&gt;() {&lt;br&gt;        QueryBuilder queryBuilder = QueryBuilders.termQuery(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;, &lt;span&gt;&#34;2021-03&#34;&lt;/span&gt;);&lt;br&gt;        MaxAggregationBuilder buyCountMax = AggregationBuilders.max(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        MinAggregationBuilder buyCountMin = AggregationBuilders.min(&lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withQuery(queryBuilder)&lt;br&gt;                .withAggregations(buyCountMax)&lt;br&gt;                .withAggregations(buyCountMin)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountMax)&lt;/span&gt;&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountMin)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Max max = aggregations.get(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 最大值：{} &#34;&lt;/span&gt;, max.getValue());&lt;br&gt;                Min min = aggregations.get(&lt;span&gt;&#34;buyCountMin&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 最小值：{} &#34;&lt;/span&gt;, min.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询所有 name 的去重后的数量&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs6&lt;/span&gt;() {&lt;br&gt;        CardinalityAggregationBuilder distinctName = AggregationBuilders.cardinality(&lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;name.keyword&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(distinctName)&lt;br&gt;&lt;span&gt;//                .addAggregation(distinctName)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Cardinality cardinality = aggregations.get(&lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 name 的去重后的数量：{} &#34;&lt;/span&gt;, cardinality.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     *  查询 2021-04 月 name 的去重后的数量&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs7&lt;/span&gt;() {&lt;br&gt;        QueryBuilder queryBuilder = QueryBuilders.termQuery(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;, &lt;span&gt;&#34;2021-04&#34;&lt;/span&gt;);&lt;br&gt;        CardinalityAggregationBuilder distinctName = AggregationBuilders.cardinality(&lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;name.keyword&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withQuery(queryBuilder)&lt;br&gt;                .withAggregations(distinctName)&lt;br&gt;&lt;span&gt;//                .addAggregation(distinctName)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Cardinality cardinality = aggregations.get(&lt;span&gt;&#34;distinctName&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 name 的去重后的数量：{} &#34;&lt;/span&gt;, cardinality.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 查询 BuyCount 的平均值&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs8&lt;/span&gt;() {&lt;br&gt;        AvgAggregationBuilder buyCountAvg = AggregationBuilders.avg(&lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(buyCountAvg)&lt;br&gt;&lt;span&gt;//                .addAggregation(buyCountAvg)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Avg avg = aggregations.get(&lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的平均值：{} &#34;&lt;/span&gt;, avg.getValue());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 一次查询 总数，最大值，最小值，平均值，总和&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs9&lt;/span&gt;() {&lt;br&gt;        StatsAggregationBuilder stats = AggregationBuilders.stats(&lt;span&gt;&#34;stats&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;);&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(stats)&lt;br&gt;&lt;span&gt;//                .addAggregation(stats)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Stats s = aggregations.get(&lt;span&gt;&#34;stats&#34;&lt;/span&gt;);&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的 count：{} &#34;&lt;/span&gt;, s.getCount());&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的 min：{} &#34;&lt;/span&gt;, s.getMin());&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的 max：{} &#34;&lt;/span&gt;, s.getMax());&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的 avg：{} &#34;&lt;/span&gt;, s.getAvg());&lt;br&gt;                log.info(&lt;span&gt;&#34;计算 buyCount 的 sum：{} &#34;&lt;/span&gt;, s.getSum());&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     * 根据 createMonth 分组查询每个月的最大 buyCount&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs10&lt;/span&gt;() {&lt;br&gt;        TermsAggregationBuilder createMonthGroup = AggregationBuilders.terms(&lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;)&lt;br&gt;                .subAggregation(AggregationBuilders.max(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;));&lt;br&gt;&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(createMonthGroup)&lt;br&gt;&lt;span&gt;//                .addAggregation(createMonthGroup)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Terms terms = aggregations.get(&lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;);&lt;br&gt;                terms.getBuckets().forEach(bucket -&amp;gt; {&lt;br&gt;                    String createMonth = bucket.getKeyAsString();&lt;br&gt;                    Aggregations subAggs = bucket.getAggregations();&lt;br&gt;                    &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(subAggs)) {&lt;br&gt;                        Max max = subAggs.get(&lt;span&gt;&#34;buyCountMax&#34;&lt;/span&gt;);&lt;br&gt;                        log.info(&lt;span&gt;&#34;计算 {} 月的最大值为：{} &#34;&lt;/span&gt;, createMonth, max.getValue());&lt;br&gt;                    }&lt;br&gt;                });&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span&gt;/**&lt;br&gt;     *  查询每 createMonth 下，根据 sex 区分，统计buyCount 的平均值&lt;br&gt;     */&lt;/span&gt;&lt;br&gt;    &lt;span&gt;@Test&lt;/span&gt;&lt;br&gt;    &lt;span&gt;void&lt;/span&gt; &lt;span&gt;aggs11&lt;/span&gt;() {&lt;br&gt;        TermsAggregationBuilder createMonthGroup = AggregationBuilders.terms(&lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;createMonth&#34;&lt;/span&gt;)&lt;br&gt;                .subAggregation(AggregationBuilders.terms(&lt;span&gt;&#34;sexGroup&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;sex&#34;&lt;/span&gt;)&lt;br&gt;                        .subAggregation(AggregationBuilders.avg(&lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;).field(&lt;span&gt;&#34;buyCount&#34;&lt;/span&gt;)));&lt;br&gt;&lt;br&gt;        Query query = &lt;span&gt;new&lt;/span&gt; NativeSearchQueryBuilder()&lt;br&gt;                .withAggregations(createMonthGroup)&lt;br&gt;&lt;span&gt;//                .addAggregation(createMonthGroup)&lt;/span&gt;&lt;br&gt;                .build();&lt;br&gt;        SearchHits&amp;lt;JhTestEntity&amp;gt; search = elasticsearchRestTemplate.search(query, JhTestEntity.&lt;span&gt;class&lt;/span&gt;);&lt;br&gt;        &lt;span&gt;if&lt;/span&gt; (search.hasAggregations()) {&lt;br&gt;            Aggregations aggregations = (Aggregations) search.getAggregations().aggregations();&lt;br&gt;            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(aggregations)) {&lt;br&gt;                Terms terms = aggregations.get(&lt;span&gt;&#34;createMonthGroup&#34;&lt;/span&gt;);&lt;br&gt;                terms.getBuckets().forEach(bucket -&amp;gt; {&lt;br&gt;                    String createMonth = bucket.getKeyAsString();&lt;br&gt;                    Aggregations sexAggs = bucket.getAggregations();&lt;br&gt;                    &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(sexAggs)) {&lt;br&gt;                        Terms sexTerms = sexAggs.get(&lt;span&gt;&#34;sexGroup&#34;&lt;/span&gt;);&lt;br&gt;                        sexTerms.getBuckets().forEach(sexBucket -&amp;gt; {&lt;br&gt;                            String sex = sexBucket.getKeyAsString();&lt;br&gt;                            Aggregations avgAggs = sexBucket.getAggregations();&lt;br&gt;                            &lt;span&gt;if&lt;/span&gt; (Objects.nonNull(avgAggs)) {&lt;br&gt;                                Avg avg = avgAggs.get(&lt;span&gt;&#34;buyCountAvg&#34;&lt;/span&gt;);&lt;br&gt;                                log.info(&lt;span&gt;&#34;计算 {} 月，{} 性 的平均值为：{} &#34;&lt;/span&gt;, createMonth, sex, avg.getValue());&lt;br&gt;                            }&lt;br&gt;                        });&lt;br&gt;                    }&lt;br&gt;                });&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="53-es-es工业级java-应用开发">5.3 ES ES工业级Java 应用开发</h2>
<p>一般不会直接使用RestHighLevelClient对于ES操作，因为语法过于繁琐，重复，基于分离变和不变的原则可以进行工业级封装。</p>
<p>http://localhost:8080/doc.html</p>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_jpg/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzic7KWvr51X8M62WKB6SM7icSsdPHLiajgib17eh1GBv7EJynxKydhTb3og/640?wx_fmt=jpeg&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>工业级封装后的Service：</p>
<blockquote>
<p>文章实在太长， 这里省略了500字+， 省略的内容请参见尼恩的免费电子书 PDF版本《ES学习圣经：从0到1, 精通 ElasticSearch 工业级使用 》</p>
</blockquote>
<h2 id="6-es集群架构">6 ES集群架构</h2>
<h2 id="61-es集群的5大角色">6.1 ES集群的5大角色</h2>
<ol>
<li><strong>Master Node ：主节点</strong></li>
</ol>
<p>主节点，该节点不和应用创建连接，每个节点都保存了集群状态。master节点控制整个集群的元数据。只有Master Node节点可以修改节点状态信息，及元数据(metadata)的处理。 元数据(metadata)，比如：</p>
<ul>
<li>
<p>索引的分片信息 、主副本信息</p>
</li>
<li>
<p>分片的节点分配信息，路由分配</p>
</li>
<li>
<p>index 、type、Mapping</p>
</li>
<li>
<p>Setting 配置等等。</p>
</li>
</ul>
<p>从资源占用的角度来说：master节点不占用磁盘IO和CPU，内存使用量一般， 没有data 节点高类似于kafa中的 controller，负责集群元数据的管理和维护</p>
<ol start="2">
<li>
<p><strong>Master eligible nodes ：合格节点</strong> 有资格成为Master节点但暂时并不是Master的节点被称为 eligible 节点，该节点可以参加选主流程，成为Master节点. 该节点只是与集群保持心跳，判断Master是否存活，如果Master故障则参加新一轮的Master选举。 从资源占用的角度来说：eligible节点比Master节点更节省资源，因为它还未成为 Master 节点， 只是有资格成功Master节点。</p>
</li>
<li>
<p><strong>Data Node ：数据节点</strong> 职责： 数据节点，用于建立文档索引，管理shard。 类似于rocket 中的 broker，负责数据的管理和维护，数据节点职责：</p>
</li>
</ol>
<ul>
<li>
<p>该节点用于建立文档索引， 接收 应用创建连接、接收索引请求</p>
</li>
<li>
<p>查询，接收用户的搜索请求</p>
</li>
</ul>
<p>data节点的分片执行查询语句获得查询结果后将结果反馈给Coordinating节点，在查询的过程中非常消 耗硬件资源，如果在分片配置及优化没做好的情况下，进行一次查询非常缓慢(硬件配置也要跟上数据量)。 数据节点：保存包含索引文档的分片数据，执行CRUD、搜索、聚合相关的操作。属于：内存、CPU、IO密集型，对硬件资源要求高。 从资源占用的角度来说：data节点会占用大量的CPU、IO和内存</p>
<ol start="4">
<li><strong>Coordinating Node ：协调节点(/路由节点/client节点)</strong></li>
</ol>
<p>协调节点，该节点专用与接收应用的查询连接、接受搜索请求，但其本身不负责存储数据 协调节点，接受客户端搜索请求后将请求转发到与查询条件相关的多个data节点的分片上，然后多个data节点的分片执行查询语句或者查询结果再返回给协调节点，协调节点把各个data节点的返回结果进行整合、排序等一系列操作后再将最终结果返回给用户请求。 data节点的分片执行查询语句获得查询结果后将结果反馈给Coordinating节点，在查询的过程中非常消耗硬件资源，如果在分片配置及优化没做好的情况下，进行一次查询非常缓慢(硬件配置也要跟上数据量)。 搜索请求在两个阶段中执行（query 和 fetch），这两个阶段由接收客户端请求的节点 - 协调节点协调。</p>
<ul>
<li>
<p>在请求query 阶段，协调节点将请求转发到保存数据的数据节点。每个数据节点在本地执行请求并将其结果返回给协调节点。</p>
</li>
<li>
<p>在收集fetch阶段，协调节点将每个数据节点的结果汇集为单个全局结果集。</p>
</li>
</ul>
<p>从资源占用的角度来说：协调节点，可当负责均衡节点，该节点不占用io、cpu和内存 总结：Coordinating 大致的职责 ： 请求分发、结果的合并</p>
<ol start="5">
<li><strong>Ingest Node ：ingest节点</strong></li>
</ol>
<p>ingest 节点可以看作是数据前置处理转换的节点，支持 pipeline管道 设置，可以使用 ingest 对数据进 行过滤、转换等操作，类似于 logstash 中 filter 的作用，功能相当强大。 Ingest节点处理时机——在数据被索引之前，通过预定义好的处理管道对数据进行预处理。默认情况下，所有节点都启用Ingest，因此任何节点都可以处理Ingest任务。 当然，我们也可以创建专用的Ingest节点。</p>
<ol start="6">
<li><strong>部落（tribe）</strong></li>
</ol>
<p>接着说一下ES里面的部落：tribe， 可以在查询过程中链接两个集群的数据，查询的数据将会汇总到tribe节点，有tribe节点对数据进行整合再发送给client； tribe还可以写数据，但是这里有一个限制，就是写的索引只能是一个集群所有；如果写入两个集群同名索引，那么只能成功写入一个，至于写入哪一个可以通过配置偏好实现。 可以通过配置指明tribe只能读，不能写。</p>
<h2 id="62-es集群节点角色配置">6.2 ES集群节点角色配置</h2>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;. node.master&lt;br&gt;&lt;span&gt;2&lt;/span&gt;. node.data&lt;br&gt;&lt;span&gt;3&lt;/span&gt;. node.ingest&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>配置实例/usr/share/elasticsearch/config/elasticsearch.yml</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;bootstrap.memory_lock: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;cluster.name: &lt;span&gt;&#34;es-cluster&#34;&lt;/span&gt;&lt;br&gt;node.name: master1&lt;br&gt;node.master: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;node.data: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;network.host: &lt;span&gt;0.0.0.0&lt;/span&gt;&lt;br&gt;http.port: &lt;span&gt;9200&lt;/span&gt;&lt;br&gt;transport.tcp.port: &lt;span&gt;9300&lt;/span&gt;&lt;br&gt;cluster.initial_master_nodes: [&lt;span&gt;&#34;master1&#34;&lt;/span&gt;]&lt;br&gt;discovery.zen.ping.unicast.hosts: master1, master2, master3&lt;br&gt;#官方推荐 master-eligible nodes / &lt;span&gt;2&lt;/span&gt; + &lt;span&gt;1&lt;/span&gt; 向下取整的个数&lt;br&gt;discovery.zen.minimum_master_nodes: &lt;span&gt;2&lt;/span&gt;&lt;br&gt;path.logs: /usr/share/elasticsearch/logs&lt;br&gt;http.cors.enabled: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;http.cors.allow-origin: &lt;span&gt;&#34;*&#34;&lt;/span&gt;&lt;br&gt;xpack.security.audit.enabled: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>默认情况下这三个属性的值都是true，实际上，一个节点在默认情况下会同时扮演：Master Node，Data Node 和 Ingest Node。</p>
<table>
<thead>
<tr>
<th><strong>节点类型</strong></th>
<th><strong>配置参数</strong></th>
<th><strong>默认值</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Master Eligible</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>|</p>
<p>node.master</p>
<p>|</p>
<p>true</p>
<p>|
|</p>
<p>Data</p>
<p>|</p>
<p>node.data</p>
<p>|</p>
<p>true</p>
<p>|
|</p>
<p>Coordinating only</p>
<p>|</p>
<p>无</p>
<p>|</p>
<p>设置上面2 个参数全为 false，节点为专用协调节点</p>
<p>|
|</p>
<p>Ingest</p>
<p>|</p>
<p>node.ingest</p>
<p>|</p>
<p>true</p>
<p>|</p>
<h2 id="63-es节点配置组合">6.3 ES节点配置组合</h2>
<ol>
<li><strong>组合1</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;node.master: &lt;span&gt;true&lt;/span&gt; &lt;br&gt;node.data: &lt;span&gt;true&lt;/span&gt; &lt;br&gt;node.ingest: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;这种组合表示这个节点既有成为主节点的资格，又可以存储数据，还可以作为预处理节点这个时候如果某个节点被选举成为了真正的主节点，那么他还要存储数据，这样对于这个节点的压力就比较大了。&lt;br&gt;elasticsearch 默认是：每个节点都是这样的配置，在测试环境下这样做没问题。实际工作中建议不要这&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>样设置，这样相当于 主节点 和 数据节点 的角色混合到一块了。</p>
<ol start="2">
<li><strong>组合2</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;node.master: &lt;span&gt;false&lt;/span&gt; &lt;br&gt;node.data: &lt;span&gt;true&lt;/span&gt; &lt;br&gt;node.ingest: &lt;span&gt;false&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>这种组合表示这个节点没有成为主节点的资格，也就不参与选举，只会存储数据。这个节点我们称为 data(数据)节点。在集群中需要单独设置几个这样的节点负责存储数据。后期提供存储和查询服务</p>
<ol start="3">
<li><strong>组合3</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;node.master: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;node.data: &lt;span&gt;false&lt;/span&gt;&lt;br&gt;node.ingest: &lt;span&gt;false&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>这种组合表示这个节点不会存储数据，有成为主节点的资格，可以参与选举，有可能成为真正的主节点。这个节点我们称为master节点</p>
<ol start="4">
<li><strong>组合4</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;node.master: &lt;span&gt;false&lt;/span&gt; &lt;br&gt;node.data: &lt;span&gt;false&lt;/span&gt; &lt;br&gt;node.ingest: &lt;span&gt;true&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>这种组合表示这个节点即不会成为主节点，也不会存储数据，这个节点的意义是作为一个 client(客户端)节点，主要是针对海量请求的时候可以进行负载均衡。 在新版 ElasticSearch5.x 之后该节点称之为：coordinate 节点，其中还增加了一个叫：ingest 节点，用 于预处理数据（索引和搜索阶段都可以用到）。 当然，作为一般应用是不需要这个预处理节点做什么额外的预处理过程，那么这个节点和我们称之为client 节点之间可以看做是等同的，我们在代码中配置访问节点就都可以配置这些 ingest 节点即可。</p>
<h2 id="64-高可用es的部署架构">6.4 高可用ES的部署架构</h2>
<p>![图片](<a href="http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml">http://zshipu.com/t/index.html?url=data:image/svg+xml,%3C%3Fxml</a> version=&lsquo;1.0&rsquo; encoding=&lsquo;UTF-8&rsquo;%3F%3E%3Csvg width=&lsquo;1px&rsquo; height=&lsquo;1px&rsquo; viewBox=&lsquo;0 0 1 1&rsquo; version=&lsquo;1.1&rsquo; xmlns=&lsquo;<a href="http://www.w3.org/2000/svg'">http://www.w3.org/2000/svg'</a> xmlns:xlink=&lsquo;<a href="http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg">http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg</a> stroke=&lsquo;none&rsquo; stroke-width=&lsquo;1&rsquo; fill=&lsquo;none&rsquo; fill-rule=&lsquo;evenodd&rsquo; fill-opacity=&lsquo;0&rsquo;%3E%3Cg transform=&lsquo;translate(-249.000000, -126.000000)&rsquo; fill=&rsquo;%23FFFFFF&rsquo;%3E%3Crect x=&lsquo;249&rsquo; y=&lsquo;126&rsquo; width=&lsquo;1&rsquo; height=&lsquo;1&rsquo;%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)</p>
<ol>
<li><strong>小型的ES集群（&lt;10）的节点架构</strong></li>
</ol>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzwYPSXSL7IOTFcFUAzwg8lH0sNIoHlqQacIcd5shrqcpNiah7KzLTJLg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    小型的ES集群，就是3/5/7这种少于10个节点的集群。对于3个节点、5个节点甚至更多节点角色的配置，3个主节点+数据节点， 2个协调节点即可。 小型的ES集群的节点角色规划：</p>
<ul>
<li>
<p>对于Ingest转换节点，如果我们没有格式转换、类型转换等需求，直接设置为false。</p>
</li>
<li>
<p>3-5个节点属于轻量级集群，要保证主节点个数满足((节点数/2)+1)。</p>
</li>
<li>
<p>轻量级集群，节点的多重属性如：Master&amp;Data设置为同一个节点可以理解的。</p>
</li>
<li>
<p>如果进一步优化，5节点可以将Master和Data再分离。</p>
</li>
</ul>
<ol start="2">
<li><strong>中型的ES集群（10-50）的节点架构</strong></li>
</ol>
<ul>
<li>
<p>三台服务器做master节点 （可选）</p>
</li>
<li>
<p>N（比如20）台服务器作为data节点（存储资源要大）</p>
</li>
<li>
<p>N（比如5）台做coodinate/ingest节点（用于搜索结果合并，可以提高ES查询效率）</p>
</li>
</ul>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKz3OPyZKHefEej0MvxCzIE8P1f6ribEOXa4nJCQnSicVOQPzhwDn2PmzAg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<ol start="3">
<li><strong>超大型的ES集群的节点架构（150个节点+）</strong></li>
</ol>
<p>可以按照100个节点为单位，分成多个集群，通过 tribenode连接，单个ES数据库最好的高可用集群部署架构为：每个集群，三台服务器做master节点</p>
<ul>
<li>
<p>N（比如50）台服务器作为data节点（存储资源要大）</p>
</li>
<li>
<p>N（比如5）台做coodinate节点（用于搜索结果合并，可以提高ES查询效率）</p>
</li>
<li>
<p>N（比如2）台做ingest节点（用于数据转换，可以提高ES索引效率）</p>
</li>
</ul>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzia25htdgufWpVmUfGSv8VbDlicmlQicME9vLkHCQEiaGet94B4iaSibQr4aA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="65-小型es集群的安装">6.5 小型ES集群的安装</h2>
<h3 id="651-image镜像">6.5.1 Image镜像</h3>
<p>有外网环境，拉取镜像代码如下：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;#下载elasticsearch,带中文分词器的版本&lt;br&gt;docker pull andylsr/elasticsearch-with-ik-icu:&lt;span&gt;7.14.0&lt;/span&gt;&lt;br&gt;#下载kibana&lt;br&gt;docker pull docker.elastic.co/kibana/kibana:&lt;span&gt;7.14.0&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>无外网环境，可以先从有公网的环境拉取镜像，然后导出镜像</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker save andylsr/elasticsearch-with-ik-icu:&lt;span&gt;7.14.0&lt;/span&gt; -o /root/elasticsearchwith-ik-icu.tar&lt;br&gt;docker save docker.elastic.co/kibana/kibana:&lt;span&gt;7.14.0&lt;/span&gt; -o /root/kibana.tar&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>然后上传导出的de镜像到dao目标虚拟机，然后导入镜像到docker</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker load -i /vagrant/&lt;span&gt;3&lt;/span&gt;G-middleware/elasticsearch-with-ik-icu.tar&lt;br&gt;docker load -i /vagrant/&lt;span&gt;3&lt;/span&gt;G-middleware/kibana.tar&lt;br&gt;docker load -i /vagrant/&lt;span&gt;3&lt;/span&gt;G-middleware/haproxy.tar&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h3 id="652-创建目录结构">6.5.2 创建目录结构</h3>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;mkdir -p /home/docker-compose/elasticsearch7/{coordinate1,coordinate2}-{logs,data}&lt;br&gt;mkdir -p /home/docker-compose/elasticsearch7/{master1,master2,master3}-{logs,data}&lt;br&gt;chmod -R 777 /home/docker-compose/elasticsearch7&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h3 id="653-安装es集群">6.5.3 安装ES集群</h3>
<p>把docker-compose和ES相应配置文件拷贝到<code>/home/docker-compose</code>目录下，执行如下命令安装ES集群</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;docker-compose --compatibility up -d # 兼容模式后台启动&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ul>
<li>
<p>--compatibility：表示已兼容模式启动容器</p>
</li>
<li>
<p>-d：表示后台启动</p>
</li>
</ul>
<h2 id="66-使用kibana访问集群">6.6 使用kibana访问集群</h2>
<ol>
<li><strong>查看集群健康情况</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _cat/health?v&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>结果：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;epoch      timestamp cluster    status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent&lt;br&gt;&lt;span&gt;1670418184&lt;/span&gt; &lt;span&gt;13&lt;/span&gt;:&lt;span&gt;03&lt;/span&gt;:&lt;span&gt;04&lt;/span&gt;  es-cluster green           &lt;span&gt;5&lt;/span&gt;         &lt;span&gt;3&lt;/span&gt;     &lt;span&gt;16&lt;/span&gt;   &lt;span&gt;8&lt;/span&gt;    &lt;span&gt;0&lt;/span&gt;    &lt;span&gt;0&lt;/span&gt;        &lt;span&gt;0&lt;/span&gt;             &lt;span&gt;0&lt;/span&gt;                  -                &lt;span&gt;100.0&lt;/span&gt;%&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>status选项的值</p>
<ul>
<li>
<p>green : 所有primary shard和replica shard都已成功分配, 集群是100%可用的</p>
</li>
<li>
<p>yellow : 所有primary shard都已成功分配, 但至少有一个replica shard缺失. 此时集群所有功能都正常使用, 数据不会丢失, 搜索结果依然完整, 但集群的可用性减弱. —— 需要及时处理的警告</p>
</li>
<li>
<p>red : 至少有一个primary shard(以及它的全部副本分片)缺失 —— 部分数据不能使用, 搜索只能返回部分数据, 而分配到这个分配上的写入请求会返回一个异常. 此时虽然可以运行部分功能, 但为了索引数据的完整性, 需要尽快修复集群</p>
</li>
</ul>
<ol start="2">
<li><strong>查看集群中的节点个数</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _cat/nodes?v&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;ip         heap.percent ram.percent cpu load_1m load_5m load_15m node.role   master name&lt;br&gt;&lt;span&gt;172.19.0.2&lt;/span&gt;           &lt;span&gt;36&lt;/span&gt;          &lt;span&gt;95&lt;/span&gt;  &lt;span&gt;12&lt;/span&gt;    &lt;span&gt;0.20&lt;/span&gt;    &lt;span&gt;0.43&lt;/span&gt;     &lt;span&gt;0.73&lt;/span&gt; cdfhilmrstw -      master2&lt;br&gt;&lt;span&gt;172.19.0.7&lt;/span&gt;           &lt;span&gt;75&lt;/span&gt;          &lt;span&gt;95&lt;/span&gt;  &lt;span&gt;12&lt;/span&gt;    &lt;span&gt;0.20&lt;/span&gt;    &lt;span&gt;0.43&lt;/span&gt;     &lt;span&gt;0.73&lt;/span&gt; cdfhilmrstw *      master3&lt;br&gt;&lt;span&gt;172.19.0.5&lt;/span&gt;           &lt;span&gt;29&lt;/span&gt;          &lt;span&gt;95&lt;/span&gt;  &lt;span&gt;12&lt;/span&gt;    &lt;span&gt;0.20&lt;/span&gt;    &lt;span&gt;0.43&lt;/span&gt;     &lt;span&gt;0.73&lt;/span&gt; cdfhilmrstw -      master1&lt;br&gt;&lt;span&gt;172.19.0.6&lt;/span&gt;           &lt;span&gt;64&lt;/span&gt;          &lt;span&gt;96&lt;/span&gt;  &lt;span&gt;12&lt;/span&gt;    &lt;span&gt;0.20&lt;/span&gt;    &lt;span&gt;0.43&lt;/span&gt;     &lt;span&gt;0.73&lt;/span&gt; lr          -      coordinate2&lt;br&gt;&lt;span&gt;172.19.0.3&lt;/span&gt;           &lt;span&gt;23&lt;/span&gt;          &lt;span&gt;96&lt;/span&gt;  &lt;span&gt;12&lt;/span&gt;    &lt;span&gt;0.20&lt;/span&gt;    &lt;span&gt;0.43&lt;/span&gt;     &lt;span&gt;0.73&lt;/span&gt; lr          -      coordinate1&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ul>
<li>
<p>第一列（ip）：es节点ip</p>
</li>
<li>
<p>第二列（heap.percent）：堆内存占比</p>
</li>
<li>
<p>第三列（ram.percent）：内存使用占比</p>
</li>
<li>
<p>第四列（cpu）：cpu使用率</p>
</li>
<li>
<p>第五列（load_1m）：1分钟内平均load情况</p>
</li>
<li>
<p>第六列（load_5m）：5分钟内平均load情况</p>
</li>
<li>
<p>第七列（load_15m）：15分钟内平均load情况</p>
</li>
<li>
<p>第八列（node.role）：节点权限</p>
</li>
<li>
<p>第九列（master）：是否master节点，*为master节点</p>
</li>
<li>
<p>第十列（name）：节点名称</p>
</li>
</ul>
<p><strong>（1）heap.percent</strong> 表示ES使用的JVM内存情况，该值应该低于75，如果长时间大于75，表示JVM内存配置不够，如果JVM已经配置到30G，则表示该Datanode节点上的压力较大，需要考虑增加Datanode节点来分摊压力 <strong>（2）ram.percent</strong> 表示机器上内存的使用情况，实际对应linux上的 used+cache内存使用情况，如果该值接近100%，则表示机器上cache内存不够用，主要是由于ES检索中，lucene会消耗大量cache内存，如果cache不够，会导致lucene无法将部分文件加载到cache中，会频繁从磁盘中进行读取，导致查询延时加大</p>
<ol start="3">
<li><strong>查看集群中的索引</strong></li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET _cat/indices?v&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;health status index                           uuid                   pri rep docs.count docs.deleted store.size pri.store.size&lt;br&gt;green  open   .kibana-event-log-&lt;span&gt;7.14.0&lt;/span&gt;-&lt;span&gt;000001&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;uw627v6T8KPBv2xrlPlPQ   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;          &lt;span&gt;9&lt;/span&gt;            &lt;span&gt;0&lt;/span&gt;     &lt;span&gt;97.8&lt;/span&gt;kb         &lt;span&gt;48.9&lt;/span&gt;kb&lt;br&gt;green  open   .kibana_7&lt;span&gt;.14.0_001&lt;/span&gt;              &lt;span&gt;1&lt;/span&gt;G2WGiXOT2Wvux7R_5TuLA   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;         &lt;span&gt;86&lt;/span&gt;           &lt;span&gt;14&lt;/span&gt;      &lt;span&gt;4.9&lt;/span&gt;mb          &lt;span&gt;2.7&lt;/span&gt;mb&lt;br&gt;green  open   .apm-custom-link                dMukcWA2QVOFzsOhWiPOng   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;          &lt;span&gt;0&lt;/span&gt;            &lt;span&gt;0&lt;/span&gt;       &lt;span&gt;416&lt;/span&gt;b           &lt;span&gt;208&lt;/span&gt;b&lt;br&gt;green  open   .apm-agent-configuration        ReYFH-LaQbmWjGTwif0nHA   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;          &lt;span&gt;0&lt;/span&gt;            &lt;span&gt;0&lt;/span&gt;       &lt;span&gt;416&lt;/span&gt;b           &lt;span&gt;208&lt;/span&gt;b&lt;br&gt;green  open   .kibana_task_manager_7&lt;span&gt;.14.0_001&lt;/span&gt; H-&lt;span&gt;3&lt;/span&gt;hQBgZRO2AfYsWLS6LQw   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;         &lt;span&gt;14&lt;/span&gt;         &lt;span&gt;1275&lt;/span&gt;    &lt;span&gt;622.9&lt;/span&gt;kb        &lt;span&gt;337.1&lt;/span&gt;kb&lt;br&gt;green  open   user                            HdrFzj7TQ_ejXe_9Xdx1LQ   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;          &lt;span&gt;6&lt;/span&gt;            &lt;span&gt;2&lt;/span&gt;     &lt;span&gt;37.4&lt;/span&gt;kb         &lt;span&gt;17.4&lt;/span&gt;kb&lt;br&gt;green  open   .tasks                          DudUNrFYTq24R7ZY9IFK5A   &lt;span&gt;1&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;         &lt;span&gt;16&lt;/span&gt;            &lt;span&gt;0&lt;/span&gt;     &lt;span&gt;80.9&lt;/span&gt;kb         &lt;span&gt;43.4&lt;/span&gt;kb&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h2 id="7-数据类型和映射">7 数据类型和映射</h2>
<h2 id="71-映射的创建">7.1 映射的创建</h2>
<p>和传统数据库不同，传统的数据库我们尝试向表中插入数据的前提是这个表已经存在数据结构的定义，且插入数据的字段要在表结构中被定义。 而ES的映射的创建支持主动和被动创建。</p>
<ol>
<li><strong>被动创建（动态映射）</strong></li>
</ol>
<p>此时字段和映射类型不需要事先定义，只需要存在文档的索引，当向此索引添加数据的时候当遇到不存在的映射字段，ES会根据数据内容自动添加映射字段定义。</p>
<ol start="2">
<li><strong>主动创建（显示映射）</strong></li>
</ol>
<p>动态映射只能保证最基础的数据结构的映射，所以很多时候我们需要对字段除了数据结构定义更多的限制的时候，动态映射创建的内容很可能不符合我们的需求，所以可以使用 PUT {index}/mapping 来更新指定索引的映射内容。</p>
<h2 id="72-动态映射dynamic-mapping">7.2 动态映射Dynamic Mapping</h2>
<p>写入文档的时候，索引不存在，会自动创建索引， 无需手动创建，ES会根据内容推断字段的类型，推断会不准确，可能造成某些功能无法使用，例如 范围查询。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;POST /log2/_doc/&lt;span&gt;1&lt;/span&gt;&lt;br&gt;{&lt;br&gt;    &lt;span&gt;&#34;uid&#34;&lt;/span&gt; : &lt;span&gt;1&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;ip&#34;&lt;/span&gt; : &lt;span&gt;&#34;192.1.1.1&#34;&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;transTime&#34;&lt;/span&gt; : &lt;span&gt;&#34;2018-01-01&#34;&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;content&#34;&lt;/span&gt; : &lt;span&gt;&#34;中华人民共和国人民大会堂&#34;&lt;/span&gt;&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;查看一个索引当前的mapping&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;GET /log2/_mapping&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>结果如下</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;log2&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;content&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: {&lt;br&gt;                        &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;: {&lt;br&gt;                            &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;,&lt;br&gt;                            &lt;span&gt;&#34;ignore_above&#34;&lt;/span&gt;: &lt;span&gt;256&lt;/span&gt;&lt;br&gt;                        }&lt;br&gt;                    }&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;ip&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: {&lt;br&gt;                        &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;: {&lt;br&gt;                            &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;,&lt;br&gt;                            &lt;span&gt;&#34;ignore_above&#34;&lt;/span&gt;: &lt;span&gt;256&lt;/span&gt;&lt;br&gt;                        }&lt;br&gt;                    }&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;transTime&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;date&#34;&lt;/span&gt;&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;uid&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;long&#34;&lt;/span&gt;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;动态映射规则&lt;/span&gt;&lt;/section&gt;
</code></pre><table>
<thead>
<tr>
<th><strong>JSON中数据类型</strong></th>
<th><strong>Elasticsearch 数据类型</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>null</td>
<td></td>
</tr>
</tbody>
</table>
<p>|</p>
<p>不添加任何字段</p>
<p>|
|</p>
<p>true或者false</p>
<p>|</p>
<p>boolean类型</p>
<p>|
|</p>
<p>浮点数据</p>
<p>|</p>
<p>float类型</p>
<p>|
|</p>
<p>integer数据</p>
<p>|</p>
<p>long类型</p>
<p>|
|</p>
<p>object</p>
<p>|</p>
<p>object类型</p>
<p>|
|</p>
<p>array</p>
<p>|</p>
<p>取决于数组中的第一个非空值的类型。</p>
<p>|
|</p>
<p>string</p>
<p>|</p>
<p>匹配日期格式，设置为date；匹配数字，设置为float或者long，功能默认关闭；设置为text，并增加keyword子字段。</p>
<p>|</p>
<h2 id="73-显示的设置mapping">7.3 显示的设置mapping</h2>
<p>显示的设置mapping可以更灵活控制ES。 映射创建时，除了对字段的定义，Mapping创建的时候提供了一些对于查询策略和自身定义的参数配置。 下面只是简单介绍下映射支持的字段参数内容。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>analyzer</td>
<td></td>
</tr>
</tbody>
</table>
<p>|</p>
<p>定义此字段索引时使用的分词方式</p>
<p>|
|</p>
<p>normalizer</p>
<p>|</p>
<p>normalizer功能类似于analyzer，但是其可以使查询条件输出唯一的查询条件（可以认为其只是实现了条件小写等不会产生多个查询条件的相关操作）</p>
<p>|
|</p>
<p>boost</p>
<p>|</p>
<p>定义当前字段的查询权重</p>
<p>|
|</p>
<p>coerce</p>
<p>|</p>
<p>此字段控制是否尝试修复部分错误的数据格式，（比如对一个整数字段插入字符串比如&quot;5&quot;，此时此字符串可以被解析为数字），默认为true</p>
<p>|
|</p>
<p>copy_to</p>
<p>|</p>
<p>类似于别名，不同之处参数可以将此字段内容复制到指定字段中，多个字段可以复制到同一个字段中</p>
<p>|
|</p>
<p>doc_values</p>
<p>|</p>
<p>倒排索引虽然可以快速查询文档中内容，但是在进行排序或聚合操作的时候，倒排索引并不能获得文档内容，所以需要存储一份文档数据到doc_values，而此参数控制字段是否需要存储在doc_values中的开关。</p>
<p>|
|</p>
<p>dynamic</p>
<p>|</p>
<p>是否开启动态映射，目前支持三个参数：true/false 开启和关闭，strict 当出现未定义的字段，抛出异常并拒绝添加文档</p>
<p>|
|</p>
<p>enabled</p>
<p>|</p>
<p>此参数控制字段是否可以被索引，当被设置为false的时候表示此字段仅用来存储而无需索引，此时ES不会分析此字段内的数据，所以即使插入的非法的数据内容ES依旧允许执行</p>
<p>|
|</p>
<p>fielddata</p>
<p>|</p>
<p>类似doc_values都是单独存储额外的文档数据，这样通过倒排索引获取文档内容，从而实现在排序和聚合上的功能。不同的是doc_values不支持text格式，text格式数据需要使用fielddata。此参数默认是禁止的，这是因为在第一次对字段进行排序或聚合的时候它会把这个列数据都加载到内存中，这样会带来大量的内存消耗。</p>
<p>|
|</p>
<p>eager_global_ordinals</p>
<p>|</p>
<p>是否使用全局序号来进行聚合。主要在聚合分析构建hash的时候，使用序号来替代doc的值，这样在文档收集阶段根据需要收集到各个桶中，在计算结果时将序号转换为具体doc内容。但是此操作在每次查询时需要重建doc序号关系</p>
<p>|
|</p>
<p>format</p>
<p>|</p>
<p>日期类型字段用来解析的日期格式</p>
<p>|
|</p>
<p>ignore_above</p>
<p>|</p>
<p>当插入字段长度超过此字段设置的值后，此内容将不被索引或存储。对于数组结构字段会作用到每一个元素</p>
<p>|
|</p>
<p>ignore_malformed</p>
<p>|</p>
<p>当向一个字段插入错误的数据类似时，会抛出异常并拒绝文档。但设置此参数后，对字段插入错误的数据时会忽略异常，此文档错误的数据将不被索引，但是其他字段则正常。</p>
<p>|
|</p>
<p>index_options</p>
<p>|</p>
<p>控制将哪些信息添加到反向索引中</p>
<p>|
|</p>
<p>index_phrases</p>
<p>|</p>
<p>主要将两个单词的组合索引到单独字段中，这样在进行精确的短语查询的时候会更有效。支持true和false参数。默认为false。此参数会使索引变大</p>
<p>|
|</p>
<p>index_prefixes</p>
<p>|</p>
<p>允许对字段的前缀进行索引，此参数用来提高查询的速度</p>
<p>|
|</p>
<p>index</p>
<p>|</p>
<p>控制字段是否可以被索引，被设置为false的字段无法被索引到</p>
<p>|
|</p>
<p>fields</p>
<p>|</p>
<p>此参数可以为同一个字段设置不同的索引方式，但是在_source字段中只会保存一份，并不会实际增加存储。但是会增加索引大小</p>
<p>|
|</p>
<p>norms</p>
<p>|</p>
<p>norms里面存储的是各种各样的归一化因子，此内容会影响到文档的得分，在不需要对字段进行打分的时候可以禁用此参数，需要注意的是对于keyword字段默认为false</p>
<p>|
|</p>
<p>null_value</p>
<p>|</p>
<p>一般来说空值是无法被索引的，但是此参数允许使用指定的值替换空值，以对其进行索引</p>
<p>|
|</p>
<p>position_increment_gap</p>
<p>|</p>
<p>增加近似值匹配</p>
<p>|
|</p>
<p>properties</p>
<p>|</p>
<p>定义类型映射、对象字段和嵌套字段等数据</p>
<p>|
|</p>
<p>search_analyzer</p>
<p>|</p>
<p>定义此字段查询时使用的分词方式</p>
<p>|
|</p>
<p>similarity</p>
<p>|</p>
<p>此参数可以配置用来计算字段相似性的算法</p>
<p>|
|</p>
<p>store</p>
<p>|</p>
<p>默认情况下字段内容会被索引但是并不会存储字段中的值，想获取字段中的值则需要在source中获取对应字段的数据，当查询仅仅是尝试获取指定字段的内容的时候，可以设置此参数为true，那么系统可以直接获取此字段的内容，不再尝试获取source中的数据。</p>
<p>|
|</p>
<p>term_vector</p>
<p>|</p>
<p>术语向量的定义，存储一些术语向量，以便可以为特定文档检索它们</p>
<p>|
|</p>
<p>index</p>
<p>|</p>
<p>控制字段是否可以被索引，被设置为false的字段无法被索引到</p>
<p>|
|</p>
<p>fields</p>
<p>|</p>
<p>此参数可以为同一个字段设置不同的索引方式，但是在_source字段中只会保存一份，并不会实际增加存储。但是会增加索引大小</p>
<p>|
|</p>
<p>norms</p>
<p>|</p>
<p>norms里面存储的是各种各样的归一化因子，此内容会影响到文档的得分，在不需要对字段进行打分的时候可以禁用此参数，需要注意的是对于keyword字段默认为false</p>
<p>|
|</p>
<p>null_value</p>
<p>|</p>
<p>一般来说空值是无法被索引的，但是此参数允许使用指定的值替换空值，以对其进行索引</p>
<p>|
|</p>
<p>position_increment_gap</p>
<p>|</p>
<p>增加近似值匹配</p>
<p>|
|</p>
<p>properties</p>
<p>|</p>
<p>定义类型映射、对象字段和嵌套字段等数据</p>
<p>|
|</p>
<p>search_analyzer</p>
<p>|</p>
<p>定义此字段查询时使用的分词方式</p>
<p>|
|</p>
<p>similarity</p>
<p>|</p>
<p>此参数可以配置用来计算字段相似性的算法</p>
<p>|
|</p>
<p>store</p>
<p>|</p>
<p>默认情况下字段内容会被索引但是并不会存储字段中的值，想获取字段中的值则需要在source中获取对应字段的数据，当查询仅仅是尝试获取指定字段的内容的时候，可以设置此参数为true，那么系统可以直接获取此字段的内容，不再尝试获取source中的数据。</p>
<p>|</p>
<ol>
<li>
<p><strong>index</strong> 表示字段是否索引。</p>
</li>
<li>
<p><strong>index_options</strong></p>
</li>
</ol>
<p>index_options 控制倒排索引记录的内容，一共有4种配置可选。</p>
<table>
<thead>
<tr>
<th>index_options</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>docs</td>
<td></td>
</tr>
</tbody>
</table>
<p>|</p>
<p>只记录文档id（ doc id ）</p>
<p>|
|</p>
<p>freqs</p>
<p>|</p>
<p>记录 doc id 和 term frequences</p>
<p>|
|</p>
<p>positions</p>
<p>|</p>
<p>doc id 、 term frequences 、 term position</p>
<p>|
|</p>
<p>offsets</p>
<p>|</p>
<p>doc id 、 term frequences 、 term position 、 character</p>
<p>|
|</p>
<p>offsets</p>
<p>|<br>
|</p>
<p>文本类型 text 默认的配置是 positions ，其他默认是docs。 需要注意的是，虽然index_options提供了offsets这种内容较多的配置级别，但是记录的内容越多，占用的空间也会越多，在实际操作中还是要根据实际情况进行配置。 例如创建mapping,字段名为user_name，字符串类型。user_name不需要索引,info字段的倒排索引类型为positions。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;PUT mapping_test3&lt;br&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;user_name&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;index&#34;&lt;/span&gt;: &lt;span&gt;false&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;&lt;br&gt;            },&lt;br&gt;            &lt;span&gt;&#34;info&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;index_options&#34;&lt;/span&gt;: &lt;span&gt;&#34;positions&#34;&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;&lt;br&gt;            },&lt;br&gt;            &lt;span&gt;&#34;doc&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;index_options&#34;&lt;/span&gt;: &lt;span&gt;&#34;docs&#34;&lt;/span&gt;&lt;br&gt;            },&lt;br&gt;            &lt;span&gt;&#34;freq&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;index_options&#34;&lt;/span&gt;: &lt;span&gt;&#34;freqs&#34;&lt;/span&gt;&lt;br&gt;            },&lt;br&gt;            &lt;span&gt;&#34;offset&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                &lt;span&gt;&#34;index_options&#34;&lt;/span&gt;: &lt;span&gt;&#34;offsets&#34;&lt;/span&gt;&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="3">
<li><strong>ANALYZER</strong> 分词器。es有内置的分词器，也可以使用第三方的分词工具。如IK。</li>
</ol>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;my_type&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;content&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;,&lt;span&gt;//写入是的分词器&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&#34;search_analyzer&#34;&lt;/span&gt;: &lt;span&gt;&#34;ik_max_word&#34;&lt;/span&gt;&lt;span&gt;//搜索时的分词器&lt;/span&gt;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="4">
<li><strong>COPY_TO</strong></li>
</ol>
<p>允许将一个或者多个字段的值复制到某一个字段中。用来满足一些搜索需要，类似于数据库 title like &ldquo;%a%&rdquo; or title2 like &ldquo;%a%&rdquo; copy_to的字段不会出现在_source里面</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;my_type&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;first_name&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;copy_to&#34;&lt;/span&gt;: &lt;span&gt;&#34;full_name&#34;&lt;/span&gt;&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;last_name&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;copy_to&#34;&lt;/span&gt;: &lt;span&gt;&#34;full_name&#34;&lt;/span&gt;&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;full_name&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;br&gt;PUT my_index/my_type/&lt;span&gt;1&lt;/span&gt;&lt;br&gt;{&lt;br&gt;    &lt;span&gt;&#34;first_name&#34;&lt;/span&gt;: &lt;span&gt;&#34;John&#34;&lt;/span&gt;,&lt;br&gt;    &lt;span&gt;&#34;last_name&#34;&lt;/span&gt;: &lt;span&gt;&#34;Smith&#34;&lt;/span&gt;&lt;br&gt;} &lt;br&gt;&lt;span&gt;//full_name = [&#34;John&#34;,&#34;Smith&#34;]&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="5">
<li><strong>DOC_VALUES</strong></li>
</ol>
<p>为了加快排序、聚合操作，在建立倒排索引的时候，额外增加一个列式存储映射，是一个空间换时间的做法。 默认是开启的，对于确定不需要聚合或者排序的字段可以关闭。 注意：text类型没有doc_values。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;my_type&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;status_code&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;                },&lt;br&gt;                &lt;span&gt;&#34;session_id&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;doc_values&#34;&lt;/span&gt;: &lt;span&gt;false&lt;/span&gt;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="6">
<li><strong>ENABLED</strong></li>
</ol>
<p>enabled默认为true,将搜索所有字段。如果设置为false，该字段将不会被搜索。但仍会随着_source返回</p>
<ol start="7">
<li><strong>FIELDDATA</strong></li>
</ol>
<p>对非text类型的字段进行排序可以使用doc_value来进行加速。但是对于，text类型的字段，却不能进行分组排序。更何况加速。 下面这个异常展示了，对text类型的字段进行分组排序的错误。
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzicQ9v0aibHpbaibABBDeL3gic8CDFgKl2rxPmiaSUqwWkMVSNiayLHbqzibtw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    但是可以通过设置fielddata值来达到这一目的。它将字段加载到内存中，因此第一次肯定会很慢。而且将占用内存。</p>
<ol start="8">
<li><strong>FORMAT</strong></li>
</ol>
<p>对字段进行格式化。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;my_type&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;date&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;date&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;format&#34;&lt;/span&gt;: &lt;span&gt;&#34;yyyy-MM-dd&#34;&lt;/span&gt;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="9">
<li><strong>IGNORE_ABOVE</strong></li>
</ol>
<p>大小超过ignore_above设置的字符串不会被索引或存储。</p>
<ol start="10">
<li>FIELDS</li>
</ol>
<p>可以为一个字段映射多个数据类型。比如，一个字符串，可以映射为text，满足全文搜索。同时可以映射为keyword,满足分组和排序。 也可以使用多个分词器来对同一个字段进行分词。</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;{&lt;br&gt;    &lt;span&gt;&#34;mappings&#34;&lt;/span&gt;: {&lt;br&gt;        &lt;span&gt;&#34;my_type&#34;&lt;/span&gt;: {&lt;br&gt;            &lt;span&gt;&#34;properties&#34;&lt;/span&gt;: {&lt;br&gt;                &lt;span&gt;&#34;city&#34;&lt;/span&gt;: {&lt;br&gt;                    &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;text&#34;&lt;/span&gt;,&lt;br&gt;                    &lt;span&gt;&#34;fields&#34;&lt;/span&gt;: {&lt;br&gt;                        &lt;span&gt;&#34;raw&#34;&lt;/span&gt;: {&lt;br&gt;                            &lt;span&gt;&#34;type&#34;&lt;/span&gt;: &lt;span&gt;&#34;keyword&#34;&lt;/span&gt;&lt;br&gt;                        }&lt;br&gt;                    }&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><ol start="11">
<li><strong>STORE</strong></li>
</ol>
<p>我们知道，source字段存储了原始数据(默认)。当然可以通过设置其属性值来选择不存储。此外，还可以通过store选择是否额外存储某个字段。store属性默认为no,表示不存储。当设置为yes时，会在source之 外独立存储。此时，搜索时，会绕过_source，单独进行一次IO得到该字段的值。 store会严重影响搜索效率，尽管如此，在以下两种情况下，还是可以选择使用：</p>
<ul>
<li>
<p>字段很长，每次检索_source代价很大。</p>
</li>
<li>
<p>需要单独对某些字段进行索引重建。</p>
</li>
</ul>
<h2 id="74-es中常见数据类型">7.4 ES中常见数据类型</h2>
<ol>
<li><strong>字符串</strong></li>
</ol>
<p>字符串在之前的版本主要指的是 string 类型。但是在5.X版本已经不支持 string 类型。其被 text 和keyword 类型替代</p>
<ol start="2">
<li><strong>text</strong></li>
</ol>
<p>text字段需要被全文搜索的内容，它可以保存非常长的内容。查询的时候一般使用分词器器进⾏行行分词然后进行全文搜索。text类型的字段不用于排序，很少用于聚合。 （text类型的数据被用来索引长文本，例如电子邮件主体部分或者一款产品的介绍，这些文本会被分析，在建立索引文档之前会被分词器进行分词，转化为词组。经过分词机制之后es允许检索到该文本切分而成的词语，但是text类型的数据不能用来过滤、排序和聚合等操作。</p>
<ol start="3">
<li><strong>keyword</strong></li>
</ol>
<p>此字段不能使用分词器进行查询，只能搜索该字段的完整的值。所以其主要保存一些可以索引的结构化内容。此字段可以进行排序、聚合等操作。 keyword类型的数据可以满足电子邮箱地址、主机名、状态码、邮政编码和标签等数据的要求，不进行分词，常常被用来过滤、排序和聚合。 综上，可以发现text类型在存储数据的时候会默认进行分词，并生成索引。而keyword存储数据的时候，不会分词建立索引，显然，这样划分数据更加节省内存。）</p>
<h2 id="8-底层知识正排索引和倒排索引底层原理">8 底层知识：正排索引和倒排索引底层原理</h2>
<h2 id="81-什么是正排索引">8.1 什么是正排索引</h2>
<p>正排索引是按照文档编号或文档ID等有序的方式将每个文档存储在索引中，通过文档编号或ID进行检索。</p>
<p>这种方式类似于数据库表的行，可以很方便地根据文档ID检索到具体的文档，但是不适合处理大规模文档库的情况。</p>
<p>比如mysql的b+锁索引结构
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_jpg/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzPk5iaibxd9cLvEu0ajz2nGEcJBK6dPFVoxBTPEUTQYy5bEtVsEbgj35g/640?wx_fmt=other&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    比如书籍目录，可以根据页码找文档内容，就是正排索引
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzJkkDiamcBlzRAGHQXyRLNspdeg8iasy2bjMPI6Wvyd46GPGT24h13Wtg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="82-什么是倒排索引">8.2 什么是倒排索引</h2>
<p>倒排索引是按照单词或关键字将文档进行索引，并记录包含该词汇的文档列表。这种方式类似于数据库表的列，可以将具有相同属性的文档按照关键词进行分类，从而实现更加高效和精确的文本搜索。 倒排索引可以理解为Map&lt; item, list&lt; id&raquo;，能够由查询词快速（时间复杂度O(1)）找到包含这个查询词的文件的数据结构。
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzar3xufW6yCSnSxwDWvnuJFfA1vqe8X3ZfmlqbxeNPW29rFR4at9F1Q/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    比如书籍索引页根据关键词，找页码就是倒排索引
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzpQEjWUUS4EWicRjEzUHV5sY7tHCnSVf8z9a8w6etKQvlDhyByfekXAA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h2 id="83-es如何做到快速索引">8.3 ES如何做到快速索引</h2>
<p>假设有这么几条数据</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;| ID | Name | Age | Sex |&lt;br&gt;| -- |:------------:| -----:| -----:|&lt;br&gt;| 1 | Kate | 24 | Female&lt;br&gt;| 2 | John | 24 | Male&lt;br&gt;| 3 | Bill | 29 | Male&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>ID是Elasticsearch自建的文档id，那么Elasticsearch建立的索引如下: Name：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;| Term | Posting List |&lt;br&gt;| -- |:----:|&lt;br&gt;| Kate | 1 |&lt;br&gt;| John | 2 |&lt;br&gt;| Bill | 3 |&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>Age：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;| Term | Posting List |&lt;br&gt;| -- |:----:|&lt;br&gt;| 24 | [1,2] |&lt;br&gt;| 29 | 3 |&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><h3 id="831-posting-list">8.3.1 Posting List</h3>
<p>Elasticsearch分别为每个field都建立了一个倒排索引，</p>
<ul>
<li>
<p>Kate, John, 24, Female这些叫term，</p>
</li>
<li>
<p>而[1,2]就是Posting List。</p>
</li>
</ul>
<p>Posting list就是一个int的数组，存储了所有符合某个term的文档id。 根据id查找的话，通过posting list这种索引方式似乎可以很快进行查找，比如要找age=24的同学，在id数组中查找即可。二分查找，但是，如果想通过name来查找呢？</p>
<h3 id="832-term-dictionary">8.3.2 Term Dictionary</h3>
<p>Elasticsearch为了能快速找到某个term，将所有的term排个序，二分法查找term，logN的查找效， 就像通过字典查找一样. 这样我们可以用二分查找的方式，比全遍历更快地找出目标的term。 这个就是 term dictionary。 所以：反向索引分成两部分，如下图(来自《信息检索导论》)：
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzDG1l9LHBuEoTHFp5D3xtnsBv5tOFbCR3lFOJn4ZGKibJZUxRFMNKH9Q/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    左面是词项词典(Term Dictionary)，右边是倒排记录表(Posting)。 在Lucene中，词典和倒排是分开存储的，词典存储在.tii和.tis文件中。 而倒排又分为两部分存储，第一部分是文档号和词频信息，存储在.frq中；另一部分是词的位置信息， 存储在.prx文件中。 有了term dictionary之后，可以用 logN 次磁盘查找得到目标。 问题是：现在再看起来，似乎和传统数据库通过B+Tree的方式类似啊，为什么说比B+Tree的查询快？</p>
<h3 id="833-term-index">8.3.3 Term Index</h3>
<p>B-Tree通过<strong>减少磁盘寻道次数</strong>来提高查询性能，Elasticsearch也是采用同样的思路</p>
<p>但是磁盘的随机读操作仍然是非常昂贵的（一次random access大概需要10ms的时间）。</p>
<p>所以尽量少的读磁盘，有必要把一些数据缓存到内存里。<strong>Elasticsearch直接通过内存查找term，不读磁盘</strong></p>
<p>但是整个term dictionary本身又太大了，无法完整地放到内存里。</p>
<p>于是就有了term index。term index有点像一本字典的大的章节表，或者说，像一本书的目录。</p>
<p>比如：</p>
<pre tabindex="0"><code>&lt;section&gt;&lt;span&gt;A开头的term ……………. Xxx页&lt;br&gt;C开头的term ……………. Xxx页&lt;br&gt;E开头的term ……………. Xxx页&lt;br&gt;&lt;/span&gt;&lt;/section&gt;
</code></pre><p>如果所有的term都是英文字符的话，可能这个term index就真的是26个英文字符表构成的了。 但是实际的情况是，term未必都是英文字符，term可以是任意的byte数组。</p>
<p>而且26个英文字符也未必是每一个字符都有均等的term，比如x字符开头的term可能一个都没有，而s开头的term又特别多。</p>
<p>实际的term index，的内部结构，类似一棵 trie 树：
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzYowRO0L82AibDAM7XjQX3nXYE9QrQQwnSAiaKMibxicXL0Jcsmv5PIlibKg/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    例子是一个包含 “A”, “to”, “tea”, “ted”, “ten”, “i”, “in”, 和 “inn” 的 trie 树。 Term Dictionary与Term Index存储，Term Dictionary文件的后缀名为tim，Term Index文件的后缀名是tip。</p>
<blockquote>
<p>Lucene为词典做了一层前缀索引(Term Index)，这个索引在Lucene4.0以后采用的数据结构是FST (Finite State Transducer)，一种前缀树的变种，可以称之为前缀索引。</p>
</blockquote>
<p>这种数据结构占用空间很小，Lucene打开索引的时候将其全量装载到内存中，加快磁盘上词典查询速度的同时减少随机磁盘访问次数。</p>
<h3 id="834-trie树前缀树字典树">8.3.4 Trie树（前缀树，字典树）</h3>
<p>Trie，又经常叫前缀树，字典树等等。</p>
<ul>
<li>
<p>一个节点的所有子孙都有相同的前缀，也就是这个节点对应的字符串，而根节点对应空字符串。</p>
</li>
<li>
<p>一般情况下，不是所有的节点都有对应的值，只有叶子节点和部分内部节点所对应的键才有相关的值。</p>
</li>
</ul>
<p>trie中的键通常是字符串，但也可以是其它的结构。它有很多变种，如后缀树，Radix Tree/Trie，PATRICIA tree，以及bitwise版本的crit-bit tree。</p>
<p>当然很多名字的意义其实有交叉。 在计算机科学中，trie，又称前缀树或字典树，是一种有序树，用于保存关联数组，其中的键通常是字 符串。</p>
<p>与二叉查找树不同，键不是直接保存在节点中，而是由节点在树中的位置决定。</p>
<p>trie的算法可以很容易地修改为处理其它结构的有序序列，比如一串数字或者形状的排列。</p>
<p>这棵树不会包含所有的 term，它包含的是 term 的一些前缀。</p>
<p>通过 term index 可以快速地定位到 term dictionary 的某个 offset，然后从这个位置再往后顺序查找。</p>
<p>再加上一些压缩技术（搜索 Lucene Finite State Transducers）, term index 的尺寸可以只有所有term 的尺寸的<strong>几十分之一</strong>，使得用内存缓存整个 term index 变成可能。整体上来说就是这样的效果：
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_png/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzAicTbPopf4hoE6rXEGpiadN690wcyFrZ2r3Dr6nLIX6HC9kiawvEsea0w/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<h3 id="835-为什么es检索比mysql快">8.3.5 为什么ES检索比Mysql快</h3>
<p>现在我们可以回答**“为什么 Elasticsearch/Lucene 检索可以比 Mysql 快”** 了。 Mysql 只有 term dictionary 这一层，是以 b+tree 排序的方式存储在磁盘上的。</p>
<p>检索一个 term 需要若干次（1-3次）的 random access 的磁盘操作。</p>
<p>而ES/ Lucene 在 term dictionary 的基础上添加了 term index 来加速检索，term index 以类似前缀树的形式缓存在内存中。 从 term index 查到对应的 term dictionary 的 block 位置之后，再去磁盘上找 term，大大减少了磁盘的 random access 次数, 将3次 变成了1次。</p>
<blockquote>
<p>以上内容比较复杂，如果没有看懂，请参考后面尼恩发布的 《从0到1, 百亿级数据存储架构》配套视频</p>
</blockquote>
<h2 id="附录elasticsearch-中dsl常用">附录：ElasticSearch 中DSL常用</h2>
<blockquote>
<p>文章实在太长， 这里省略了500字+， 省略的内容请参见尼恩的免费电子书 PDF版本《ES学习圣经：从0到1, 精通 ElasticSearch 工业级使用 》</p>
</blockquote>
<h2 id="从0到1-百亿级数据存储架构怎么设计-2">从0到1, 百亿级数据存储架构，怎么设计？</h2>
<p>从0到1, 百亿级数据存储架构，40岁老架构尼恩团队，计划用一个系列的文章帮大家实现这个架构难题，这个系列还会录成视频，并辅导大家写入简历。</p>
<p>这个系列包括：</p>
<ul>
<li>
<p>高并发搜索ES圣经：从0到1, 从入门到 ElasticSearch 工业级使用</p>
</li>
<li>
<p><strong>100亿级任务调度篇：从0到1, 从入门到 XXLJOB 工业级使用（已经发布）</strong></p>
</li>
<li>
<p>100亿级海量存储篇：从0到1, 从入门到 HABSE 工业级使用</p>
</li>
<li>
<p>100亿级离线计算篇：从0到1, 从入门到 Flink 工业级使用</p>
</li>
</ul>
<p>已经发布的文章包括：</p>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247502366&amp;idx=1&amp;sn=97516e427ed08dee1cdfce7c585f977f&amp;scene=21#wechat_redirect"><strong>字节面试：百亿级存储，怎么设计？只是分库分表？</strong></a></p>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247502246&amp;idx=1&amp;sn=2383a2bb532e3c41fca3f98bc698fa96&amp;scene=21#wechat_redirect"><strong>100亿级任务调度篇：从0到1, 从入门到 XXLJOB 工业级使用</strong></a></p>
<h2 id="说在最后有问题找老架构取经">说在最后：有问题找老架构取经</h2>
<p>百亿级数据存储架构，一定是一个超级牛掰的简历亮点项目，黄金项目，稍微晚点把全量的架构方案和视频进行发布。</p>
<p>这个项目写入简历，面试的时候如果大家能对答如流，如数家珍，基本上 面试官会被你 震惊到、吸引到。</p>
<p>最终，<strong>让面试官爱到 “不能自已、口水直流”</strong>。offer， 也就来了。</p>
<p>在面试之前，建议大家系统化的刷一波 5000页《<a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247484558&amp;idx=3&amp;sn=3c498b0f8e3897e899acf154ad1ac8ee&amp;chksm=c142be0af635371c06b830243517aae063e23814195df1cc75ab2123c5b3ab9cb1217cbd80e3&amp;scene=21#wechat_redirect">尼恩Java面试宝典</a>》V174，在刷题过程中，如果有啥问题，大家可以来 找 40岁老架构师尼恩交流。</p>
<p>另外，如果没有面试机会，可以找尼恩来帮扶、领路。</p>
<ul>
<li>
<p>大龄男的最佳出路是 架构+ 管理</p>
</li>
<li>
<p>大龄女的最佳出路是 DPM，</p>
</li>
</ul>
<p>
        <img class="mx-auto" alt="图片" src="http://zshipu.com/t/index.html?url=https://mmbiz.qpic.cn/sz_mmbiz_jpg/xlgvgPaib7WNQlclzKiakHOxfp7oWdvaKzOiap3FzvIuFcOGXVUrSciahdGKpiccQOMnAb9cVPlVyLuYzr5qUW9LHvg/640?wx_fmt=jpeg&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" />   
    </p>
<p>女程序员如何成为DPM，请参见：</p>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486220&amp;idx=1&amp;sn=0e2f69a4c3568db21b8929a9a34ea7e4&amp;scene=21#wechat_redirect">DPM （双栖）陪跑，助力小白一步登天，升格 产品经理+研发经理</a></p>
<p>领跑模式，尼恩已经指导了大量的就业困难的小伙伴上岸。</p>
<p>前段时间，领跑一个40岁+就业困难小伙伴拿到了一个<strong>年薪100W</strong>的offer，小伙伴实现了 <strong>逆天改命</strong>。</p>
<h2 id="部分历史案例">部分历史案例</h2>
<ul>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486199&amp;idx=1&amp;sn=de39c68ae34b0aad6ddfe29d9946c411&amp;chksm=97b57b7fa0c2f2694c125d65e8419eedde35a5f8e969fc48e45b59a9c1e9c7fedb487d2720b8&amp;scene=21#wechat_redirect">**被裁太爽：**每月大涨1W，10年CRUD小伙，靠转架构一个月上岸，年薪50W爽歪了！</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486166&amp;idx=1&amp;sn=90d928134542309a25e80a992bef4f5a&amp;chksm=97b57b5ea0c2f2483c47fcf02c5b0aae3ba8e42a77bf5c8af0971bdaa48f28283375f6caeb3e&amp;scene=21#wechat_redirect"><strong>小白转架构</strong>，逆涨30%：CRUD小伙7年，狠卷3个月升级为架构师，爽爆了</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486132&amp;idx=1&amp;sn=bb949c992b3a35935bf5fca57f19e2d8&amp;chksm=97b57b3ca0c2f22aeb0e648191801aff933164dcf2b06eb4b6274df6499bffb0bba8e8169205&amp;scene=21#wechat_redirect">**绝地逢生：**9年经验</a><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486132&amp;idx=1&amp;sn=bb949c992b3a35935bf5fca57f19e2d8&amp;chksm=97b57b3ca0c2f22aeb0e648191801aff933164dcf2b06eb4b6274df6499bffb0bba8e8169205&amp;scene=21#wechat_redirect">自考</a>小伙伴，跟着尼恩狠卷3月硬核技术，面试机会爆表，2周后收3个offer ，满血复活</p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486098&amp;idx=1&amp;sn=bbc5732b071477573bfab8a259d208d3&amp;chksm=97b57b1aa0c2f20c27dd74b490b6062c9eec262a3ac25548534ff70290b172dcc51c6eafe532&amp;scene=21#wechat_redirect">**硬转架构：**35岁被裁6个月 职业绝望，转架构急救上岸，DDD和3高项目太重要了</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486077&amp;idx=1&amp;sn=090ad8d19559c727b80e321cd70e3c32&amp;chksm=97b57bf5a0c2f2e32a982b62cfeb2db8744260d7e2d80efdf11ad7c1c5257057ea9b1f7419ec&amp;scene=21#wechat_redirect">**逆天改命：**3年经验2本，卷3个月涨薪60%，进准大厂(得物、乐信、58集团等)，年薪36W</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486059&amp;idx=1&amp;sn=23fa04e6ea781525732f021ab1afaeeb&amp;scene=21#wechat_redirect">女35岁CRUD程序媛，12月被裁后，拿30个机会2个offer上岸，年底大裁员太不容易了</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247486028&amp;idx=1&amp;sn=cf10ecda7a986b26e0359eba7a9cfeff&amp;scene=21#wechat_redirect">38还有救吗？有。42岁被裁2年天快塌了，急救1个月上岸，成开发经理offer，起死回生</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485994&amp;idx=1&amp;sn=50b95d3ae3009d395458c8740595977f&amp;scene=21#wechat_redirect">被裁不慌，9年小伙1个月喜提年薪60W offer，做中间件架构，爽歪了</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485972&amp;idx=1&amp;sn=9f2b5059aaad70c8018b7c6c95a08994&amp;scene=21#wechat_redirect">12年小伙转架构，1小时蜕变收年薪55万offer，秘诀：GO+Java双栖架构</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485942&amp;idx=1&amp;sn=faa999fc9508435db7a88af2716492d9&amp;chksm=97b5787ea0c2f168ac80d344670df16be12614d37161a893ebed88d4c915384fcbc024996403&amp;scene=21#wechat_redirect">**年薪百万：**40岁小伙被裁6个月，跟着尼恩猛卷3月硬核技术，100W年薪逆袭 ，上岸秘诀：首席架构/总架构</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485914&amp;idx=1&amp;sn=7832d0b63155f12eb8036321a99991c8&amp;scene=21#wechat_redirect">不怕裁员，8年小伙去中年危机，秘诀：换架构师赛道，上得厅堂，下得厨房，越早越好</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485881&amp;idx=1&amp;sn=97aae4d5edf8ea30d363e22ca86b5955&amp;scene=21#wechat_redirect">被裁员后因祸得福，拿N+1后，逆涨30%，如何实现？</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485855&amp;idx=1&amp;sn=e9f6b1de7352f09d686c1481632fc454&amp;scene=21#wechat_redirect">逆天啦：4年crud小伙收shein+银行两优质offer，狠卷1月收年薪43万大涨30%</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485838&amp;idx=1&amp;sn=72d9733544a5310ee5068fc4533173ea&amp;scene=21#wechat_redirect">原来，拿大厂offer 有捷径&hellip;&hellip;</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485812&amp;idx=1&amp;sn=d87729bea8a8e22f3c2b3eb207d3b38b&amp;scene=21#wechat_redirect">太劲爆&hellip;. 被裁4个月，38岁Android转Java，2个月提架构offer</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485780&amp;idx=1&amp;sn=03be191625369d33ac54b5c5066c7a68&amp;scene=21#wechat_redirect">起死回生：8年小伙高中毕业+频繁跳槽，狠卷2月，提Java高级offer</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485663&amp;idx=1&amp;sn=357ab76bc6695485b7941e8eb24a0b42&amp;scene=21#wechat_redirect">爽翻了：指导3轮，5年小伙收5大offer，涨50%，领路模式太牛</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485643&amp;idx=1&amp;sn=ce71b19e7c9745ab2fe8bfc75f54d993&amp;chksm=97b57943a0c2f055e5c085eec48586e9ba05ae661acabe4cfb7e984c5aeb03d6beeafd204eba&amp;scene=21#wechat_redirect">降维攻击，37年大龄老伙喜提60W年薪offer，1个月顺利上岸</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485571&amp;idx=1&amp;sn=c0096484fd2e1202c14a4bd9d37427c2&amp;chksm=97b5790ba0c2f01da764b8b7b5e3c8a5b02f42d2ed30809f9d7b2d8e73a5bebc9102ef502bc8&amp;scene=21#wechat_redirect">架构速成：从一面杀到一次过，记7年女架构的速成经历</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzIxMzYwODY3OQ==&amp;mid=2247485452&amp;idx=1&amp;sn=68102559298564895b1496e2230dddb2&amp;chksm=97b57984a0c2f0927d80f8719a7dc56f43ff13e373eb3886d39be98538180f919225b5ac05f2&amp;scene=21#wechat_redirect">极速拿offer：阿里P6被裁后极速上岸，1个月内喜提2优质offer(含滴滴)</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247496226&amp;idx=1&amp;sn=459a566cfa5915a720e80e1880fd730d&amp;chksm=c14148a6f636c1b08a321d08384c5d76e184c22f8f4457f980452c45c163bdc5ab91ca17b919&amp;scene=21#wechat_redirect">大逆袭：做化工12年，35岁转Java，被裁4个月后，1个月收架构Offer，大龄跨行，超级牛</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247492928&amp;idx=1&amp;sn=82fd1c530d0ad8ad798b5c35c040641b&amp;chksm=c1415fc4f636d6d25f16e12a73a2635073994ef742efdddcc1185c5d7727785c98fac14e8de8&amp;scene=21#wechat_redirect">被裁后炸爽：10年小伙12天火速上岸，反涨20%，爽暴了</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247492621&amp;idx=1&amp;sn=f6ada03c596baedcf995e5cb60d255b2&amp;chksm=c1415e89f636d79f13b25d7f3691fb79931515f15b421d65fab1c5e34d4cce4165b6d1772737&amp;scene=21#wechat_redirect">裁就裁，6年小伙60W极速上岸，白拿20W还游一圈拉萨，真香</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=http://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247491450&amp;idx=1&amp;sn=98379c07e430562a8a244121e63f47d7&amp;chksm=c142a5fef6352ce8e3ee64090a6d0619a9d40484f358302d96990e7655ec16f8d8e7624ca88e&amp;scene=21#wechat_redirect">极速拿offer：被毕业3个月，11年经验小伙0.5个月极速拿offer，领路模式的巨大威力</a></p>
</li>
<li>
<p><a href="http://zshipu.com/t/index.html?url=https://mp.weixin.qq.com/s?__biz=MzkxNzIyMTM1NQ==&amp;mid=2247491496&amp;idx=1&amp;sn=cb31f7510a7c2efb7daf6cad793860ad&amp;scene=21#wechat_redirect">惊天大逆袭：8年小伙20天时间提75W年薪offer，逆涨50%，秘诀在这</a></p>
</li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://index.zshipu.com/geek001">知识铺</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://index.zshipu.com/geek001/post/20240507/%E7%99%BE%E4%BA%BF%E7%BA%A7%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84%E8%B5%B7%E6%BA%90--%E7%9F%A5%E8%AF%86%E9%93%BA/">https://index.zshipu.com/geek001/post/20240507/%E7%99%BE%E4%BA%BF%E7%BA%A7%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84%E8%B5%B7%E6%BA%90--%E7%9F%A5%E8%AF%86%E9%93%BA/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
        <li><strong>免责声明：</strong>本页面内容均来源于站内编辑发布，部分信息来源互联网，并不意味着本站赞同其观点或者证实其内容的真实性，如涉及版权等问题，请立即联系客服进行更改或删除，保证您的合法权益。转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。也可以邮件至 sblig@126.com</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/geek001/post/20240507/Docker%E9%83%A8%E7%BD%B2Logstash%E5%B9%B6%E9%85%8D%E7%BD%AEMySQL%E8%BE%93%E5%85%A5%E5%88%B0Elasticsearch%E8%BE%93%E5%87%BA--%E7%9F%A5%E8%AF%86%E9%93%BA/">Docker部署Logstash并配置MySQL输入到Elasticsearch输出 -- 知识铺</a></li>
        
        <li><a href="/geek001/post/20240507/Elasticsearch%E7%B4%A2%E5%BC%95%E6%98%A0%E5%B0%84%E5%BC%82%E5%B8%B8%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E8%83%BD%E5%8C%85%E5%90%AB.--%E7%9F%A5%E8%AF%86%E9%93%BA/">Elasticsearch索引映射异常：字段名不能包含&#39;.&#39; -- 知识铺</a></li>
        
        <li><a href="/geek001/post/20240507/%E5%A6%82%E4%BD%95%E5%B0%86MySQL%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%88%B0Elasticsearch--%E7%9F%A5%E8%AF%86%E9%93%BA/">如何将MySQL数据同步到Elasticsearch -- 知识铺</a></li>
        
        <li><a href="/geek001/post/20240507/%E5%9C%A8CentOS-7.x%E4%B8%8A%E5%AE%89%E8%A3%85JavaElasticsearch%E5%92%8CLogstash--%E7%9F%A5%E8%AF%86%E9%93%BA/">在CentOS 7.x上安装Java、Elasticsearch和Logstash -- 知识铺</a></li>
        
        <li><a href="/geek001/post/20240507/%E5%9C%A8Storybook%E4%B8%AD%E4%BD%BF%E7%94%A8Next.js--%E7%9F%A5%E8%AF%86%E9%93%BA/">在Storybook中使用Next.js -- 知识铺</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/geek001/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8'>数据存储</a></li>
                
                <li><a href='/geek001/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1'>架构设计</a></li>
                
                <li><a href='/geek001/tags/Elasticsearch'>Elasticsearch</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "zshipu/zshipu-index"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2024 <a href="https://index.zshipu.com/geek001">知识铺的博客 By 知识铺</a>
        
        | <a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">浙 ICP 备19032823号-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/geek001/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://index.zshipu.com/geek001/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://index.zshipu.com/geek001">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%9C%A8%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84%E4%B8%AD%E7%9A%84%E5%AE%9E%E8%B7%B5--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="领域驱动设计在应用架构中的实践 -- 知识铺">领域驱动设计在应用架构中的实践 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E6%9E%B6%E6%9E%84%E5%B8%88%E5%BF%85%E5%A4%87DDD%E4%B9%8B%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="架构师必备：DDD之落地实践 -- 知识铺">架构师必备：DDD之落地实践 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E6%9C%BA%E5%88%B6%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%8C%87%E5%8D%97--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="大型语言模型学习机制与网络工程师指南 -- 知识铺">大型语言模型学习机制与网络工程师指南 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E4%BD%BF%E7%94%A8Java%E6%8C%81%E4%B9%85%E6%80%A7%E6%9E%84%E5%BB%BA%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%AD%96%E7%95%A5--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="使用Java持久性构建架构：模式与策略 -- 知识铺">使用Java持久性构建架构：模式与策略 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240801/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="领域驱动设计基础知识 -- 知识铺">领域驱动设计基础知识 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E8%85%BE%E8%AE%AF%E8%A7%86%E9%A2%91%E9%80%9A%E8%BF%87DDD%E6%9E%B6%E6%9E%84%E9%87%8D%E6%9E%84%E9%99%8D%E4%BD%8E%E4%BB%A3%E7%A0%81%E9%87%8F--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="腾讯视频通过DDD架构重构降低代码量 -- 知识铺">腾讯视频通过DDD架构重构降低代码量 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240801/CSS-%E5%AE%9E%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%B1%BB%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="CSS 实用程序类的三种类型 -- 知识铺">CSS 实用程序类的三种类型 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8BLLMs%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E8%A7%A3%E8%AF%BB--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="大型语言模型（LLMs）基本概念解读 -- 知识铺">大型语言模型（LLMs）基本概念解读 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240801/DDD%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%94%A8%E4%BE%8B%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="DDD在机器学习人工智能用例中的应用 -- 知识铺">DDD在机器学习人工智能用例中的应用 -- 知识铺</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/geek001/post/20240730/Eric-Evans-%E9%BC%93%E5%8A%B1%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1DDD%E5%AE%9E%E8%B7%B5%E8%80%85%E5%B0%9D%E8%AF%95%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8BLLMs--%E7%9F%A5%E8%AF%86%E9%93%BA/" title="Eric Evans 鼓励领域驱动设计(DDD)实践者尝试大型语言模型(LLMs) -- 知识铺">Eric Evans 鼓励领域驱动设计(DDD)实践者尝试大型语言模型(LLMs) -- 知识铺</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【2019双12】ALL IN CLoud 低至1折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="助力产业智慧升级，云服务器首年88元起，更有千元代金券礼包免费领！" target="_blank" style="color:red">
                
                    <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345-7c71532bd4935fbdd9a67c1a71e577b1767b805c.200%E7%89%88%E6%9C%ACB.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?source=5176.11533457&amp;userCode=tzm8r4hc" title="【渠道专享低折扣】11月特惠 限时2折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1hblJl7Y2gK0jSZFgXXc5OFXa-750-400.jpg">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/geek001/categories/'>分类</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/geek001/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://index.zshipu.com/geek001/tags/.NET%E5%BC%80%E6%BA%90%E6%8E%A7%E4%BB%B6%E5%BA%93/">.NET开源控件库</a>
    
    <a href="https://index.zshipu.com/geek001/tags/2PC/">2PC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/3PC/">3PC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/404/">404</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI/">AI</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI-Agent/">AI Agent</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AIGC/">AIGC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E6%8A%80%E6%9C%AF/">AI技术</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E6%90%9C%E7%B4%A2/">AI搜索</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E6%9C%80%E6%96%B0%E5%8A%A8%E6%80%81/">AI最新动态</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/">AI编程工具</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E8%9E%8D%E5%90%88/">AI融合</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AI%E8%B5%8B%E8%83%BD/">AI赋能</a>
    
    <a href="https://index.zshipu.com/geek001/tags/AJAX/">AJAX</a>
    
    <a href="https://index.zshipu.com/geek001/tags/API/">API</a>
    
    <a href="https://index.zshipu.com/geek001/tags/API%E7%BD%91%E5%85%B3/">API网关</a>
    
    <a href="https://index.zshipu.com/geek001/tags/API%E8%AE%BE%E8%AE%A1/">API设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ARM/">ARM</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Angular/">Angular</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Apache-Knox/">Apache Knox</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Apache-Shiro/">Apache Shiro</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Apache-Spark/">Apache Spark</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Apache-Zeppelin/">Apache Zeppelin</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Apollo/">Apollo</a>
    
    <a href="https://index.zshipu.com/geek001/tags/App-Router/">App Router</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ArrayBuffer/">ArrayBuffer</a>
    
    <a href="https://index.zshipu.com/geek001/tags/BFF%E6%9E%B6%E6%9E%84/">BFF架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Bootstrap/">Bootstrap</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Bun/">Bun</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ByteBuffer/">ByteBuffer</a>
    
    <a href="https://index.zshipu.com/geek001/tags/B%E7%AB%AF%E4%B8%9A%E5%8A%A1/">B端业务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/B%E7%AB%AF%E8%90%A5%E9%94%80/">B端营销</a>
    
    <a href="https://index.zshipu.com/geek001/tags/C&#43;&#43;%E5%85%A5%E9%97%A8/">C&#43;&#43;入门</a>
    
    <a href="https://index.zshipu.com/geek001/tags/C&#43;&#43;%E8%BF%9B%E9%98%B6/">C&#43;&#43;进阶</a>
    
    <a href="https://index.zshipu.com/geek001/tags/C&#43;&#43;%E9%AB%98%E7%BA%A7/">C&#43;&#43;高级</a>
    
    <a href="https://index.zshipu.com/geek001/tags/C/C&#43;&#43;/">C/C&#43;&#43;</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Cas/">Cas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CAS5/">CAS5</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CAS%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/">CAS单点登录</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CAS%E6%9C%8D%E5%8A%A1/">CAS服务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CAS%E6%9C%8D%E5%8A%A1%E5%99%A8/">CAS服务器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CGLIB%E4%BB%A3%E7%90%86/">CGLIB代理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CI/CD/">CI/CD</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CQRS/">CQRS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CQRS%E5%92%8C%E4%BA%8B%E4%BB%B6%E6%BA%AF%E6%BA%90/">CQRS和事件溯源</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CRUD-Operations/">CRUD Operations</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CRUD%E6%8E%A5%E5%8F%A3/">CRUD接口</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CSDN%E5%8D%9A%E5%AE%A2/">CSDN博客</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CSS/">CSS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CSS-%E5%A1%AB%E5%85%85/">CSS 填充</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CSS%E6%A8%A1%E5%9D%97/">CSS模块</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Canvas/">Canvas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Cas/">Cas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/CentOS-7.x/">CentOS 7.x</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Class-%E7%B1%BB/">Class 类</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Clickhouse/">Clickhouse</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Clickhouse/">Clickhouse</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Cloud-Computing/">Cloud Computing</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Components%E7%9B%AE%E5%BD%95/">Components目录</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Core-Web-Vitals/">Core Web Vitals</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Cortex-M3/">Cortex-M3</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Coze%E5%B9%B3%E5%8F%B0/">Coze平台</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Curotec/">Curotec</a>
    
    <a href="https://index.zshipu.com/geek001/tags/C%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/">C语言编程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DDD/">DDD</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DDD%E6%9E%B6%E6%9E%84/">DDD架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DDD%E6%A8%A1%E5%BC%8F/">DDD模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DDD%E8%AF%8A%E6%89%80/">DDD诊所</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Dao%E5%B1%82/">Dao层</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DataOutputStream/">DataOutputStream</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DataView/">DataView</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DeFi/">DeFi</a>
    
    <a href="https://index.zshipu.com/geek001/tags/DevOps/">DevOps</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Docker/">Docker</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Domain-Driven-Design/">Domain-Driven Design</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ELK/">ELK</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ELK-Stack/">ELK Stack</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ETL%E5%B7%A5%E5%85%B7/">ETL工具</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Elastic-Stack/">Elastic Stack</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Elasticsearch/">Elasticsearch</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Expedia/">Expedia</a>
    
    <a href="https://index.zshipu.com/geek001/tags/FAA/">FAA</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Feign/">Feign</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Fetch/">Fetch</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Filebeat/">Filebeat</a>
    
    <a href="https://index.zshipu.com/geek001/tags/FinTech/">FinTech</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Flink/">Flink</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Flutter/">Flutter</a>
    
    <a href="https://index.zshipu.com/geek001/tags/FreeMarker/">FreeMarker</a>
    
    <a href="https://index.zshipu.com/geek001/tags/GPT-4o/">GPT-4o</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Genspark/">Genspark</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Geoserver%E6%BC%8F%E6%B4%9E/">Geoserver漏洞</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Git/">Git</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Go-%E8%AF%AD%E8%A8%80/">Go 语言</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Golang/">Golang</a>
    
    <a href="https://index.zshipu.com/geek001/tags/GraphQL/">GraphQL</a>
    
    <a href="https://index.zshipu.com/geek001/tags/GraphQL%E6%BC%8F%E6%B4%9E/">GraphQL漏洞</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Guava/">Guava</a>
    
    <a href="https://index.zshipu.com/geek001/tags/HTML/">HTML</a>
    
    <a href="https://index.zshipu.com/geek001/tags/HTML5/">HTML5</a>
    
    <a href="https://index.zshipu.com/geek001/tags/HZHControls/">HZHControls</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ITPUB%E5%8D%9A%E5%AE%A2/">ITPUB博客</a>
    
    <a href="https://index.zshipu.com/geek001/tags/IT%E7%A4%BE%E5%8C%BA/">IT社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/IaC/">IaC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Idea%E6%8F%92%E4%BB%B6/">Idea插件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/InfoQ%E5%86%99%E4%BD%9C%E7%A4%BE%E5%8C%BA/">InfoQ写作社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/InnoDB/">InnoDB</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-423/">JEP 423</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-447/">JEP 447</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-454/">JEP 454</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-456/">JEP 456</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-457/">JEP 457</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-458/">JEP 458</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-459/">JEP 459</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-460/">JEP 460</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-461/">JEP 461</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-462/">JEP 462</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-463/">JEP 463</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JEP-464/">JEP 464</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JFinal/">JFinal</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JVM/">JVM</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/">JVM内存结构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JWT/">JWT</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JWT%E9%AA%8C%E8%AF%81/">JWT验证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java/">Java</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java-17/">Java 17</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java-22/">Java 22</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java-Web%E5%AE%89%E5%85%A8/">Java Web安全</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JavaScript/">JavaScript</a>
    
    <a href="https://index.zshipu.com/geek001/tags/JavaScript-%E8%BF%90%E8%A1%8C%E6%97%B6/">JavaScript 运行时</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java%E5%85%A5%E9%97%A8/">Java入门</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java%E6%8C%81%E4%B9%85%E6%80%A7/">Java持久性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">Java虚拟机</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Java%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97/">Java运行日志</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Kimi-API/">Kimi API</a>
    
    <a href="https://index.zshipu.com/geek001/tags/LLM%E5%A4%A7%E6%A8%A1%E5%9E%8B/">LLM大模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/LM393/">LM393</a>
    
    <a href="https://index.zshipu.com/geek001/tags/LONGTEXT/">LONGTEXT</a>
    
    <a href="https://index.zshipu.com/geek001/tags/LangChain/">LangChain</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Lepod-Pro/">Lepod Pro</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Link-%E7%BB%84%E4%BB%B6/">Link 组件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Link%E7%BB%84%E4%BB%B6/">Link组件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Linux%E7%B3%BB%E7%BB%9FRPM%E7%AE%A1%E7%90%86%E5%99%A8/">Linux系统RPM管理器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Llama-3/">Llama 3</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Llama3%E4%B8%AD%E6%96%87%E6%A8%A1%E5%9E%8B/">Llama3中文模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Lockfile/">Lockfile</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Logstash/">Logstash</a>
    
    <a href="https://index.zshipu.com/geek001/tags/MCU/">MCU</a>
    
    <a href="https://index.zshipu.com/geek001/tags/MDK5/">MDK5</a>
    
    <a href="https://index.zshipu.com/geek001/tags/MVCC/">MVCC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Maven/">Maven</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Multiline%E6%8F%92%E4%BB%B6/">Multiline插件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/MyBatis/">MyBatis</a>
    
    <a href="https://index.zshipu.com/geek001/tags/MySQL/">MySQL</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Mybatis-Plus/">Mybatis-Plus</a>
    
    <a href="https://index.zshipu.com/geek001/tags/NIO/">NIO</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Nest/">Nest</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Nest.js/">Nest.js</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Netty/">Netty</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Next-Js/">Next Js</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Next.js/">Next.js</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Next.js-App-Router/">Next.js App Router</a>
    
    <a href="https://index.zshipu.com/geek001/tags/NextJS/">NextJS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Node.js/">Node.js</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Node.js-API/">Node.js API</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Node.js-%E6%9B%BF%E4%BB%A3%E5%93%81/">Node.js 替代品</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Nuitka/">Nuitka</a>
    
    <a href="https://index.zshipu.com/geek001/tags/OAuth-%E9%9B%86%E6%88%90/">OAuth 集成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/OLAP/">OLAP</a>
    
    <a href="https://index.zshipu.com/geek001/tags/OORT/">OORT</a>
    
    <a href="https://index.zshipu.com/geek001/tags/POM/">POM</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Pac4j/">Pac4j</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Pac4j-4.0.0/">Pac4j 4.0.0</a>
    
    <a href="https://index.zshipu.com/geek001/tags/pac4j-cas/">pac4j-cas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Performance-Tuning/">Performance Tuning</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Pinboard/">Pinboard</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Prisma/">Prisma</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Python/">Python</a>
    
    <a href="https://index.zshipu.com/geek001/tags/QQ%E6%9C%BA%E5%99%A8%E4%BA%BA/">QQ机器人</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Qunar/">Qunar</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Quora%E6%9B%BF%E4%BB%A3%E5%93%81/">Quora替代品</a>
    
    <a href="https://index.zshipu.com/geek001/tags/REST/">REST</a>
    
    <a href="https://index.zshipu.com/geek001/tags/REST-API/">REST API</a>
    
    <a href="https://index.zshipu.com/geek001/tags/React/">React</a>
    
    <a href="https://index.zshipu.com/geek001/tags/React-Query/">React Query</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Redis/">Redis</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Ribbon/">Ribbon</a>
    
    <a href="https://index.zshipu.com/geek001/tags/RubyGems/">RubyGems</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SPL/">SPL</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SSENSE-TECH/">SSENSE-TECH</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SSG/">SSG</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SSO-Shiro-CAS/">SSO-Shiro-CAS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/STDOUT/">STDOUT</a>
    
    <a href="https://index.zshipu.com/geek001/tags/STM32/">STM32</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Scala/">Scala</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Scaled-Agile-Framework/">Scaled Agile Framework</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Scrum-%E5%8F%8D%E6%A8%A1%E5%BC%8F/">Scrum 反模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Sega/">Sega</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Server-Rendering/">Server Rendering</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Service%E5%B1%82/">Service层</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Session%E5%85%B1%E4%BA%AB/">Session共享</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Shiro/">Shiro</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Socket-%E7%BC%96%E7%A8%8B/">Socket 编程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring/">Spring</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-AOP/">Spring AOP</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-Boot/">Spring Boot</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-Boot-2.0/">Spring Boot 2.0</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-Framework/">Spring Framework</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-MVC/">Spring MVC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-Security/">Spring Security</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring-Validation/">Spring Validation</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SpringBoot/">SpringBoot</a>
    
    <a href="https://index.zshipu.com/geek001/tags/SpringBoot/">SpringBoot</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Spring%E7%8A%B6%E6%80%81%E6%9C%BA/">Spring状态机</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Storybook/">Storybook</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Swagger%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/">Swagger接口文档</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TCC/">TCC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TCP%E7%B2%98%E5%8C%85%E9%97%AE%E9%A2%98/">TCP粘包问题</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TEXT/">TEXT</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Tailwind-CSS/">Tailwind CSS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TeamCity/">TeamCity</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ThinkJS/">ThinkJS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/ThreadLocal/">ThreadLocal</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Troubleshooting/">Troubleshooting</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TypeScript/">TypeScript</a>
    
    <a href="https://index.zshipu.com/geek001/tags/TypedArray/">TypedArray</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Vaadin/">Vaadin</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Vue.js/">Vue.js</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">Web 应用程序</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/">Web 应用程序开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/WebSocket/">WebSocket</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Webpack/">Webpack</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Web%E5%BC%80%E5%8F%91/">Web开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Web%E6%A1%86%E6%9E%B6%E5%92%8C%E5%BA%93/">Web框架和库</a>
    
    <a href="https://index.zshipu.com/geek001/tags/WinForms/">WinForms</a>
    
    <a href="https://index.zshipu.com/geek001/tags/WinFrom%E6%8E%A7%E4%BB%B6/">WinFrom控件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Word%E6%96%87%E6%A1%A3/">Word文档</a>
    
    <a href="https://index.zshipu.com/geek001/tags/backend-development/">backend development</a>
    
    <a href="https://index.zshipu.com/geek001/tags/buji-pac4j/">buji-pac4j</a>
    
    <a href="https://index.zshipu.com/geek001/tags/bundler/">bundler</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Cas/">Cas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/cookie/">cookie</a>
    
    <a href="https://index.zshipu.com/geek001/tags/domain-driven-design-pattern/">domain-driven design pattern</a>
    
    <a href="https://index.zshipu.com/geek001/tags/exchange%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/">exchange信息收集</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Filebeat/">Filebeat</a>
    
    <a href="https://index.zshipu.com/geek001/tags/gRPC/">gRPC</a>
    
    <a href="https://index.zshipu.com/geek001/tags/gem-install-redis/">gem install redis</a>
    
    <a href="https://index.zshipu.com/geek001/tags/graphql-go-%E5%BA%93/">graphql-go 库</a>
    
    <a href="https://index.zshipu.com/geek001/tags/java-virtual-machine-architecture/">java virtual machine architecture</a>
    
    <a href="https://index.zshipu.com/geek001/tags/jvm-runtime-data-areas/">jvm runtime data areas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Logstash/">Logstash</a>
    
    <a href="https://index.zshipu.com/geek001/tags/macOS/">macOS</a>
    
    <a href="https://index.zshipu.com/geek001/tags/microservices-architecture/">microservices architecture</a>
    
    <a href="https://index.zshipu.com/geek001/tags/multiline/">multiline</a>
    
    <a href="https://index.zshipu.com/geek001/tags/openssl/">openssl</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Pac4j/">Pac4j</a>
    
    <a href="https://index.zshipu.com/geek001/tags/pac4j-cas/">pac4j-cas</a>
    
    <a href="https://index.zshipu.com/geek001/tags/pom.xml/">pom.xml</a>
    
    <a href="https://index.zshipu.com/geek001/tags/serviceValidate/">serviceValidate</a>
    
    <a href="https://index.zshipu.com/geek001/tags/session/">session</a>
    
    <a href="https://index.zshipu.com/geek001/tags/Shiro/">Shiro</a>
    
    <a href="https://index.zshipu.com/geek001/tags/splitChunks/">splitChunks</a>
    
    <a href="https://index.zshipu.com/geek001/tags/systemctl/">systemctl</a>
    
    <a href="https://index.zshipu.com/geek001/tags/virtual-machine-memory-model/">virtual machine memory model</a>
    
    <a href="https://index.zshipu.com/geek001/tags/webStorage/">webStorage</a>
    
    <a href="https://index.zshipu.com/geek001/tags/wisemodel.cn/">wisemodel.cn</a>
    
    <a href="https://index.zshipu.com/geek001/tags/zlib/">zlib</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%80%E6%96%87%E8%AF%BB%E6%87%82/">一文读懂</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%87%E5%AD%97%E6%80%BB%E7%BB%93/">万字总结</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%9A%E5%8A%A1%E6%9E%B6%E6%9E%84/">业务架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9E%8B/">业务模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%9A%E5%8A%A1%E8%AE%BE%E8%AE%A1/">业务设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%9A%E5%8A%A1%E8%BF%87%E7%A8%8B/">业务过程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%AD%E5%8F%B0/">中台</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%AD%E5%B9%B4%E5%8D%B1%E6%9C%BA/">中年危机</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%B8%AD%E6%96%87%E5%AF%B9%E8%AF%9D%E6%A8%A1%E5%9E%8B/">中文对话模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B4/">事件风暴</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8/">事件驱动</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9E%8B/">事件驱动模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1/">云服务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%A7%E7%94%9F%E6%9D%A1%E4%BB%B6/">产生条件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%AC%E4%B8%9C/">京东</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%AC%E8%A5%BF%E5%95%86%E5%9F%8E/">京西商城</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BA%BA%E6%95%99%E7%89%88/">人教版</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%8E0%E5%88%B01/">从0到1</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%90%86%E5%99%A8%E5%86%B2%E7%AA%81/">代理器冲突</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96/">代码优化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/">代码实现</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E5%AE%9E%E8%B7%B5/">代码实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91/">代码开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/">代码生成器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/">代码示例</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84/">代码结构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8/">企业应用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%81%E4%B8%9A%E6%95%B0%E6%8D%AE/">企业数据</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8/">企业级应用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">企业级应用开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/">优化实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%98%E9%9B%85%E8%AE%BE%E8%AE%A1/">优雅设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BC%9A%E8%AE%AE%E7%AC%94%E8%AE%B0/">会议笔记</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/">位操作</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BD%9C%E7%94%A8/">作用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BD%9C%E7%94%A8%E5%9F%9F/">作用域</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BE%9B%E5%BA%94%E9%93%BE/">供应链</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">依赖注入</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/">依赖管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%81%A5%E5%BA%B7%E7%AE%A1%E7%90%86/">健康管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%83%E7%A9%BA%E9%97%B4/">元空间</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%85%E8%A1%80%E6%A8%A1%E5%9E%8B/">充血模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%89%E6%95%8F%E7%94%B5%E9%98%BB/">光敏电阻</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8/">免费使用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/">入门学习</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">全局异常处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/">全栈开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%A8%E6%A1%88%E8%AE%BE%E8%AE%A1/">全案设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%AD%E8%BE%B9%E5%BD%A2%E6%9E%B6%E6%9E%84/">六边形架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%85%B3%E9%97%AD%E8%A1%8C%E4%B8%BA/">关闭行为</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2/">内存泄露</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA/">内存溢出</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">内存管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/">内存结构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E5%AE%B9%E5%88%9B%E4%BD%9C%E6%88%96%E5%86%85%E5%AE%B9%E8%90%A5%E9%94%80/">内容创作(或&#39;内容营销&#39;)</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%86%85%E7%9C%81%E6%BC%8F%E6%B4%9E/">内省漏洞</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84/">分层架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/">分布式事务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86/">分布式会话管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF%E6%A0%88/">分布式技术栈</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/">分库分表</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%88%9D%E4%B8%AD/">初中</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%89%8D%E7%99%BE%E5%BA%A6%E9%AB%98%E7%AE%A1/">前百度高管</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%89%8D%E7%AB%AF/">前端</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8A%A8%E6%80%81%E9%A1%B5%E9%9D%A2/">动态页面</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8C%BB%E7%96%97%E5%A4%A7%E6%A8%A1%E5%9E%8B/">医疗大模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8D%8F%E5%90%8C%E5%8A%9E%E5%85%AC/">协同办公</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8D%95%E7%82%B9%E7%99%BB%E5%87%BA/">单点登出</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/">单点登录</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8D%95%E7%89%87%E6%9C%BA/">单片机</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8D%AB%E6%8A%A5/">卫报</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/">原子操作</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8E%BB%E5%93%AA%E5%84%BF%E7%BD%91/">去哪儿网</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/">参数校验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8F%8D%E5%B0%84/">反射</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8F%AF%E6%8C%81%E7%BB%AD%E5%8F%91%E5%B1%95/">可持续发展</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%90%88%E5%B9%B6%E5%86%B2%E7%AA%81/">合并冲突</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%90%8C%E6%AD%A5%E4%B8%80%E8%87%B4%E6%80%A7%E6%A0%A1%E9%AA%8C/">同步一致性校验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C/">后台运行</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/">后端开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%90%91%E9%87%8F%E6%A3%80%E7%B4%A2/">向量检索</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%91%BD%E4%BB%A4%E6%8A%80%E5%B7%A7/">命令技巧</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%95%86%E5%93%81%E5%9F%9F/">商品域</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9B%9B%E5%B1%82%E6%9E%B6%E6%9E%84/">四层架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/">团队协作</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9B%A2%E9%98%9F%E7%94%9F%E4%BA%A7%E5%8A%9B/">团队生产力</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9B%BE%E4%B9%A6%E4%BF%A1%E6%81%AF/">图书信息</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9B%BE%E5%83%8F%E4%BC%98%E5%8C%96/">图像优化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD/">基础设施</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A2%9E%E9%87%8F%E7%AB%99%E7%82%B9%E9%87%8D%E6%96%B0%E7%94%9F%E6%88%90/">增量站点重新生成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%8D%E6%9D%82%E6%80%A7%E7%AE%A1%E7%90%86/">复杂性管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%9A%E4%BA%91%E6%94%BB%E5%87%BB%E9%9D%A2%E8%B5%84%E4%BA%A7%E6%A2%B3%E7%90%86/">多云攻击面资产梳理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%9A%E7%95%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E9%9B%86%E6%88%90/">多界上下文集成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%9A%E7%AB%AF%E6%95%B0%E6%8D%AE%E7%BB%9F%E4%B8%80%E8%AE%BF%E9%97%AE/">多端数据统一访问</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%9A%E8%A1%8C%E5%90%88%E5%B9%B6/">多行合并</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%9A%E8%A1%8C%E6%97%A5%E5%BF%97/">多行日志</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/">大型语言模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%A7%8B%E6%99%BAAI/">始智AI</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AD%97%E6%AE%B5%E5%90%8D%E5%BC%82%E5%B8%B8/">字段名异常</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8/">字节跳动</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AD%A6%E4%B9%A0%E5%BA%94%E7%94%A8/">学习应用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AD%A6%E4%B9%A0%E6%9C%BA%E5%88%B6/">学习机制</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%89%E5%85%A8/">安全</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%89%E5%85%A8%E5%BA%93/">安全库</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%89%E5%85%A8%E6%80%A7/">安全性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/">安全框架</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%89%E8%A3%85/">安装</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%8C%E7%BB%93%E7%AF%87/">完结篇</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%88%98/">实战</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%88%98%E8%90%BD%E5%9C%B0/">实战落地</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%88%98%E8%AF%BE%E7%A8%8B/">实战课程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%96%BD%E6%8C%91%E6%88%98/">实施挑战</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%96%BD%E7%AD%96%E7%95%A5/">实施策略</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%96%BD%E9%9A%BE%E7%82%B9/">实施难点</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E6%8E%A8%E9%80%81/">实时数据推送</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97/">实时计算</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%B1%BB/">实用程序类</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E8%B7%B5/">实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E8%B7%B5%E8%90%BD%E5%9C%B0/">实践落地</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%9E%E9%AA%8C/">实验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%9B%86%E6%88%90/">客户端集成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%B6%E5%BA%AD%E5%88%86%E4%BA%AB/">家庭分享</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2/">容器化部署</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%AF%BC%E8%88%AA/">导航</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B0%8F%E4%BC%81%E4%B8%9A%E6%9E%B6%E6%9E%84%E5%B8%88/">小企业架构师</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B0%8F%E8%AF%9A%E4%BF%A1%E9%A9%BF%E7%AB%99/">小诚信驿站</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B0%8F%E8%BD%A6%E5%BE%AA%E8%BF%B9/">小车循迹</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B0%8F%E8%BD%A6%E8%AE%BE%E8%AE%A1/">小车设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">嵌入式开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/">嵌入式系统</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B7%A1%E7%BA%BF%E5%B0%8F%E8%BD%A6/">巡线小车</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B7%A5%E7%A8%8B%E5%88%9B%E5%BB%BA/">工程创建</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/">工程实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B9%82%E7%AD%89%E6%80%A7/">幂等性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/">平衡树</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84/">应用架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6/">应用软件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BB%BA%E6%A8%A1/">建模</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BB%BA%E6%A8%A1%E6%96%B9%E6%B3%95%E8%AE%BA/">建模方法论</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E5%8F%91/">开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E5%8F%91%E6%9D%BF/">开发板</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA/">开发者社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E6%BA%90%E5%A4%A7%E6%A8%A1%E5%9E%8B/">开源大模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA/">开源社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8/">开源项目应用</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">异常处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%82%E5%B8%B8%E6%A3%80%E6%B5%8B/">异常检测</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86/">异步处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BD%A2%E7%8A%B6/">形状</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/">微信公众号</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/">微前端架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8/">微控制器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86/">微服务拆分</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/">微服务架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BF%83%E7%94%B5%E7%9B%91%E6%B5%8B/">心电监测</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E5%BF%83%E7%9F%A5%E4%BA%86/">心知了</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%80%A7%E8%83%BD/">性能</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87/">性能提升</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/">性能测试</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%88%98%E6%9C%AF%E8%AE%BE%E8%AE%A1/">战术设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%88%98%E7%95%A5/">战略</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%88%98%E7%95%A5%E8%AE%BE%E8%AE%A1/">战略设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%89%93%E5%8C%85/">打包</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E/">执行引擎</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86/">批量处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%89%B9%E9%87%8F%E6%89%93%E5%BC%80/">批量打开</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E4%B8%8E%E4%B8%9A%E5%8A%A1/">技术与业务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E5%8D%93%E8%B6%8A/">技术卓越</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E5%AE%9E%E6%96%BD/">技术实施</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0/">技术实现</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/">技术提升</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/">技术方案</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%80%E6%9C%AF%E7%B2%BE%E7%B2%B9/">技术精粹</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%A5%E9%94%99/">报错</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8A%BD%E5%A5%96%E5%B9%B3%E5%8F%B0/">抽奖平台</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8B%86%E5%8C%85/">拆包</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">持续集成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8C%87%E5%8D%97/">指南</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8E%88%E6%9D%83/">授权</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8E%A5%E5%8F%A3/">接口</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/">接口管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8E%A7%E5%88%B6%E5%99%A8/">控制器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%8F%90%E4%BE%9B%E5%99%A8/">提供器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%90%BA%E7%A8%8B/">携程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95/">操作方法</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F/">支付系统</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87/">效率提升</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E5%AD%97%E5%8C%96%E8%BD%AC%E5%9E%8B/">数字化转型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E5%AD%97%E7%9B%B8%E5%86%8C/">数字相册</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/">数据处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/">数据存储</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%B7%A5%E7%A8%8B/">数据工程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/">数据库设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E6%96%87%E5%8C%96/">数据文化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/">数据查询</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E7%89%B9%E5%BE%81/">数据特征</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86/">数据采集</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B0%E6%8D%AE%E9%9C%80%E6%B1%82%E5%8F%98%E5%8C%96/">数据需求变化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%95%B4%E6%B4%81%E6%9E%B6%E6%9E%84/">整洁架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%96%87%E6%A1%A3%E7%AE%A1%E7%90%86/">文档管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%96%B0%E6%97%B6%E4%BB%A3/">新时代</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%96%B0%E7%89%B9%E6%80%A7/">新特性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%96%B0%E9%A1%B9%E7%9B%AE/">新项目</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%97%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%80%E6%9C%AF/">无服务器技术</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86/">日志处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86/">日志收集</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%97%A5%E5%BF%97%E8%84%B1%E6%95%8F/">日志脱敏</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE/">日志配置</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%98%A0%E5%B0%84%E5%81%8F%E7%A7%BB/">映射偏移</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%99%BA%E8%83%BD%E7%A1%AC%E4%BB%B6/">智能硬件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%99%BA%E8%83%BD%E8%AF%8A%E7%96%97/">智能诊疗</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">最佳实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9C%89%E8%B5%9E/">有赞</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93/">服务器端渲染</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84/">架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E5%AE%9E%E8%B7%B5/">架构实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E5%B8%88/">架构师</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E6%80%9D%E6%83%B3/">架构思想</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">架构模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E6%A8%A1%E6%9D%BF/">架构模板</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E8%BD%AC%E5%9E%8B/">架构转型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9E%B6%E6%9E%84%E9%87%8D%E6%9E%84/">架构重构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/">查询优化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A0%B7%E5%BC%8F%E8%A1%A8/">样式表</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/">核心概念</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A8%A1%E5%9E%8B%E4%B8%80%E8%87%B4%E6%80%A7/">模型一致性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D/">模型介绍</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A8%A1%E5%BC%8F/">模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A8%A1%E6%80%81%E6%A1%86/">模态框</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%A8%A1%E6%9D%BF%E7%94%9F%E6%88%90/">模板生成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%AD%BB%E9%94%81/">死锁</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B3%A8%E9%94%80%E8%AF%B7%E6%B1%82/">注销请求</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B4%8B%E8%91%B1%E6%9E%B6%E6%9E%84/">洋葱架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B4%8B%E8%91%B1%E6%A8%A1%E5%9E%8B/">洋葱模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B5%8B%E8%AF%95/">测试</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8A%80%E5%B7%A7/">浏览器技巧</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B6%88%E6%81%AF%E8%BE%B9%E7%95%8C%E6%A0%87%E8%AE%B0/">消息边界标记</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B7%B1%E5%BA%A6%E8%B0%83%E7%A0%94/">深度调研</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E6%BA%AF%E6%BA%90%E5%88%86%E6%9E%90/">溯源分析</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%81%B5%E6%B4%BB%E6%80%A7/">灵活性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%83%AD%E9%97%A8%E6%96%87%E7%AB%A0/">热门文章</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%89%B9%E5%AE%9A%E8%BD%AF%E4%BB%B6/">特定软件</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%8E%AF%E4%BF%9D/">环保</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%8E%AF%E5%A2%83%E5%BD%B1%E5%93%8D/">环境影响</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%8E%B0%E4%BB%A3Web%E5%BC%80%E5%8F%91/">现代Web开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%8E%B0%E4%BB%A3%E5%8C%96/">现代化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%9F%E4%BA%A7%E9%A1%B9%E7%9B%AE/">生产项目</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%9F%E6%88%90%E5%BC%8FAI/">生成式AI</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/">用户体验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/">用户管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2%E9%AA%8C%E8%AF%81%E6%8E%88%E6%9D%83/">用户角色验证授权</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%B5%E5%95%86/">电商</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%B5%E5%95%86%E6%94%AF%E4%BB%98/">电商支付</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8/">电机驱动</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%99%BB%E5%87%BA%E5%A4%84%E7%90%86/">登出处理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%99%BB%E5%BD%95%E4%BD%93%E9%AA%8C/">登录体验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81/">登录认证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81/">登录验证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9C%9F%E9%A6%99%E4%BD%93%E9%AA%8C/">真香体验</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E4%B9%8E/">知乎</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/">知识体系</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E5%88%86%E4%BA%AB/">知识分享</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/">知识图谱</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE/">知识地图</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E6%99%AE%E5%8F%8A/">知识普及</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/">知识管理</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%9F%A5%E8%AF%86%E9%93%BA/">知识铺</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81/">示例代码</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%A5%9E%E5%99%A8/">神器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%A7%8D%E5%AD%90%E8%BD%AE%E8%9E%8D%E8%B5%84/">种子轮融资</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AC%94%E8%AE%B0%E7%B3%BB%E7%BB%9F/">笔记系统</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AD%96%E7%95%A5/">策略</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/">策略模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AE%97%E6%B3%95/">算法</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AE%97%E6%B3%95%E6%95%88%E7%8E%87/">算法效率</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%AE%97%E6%B3%95%E6%9E%B6%E6%9E%84%E5%B8%88/">算法架构师</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/">类加载器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B1%BB%E5%9E%8B/">类型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/">系统开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/">系统架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B3%BB%E7%BB%9F%E9%87%8D%E6%9E%84/">系统重构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%B4%A2%E5%BC%95%E6%98%A0%E5%B0%84/">索引映射</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BA%A2%E5%A4%96%E5%B7%A1%E7%BA%BF/">红外巡线</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BA%A2%E5%A4%96%E5%BE%AA%E8%BF%B9/">红外循迹</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8/">线程安全</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E6%A0%BC%E5%BC%8F/">统一返回格式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BB%BF%E8%89%B2%E7%BC%96%E7%A0%81/">绿色编码</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BC%93%E5%86%B2%E6%B1%A0/">缓冲池</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/">网站设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88/">网络工程师</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BD%91%E9%A1%B5%E6%A0%B7%E5%BC%8F/">网页样式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BD%91%E9%A1%B5%E9%93%BE%E6%8E%A5/">网页链接</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E7%BE%8E%E5%9B%A2/">美团</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA/">聊天机器人</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%8C%E4%B8%9A%E5%8D%87%E7%BA%A7/">职业升级</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%8C%E4%B8%9A%E8%BD%AC%E5%9E%8B/">职业转型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%9A%E5%90%88/">聚合</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%9A%E5%90%88%E6%8E%A5%E5%8F%A3/">聚合接口</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%9A%E5%90%88%E6%A0%B9/">聚合根</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%81%9A%E5%90%88%E8%BF%87%E5%A4%A7%E7%BB%BC%E5%90%88%E7%97%87/">聚合过大综合症</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/">腾讯云</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA/">腾讯云开发者社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/">自动装配</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%87%B3%E9%A1%B6%E7%BD%91/">至顶网</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%88%AA%E7%8F%AD%E6%90%9C%E7%B4%A2/">航班搜索</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%8B%B1%E8%AF%AD%E6%95%99%E8%82%B2/">英语教育</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%A5%E9%94%80%E7%AD%96%E7%95%A5/">营销策略</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%BD%E5%9C%B0%E5%AE%9E%E6%96%BD/">落地实施</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">落地实践</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%BD%E5%9C%B0%E6%80%9D%E8%80%83/">落地思考</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%BD%E5%9C%B0%E6%8C%91%E6%88%98/">落地挑战</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%90%BD%E5%9C%B0%E6%96%B9%E6%A1%88/">落地方案</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%93%9D%E7%89%99%E9%81%A5%E6%8E%A7/">蓝牙遥控</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/">虚拟机</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">解决方案</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%A7%A3%E6%83%91/">解惑</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%A7%A3%E6%9E%90/">解析</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%A7%A3%E9%87%8A/">解释</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F/">订单系统</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%A4%E8%AF%81/">认证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE/">训练数据</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%B0%E5%BF%86%E4%BF%9D%E5%AD%98/">记忆保存</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计原则</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AF%AF%E5%8C%BA/">误区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%AF%BE%E7%A8%8B/">课程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">负载均衡</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B4%AB%E8%A1%80%E6%A8%A1%E5%9E%8B/">贫血模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B7%AF%E7%94%B1/">路由</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/">路由器</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B7%AF%E7%94%B1%E7%BA%A6%E5%AE%9A/">路由约定</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%B7%B3%E8%A1%A8/">跳表</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81/">身份认证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/">身份验证</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E6%8E%88%E6%9D%83/">身份验证授权</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E4%B8%8E%E6%9C%8D%E5%8A%A1/">软件与服务</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E5%A4%8D%E6%9D%82%E5%BA%A6/">软件复杂度</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/">软件工程</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/">软件架构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E6%A0%B8%E5%BF%83%E5%A4%8D%E6%9D%82%E6%80%A7/">软件核心复杂性</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1/">软件设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BF%81%E7%A7%BB%E5%8E%9F%E5%9B%A0/">迁移原因</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E8%BF%90%E8%A1%8C%E6%97%B6/">运行时</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%81%BF%E5%85%8D%E9%94%81%E8%A1%A8/">避免锁表</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%85%8D%E7%BD%AE/">配置</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%85%92%E5%BA%97%E6%95%B0%E6%8D%AE%E9%87%8D%E6%9E%84/">酒店数据重构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%87%8D%E5%A4%8D%E4%B8%8B%E5%8D%95/">重复下单</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%87%8D%E5%AE%9A%E5%90%91/">重定向</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%87%91%E8%9E%8D%E7%A7%91%E6%8A%80/">金融科技</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%94%81%E8%A1%A8/">锁表</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%95%BF%E5%BA%A6/">长度</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%97%AE%E7%AD%94%E7%A4%BE%E5%8C%BA/">问答社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%98%BB%E5%A1%9E-IO/">阻塞 IO</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%98%BF%E9%87%8C%E4%BA%91/">阿里云</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%98%BF%E9%87%8C%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA/">阿里云开发者社区</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4/">阿里巴巴</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%99%80%E8%9E%BA%E4%BB%AA%E6%8E%A7%E5%88%B6/">陀螺仪控制</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9B%86%E6%88%90/">集成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9B%86%E6%88%90%E9%85%8D%E7%BD%AE/">集成配置</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9B%B6%E6%8B%B7%E8%B4%9D/">零拷贝</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/">需求分析</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%99%E6%80%81%E5%85%8D%E6%9D%80/">静态免杀</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E7%94%9F%E6%88%90/">静态站点生成</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9%E7%94%9F%E6%88%90SSG/">静态站点生成(SSG)</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%9E%E9%98%BB%E5%A1%9E-IO/">非阻塞 IO</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%A2%E8%AF%95%E6%89%8B%E5%86%8C/">面试手册</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA/">页面导航</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A1%B5%E9%9D%A2%E9%93%BE%E6%8E%A5/">页面链接</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/">项目开发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/">项目结构</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%84%E6%B8%B2%E6%9F%93/">预渲染</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E5%BB%BA%E6%A8%A1/">领域建模</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B/">领域模型</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E8%AE%BE%E8%AE%A1/">领域模型设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8/">领域驱动</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">领域驱动设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1-DDD/">领域驱动设计 (DDD)</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A4%90%E5%8E%85/">餐厅</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%A4%90%E5%8E%85%E8%AE%BE%E8%AE%A1/">餐厅设计</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/">高并发</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%AB%98%E6%80%A7%E8%83%BD/">高性能</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%AB%98%E6%B8%85%E6%B8%B2%E6%9F%93/">高清渲染</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%AB%98%E7%BA%A7%E5%8D%8F%E8%AE%AE%E6%94%AF%E6%8C%81/">高级协议支持</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%AB%98%E8%A1%80%E5%8E%8B/">高血压</a>
    
    <a href="https://index.zshipu.com/geek001/tags/%E9%BB%91%E9%AD%94%E6%B3%95/">黑魔法</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.zshipu.com//" title="知识铺的博客">知识铺的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://index.zshipu.com/geek001/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>