app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: æ¯æ—¥æœ€æ–°ITèµ„è®¯æ—©æ’­æŠ¥
  use_icon_as_answer_icon: false
kind: app
version: 0.1.3
workflow:
  conversation_variables:
  - description: ''
    id: c076ada7-c163-4ea8-88b5-4ece637a58f5
    name: tags
    value:
    - åç«¯
    - å‰ç«¯
    - ç§»åŠ¨å¼€å‘
    - ç¼–ç¨‹è¯­è¨€
    - Java
    - Python
    - äººå·¥æ™ºèƒ½
    - AIGC
    - å¤§æ•°æ®
    - æ•°æ®åº“
    - æ•°æ®ç»“æ„ä¸ç®—æ³•
    - å‰æ²¿æŠ€æœ¯
    - å¼€æº
    - æŠ€æœ¯èµ„è®¯
    - vue.js
    - RAG
    - Spring
    - React.js
    - ReACT AIæ¡†æ¶
    - DDD é¢†åŸŸé©±åŠ¨è®¾è®¡
    - å¤§æ¨¡å‹åº”ç”¨
    value_type: array[string]
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: true
        iteration_id: '1727592628037'
        sourceType: http-request
        targetType: code
      id: 1727592643422-source-1727592767277-target
      source: '1727592643422'
      sourceHandle: source
      target: '1727592767277'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1727592628037'
        sourceType: llm
        targetType: answer
      id: 1727592813821-source-1727592866389-target
      source: '1727592813821'
      sourceHandle: source
      target: '1727592866389'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1727592628037'
        sourceType: answer
        targetType: tool
      id: 1727592866389-source-1727592886021-target
      source: '1727592866389'
      sourceHandle: source
      target: '1727592886021'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1727592628037'
        sourceType: code
        targetType: llm
      id: 1727592767277-source-1727592813821-target
      source: '1727592767277'
      sourceHandle: source
      target: '1727592813821'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1727592628037'
        sourceType: iteration-start
        targetType: http-request
      id: 1727592628037start-source-1727592643422-target
      source: 1727592628037start
      sourceHandle: source
      target: '1727592643422'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: start
        targetType: code
      id: 1727577224333-source-1727594369268-target
      source: '1727577224333'
      sourceHandle: source
      target: '1727594369268'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: iteration
      id: 1727594369268-source-1727592628037-target
      source: '1727594369268'
      sourceHandle: source
      target: '1727592628037'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables: []
      height: 54
      id: '1727577224333'
      position:
        x: -212.85714285714286
        y: 404
      positionAbsolute:
        x: -212.85714285714286
        y: 404
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        height: 408
        iterator_selector:
        - '1727594369268'
        - tagarr
        output_selector:
        - '1727592813821'
        - text
        output_type: array[string]
        selected: false
        start_node_id: 1727592628037start
        title: è¿­ä»£
        type: iteration
        width: 1904
      height: 408
      id: '1727592628037'
      position:
        x: 316.3755957639537
        y: 532.1807684750811
      positionAbsolute:
        x: 316.3755957639537
        y: 532.1807684750811
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 1904
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1727592628037start
      parentId: '1727592628037'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 340.3755957639537
        y: 600.1807684750811
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: ''
          type: none
        desc: ''
        headers: User-Agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
          (KHTML, like Gecko) Chrome/100.0.1000.0 Safari/537.36
        isInIteration: true
        iteration_id: '1727592628037'
        method: get
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚
        type: http-request
        url: https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&rsv_idx=2&tn=68018901_16_pg&rsv_spt=1&rsv_pq=9b0979fd00021cda&rsv_t=e5e2JLqnA6UXQOnqXSaeqP0qjqrfMRLjdt9gTe01bW8kkPZ3Hvg9C3bIQKZYZcEmcsEQf7M&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_btype=t&inputT=7&gpc=stf%3D1727490798%2C1727577197%7Cstftype%3D1&tfflag=1&wd={{#1727592628037.item#}}&oq={{#1727592628037.item#}}
        variables: []
      height: 324
      id: '1727592643422'
      parentId: '1727592628037'
      position:
        x: 252.28571428571422
        y: 65
      positionAbsolute:
        x: 568.6613100496679
        y: 597.1807684750811
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "from html.parser import HTMLParser\nimport re\nimport requests\nimport\
          \ json\n\nclass MyHTMLParser(HTMLParser):\n    def __init__(self):\n   \
          \     super().__init__()\n        self.result = []\n        self.capture\
          \ = False\n        self.current_data = ''\n        self.current_href = ''\n\
          \n    def handle_starttag(self, tag, attrs):\n        self.current_data\
          \ = ''  # é‡ç½®å½“å‰æ•°æ®\n        if tag == 'h3':\n            classes = [b for\
          \ a, b in attrs if a == 'class']\n            if classes:\n            \
          \    class_list = classes[0].split()\n                # æ£€æŸ¥ç±»å\n         \
          \       if \"c-title\" in class_list and \"t\" in class_list:\n        \
          \            self.capture = True\n        elif self.capture and tag == 'a':\n\
          \            # æ‰¾åˆ°é“¾æ¥\n            for attr, value in attrs:\n           \
          \     if attr == 'href':\n                    self.current_href = value\n\
          \n    def handle_endtag(self, tag):\n        if tag == 'h3' and self.capture:\n\
          \            # åœ¨ç»“æŸæ ‡ç­¾æ—¶å°†æ•°æ®æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­\n            self.result.append({\n   \
          \             \"title\": self.current_data.strip(),\n                \"\
          href\": self.current_href.strip()\n            })\n            self.capture\
          \ = False\n            self.current_href = ''  # é‡ç½® href\n\n    def handle_data(self,\
          \ data):\n        if self.capture:\n            self.current_data += data.strip()\n\
          \n    def get_result(self):\n        return self.result\n\ndef extract_h3_content(html_content):\n\
          \    parser = MyHTMLParser()\n    parser.feed(html_content)\n    return\
          \ parser.get_result()\n\ndef clean_html(html_content: str) -> str:\n   \
          \ # ç§»é™¤è½¬ä¹‰å­—ç¬¦\n    html_content = html_content.replace('&quot;', '\"')\n  \
          \  # ç§»é™¤å¤šä½™ç©ºç™½\n    html_content = re.sub(r'\\s+', ' ', html_content)\n   \
          \ return html_content.strip()\n\ndef get_real_address(baidu_link):\n   \
          \ # å‘é€HEADè¯·æ±‚\n    response = requests.head(baidu_link, allow_redirects=False)\n\
          \    \n    # å¦‚æœå“åº”çŠ¶æ€ç æ˜¯302ï¼Œè¡¨ç¤ºæœ‰è·³è½¬\n    if response.status_code == 302:\n  \
          \      # è·å–Locationå¤´éƒ¨ï¼Œå³çœŸå®åœ°å€\n        real_address = response.headers.get('Location')\n\
          \        return real_address\n    else:\n        return baidu_link  # è¿”å›åŸå§‹é“¾æ¥ï¼Œè¡¨ç¤ºæ²¡æœ‰è·³è½¬\n\
          \ndef main(arg1: str) -> list:\n    htmlcontent = clean_html(arg1)  # æ¸…æ´—\
          \ HTML å†…å®¹\n    results = extract_h3_content(htmlcontent)  # æå– h3 å†…å®¹\n\n\
          \    # è½¬æ¢æ¯ä¸ªé“¾æ¥ä¸ºçœŸå®åœ°å€\n    for result in results:\n        result['href'] =\
          \ get_real_address(result['href'])\n\n    return {\n        \"result\":\
          \ json.dumps(results),\n    }\n"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1727592628037'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables:
        - value_selector:
          - '1727592643422'
          - body
          variable: arg1
      height: 54
      id: '1727592767277'
      parentId: '1727592628037'
      position:
        x: 716.5655873592885
        y: 65
      positionAbsolute:
        x: 1032.9411831232424
        y: 597.1807684750811
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        context:
          enabled: true
          variable_selector:
          - '1727592767277'
          - result
        desc: ''
        isInIteration: true
        iteration_id: '1727592628037'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen2.5:1.5b
          provider: ollama
        prompt_template:
        - id: 0d514470-fc73-4ab0-98c3-d0f9dc0f8cac
          role: system
          text: "#è§’è‰²  \nä½ æ˜¯ä¸€ä¸ª{{#sys.query#}}æ–°é—»åŠ©æ‰‹  \n  \n#ç›®æ ‡  \nå¸®æˆ‘æœç´¢{{#sys.query#}}æ–°é—»ï¼Œä¸»é¢˜è¯·è¯¢é—®æˆ‘\
            \  \n  \n#è¦æ±‚  \n1.è¯·ç”¨ä¸­æ–‡å¸®æˆ‘æ€»ç»“  \n2.ç»™æˆ‘5ç¯‡æ–°é—»  \n  \n#å·¥ä½œæµ  \n1. å…ˆé€šè¿‡åˆ†ææä¾›çš„JSON\n\
            2. è·å–JSONä¸­çš„æ ‡é¢˜å’Œé“¾æ¥\n  \n#è¾“å‡ºæ ¼å¼  \næ¯æ—¥ITæ—©æ’­æŠ¥\næ ‡é¢˜ï¼š   \né“¾æ¥ï¼š  \n"
        - edition_type: basic
          id: 2c7d844c-ff5f-4c7e-b0db-f33ff3732ab0
          role: user
          text: '{{#context#}}'
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector: []
          enabled: false
      height: 98
      id: '1727592813821'
      parentId: '1727592628037'
      position:
        x: 1038.297396709994
        y: 65
      positionAbsolute:
        x: 1354.6729924739477
        y: 597.1807684750811
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        answer: '{{#1727592813821.text#}}'
        desc: ''
        isInIteration: true
        iteration_id: '1727592628037'
        selected: false
        title: ç›´æ¥å›å¤
        type: answer
        variables: []
      height: 103
      id: '1727592866389'
      parentId: '1727592628037'
      position:
        x: 1340
        y: 66.68049208922719
      positionAbsolute:
        x: 1656.3755957639537
        y: 598.8612605643083
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1727592628037'
        provider_id: feishu
        provider_name: feishu
        provider_type: builtin
        selected: false
        title: å‘é€ç¾¤æ¶ˆæ¯
        tool_configurations:
          hook_key: 3b993a97-e791-4375-9861-8ff45dcbc49d
        tool_label: å‘é€ç¾¤æ¶ˆæ¯
        tool_name: feishu_group_bot
        tool_parameters:
          content:
            type: mixed
            value: '{{#1727592813821.text#}}'
        type: tool
      height: 90
      id: '1727592886021'
      parentId: '1727592628037'
      position:
        x: 1644
        y: 66.68049208922719
      positionAbsolute:
        x: 1960.3755957639537
        y: 598.8612605643083
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import random\n# å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥éšæœºé€‰æ‹©5ä¸ªå…ƒç´ \ndef get_random_elements(big_array,\
          \ num_elements):\n    # ç¡®ä¿æ•°ç»„è¶³å¤Ÿå¤§ï¼Œå¯ä»¥æŠ½å–æŒ‡å®šæ•°é‡çš„å…ƒç´ \n    if len(big_array) < num_elements:\n\
          \        raise ValueError(\"Array is too small to extract the required number\
          \ of elements\")\n\n    # ä½¿ç”¨random.sampleéšæœºé€‰æ‹©ä¸é‡å¤çš„å…ƒç´ \n    random_elements\
          \ = random.sample(big_array, num_elements)\n\n    return random_elements\n\
          \ndef main(arg1) -> dict:\n    return {\n        \"tagarr\": get_random_elements(arg1,\
          \ 3),\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          tagarr:
            children: null
            type: array[string]
        selected: false
        title: ä»£ç æ‰§è¡Œ 2
        type: code
        variables:
        - value_selector:
          - conversation
          - tags
          variable: arg1
      height: 54
      id: '1727594369268'
      position:
        x: 334
        y: 404
      positionAbsolute:
        x: 334
        y: 404
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -84.5187424159451
      y: -153.79088995187874
      zoom: 0.7000000000000004
