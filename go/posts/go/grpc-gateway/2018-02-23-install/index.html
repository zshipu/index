<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="baidu-site-verification" content="codeva-odZno92jxn" />
    <meta name="360-site-verification" content="b46a7087f21ff6cf8dcee8ee59ee9a61" />
    <meta name="sogou_site_verification" content="F2mmMQ4NdU" />

    <title>ã€Œè¿è½½ä¸€ã€gRPCä»‹ç»ä¸ç¯å¢ƒå®‰è£… | çŸ¥è¯†é“ºçš„åšå®¢</title>
    <meta property="og:title" content="ã€Œè¿è½½ä¸€ã€gRPCä»‹ç»ä¸ç¯å¢ƒå®‰è£… - çŸ¥è¯†é“ºçš„åšå®¢">
    <meta property="og:type" content="article">
    
    <meta property="article:published_time" content='2018-02-23T12:00:00&#43;08:00'>
    
    
    <meta property="article:modified_time" content='2018-02-23T12:00:00&#43;08:00'>
    
    <meta name="Keywords" content="golang,goè¯­è¨€,goè¯­è¨€ç¬”è®°,çŸ¥è¯†é“º,java,android,åšå®¢,é¡¹ç›®ç®¡ç†,python,è½¯ä»¶æ¶æ„,å…¬ä¼—å·,å°ç¨‹åº">
    <meta name="description" content="ã€Œè¿è½½ä¸€ã€gRPCä»‹ç»ä¸ç¯å¢ƒå®‰è£…">
    <meta name="author" content="çŸ¥è¯†é“º">
    
    <meta property="og:url" content="https://index.zshipu.com/go/posts/go/grpc-gateway/2018-02-23-install/">
    <link rel="shortcut icon" href='/go/favicon.ico' type="image/x-icon">

    <link rel="stylesheet" href='/go/css/normalize.css'>
    <link rel="stylesheet" href='/go/css/style.css'>

    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2874221941555456" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    

    
    
    
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WLWJSST');</script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BY5XJ2PJ93"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-BY5XJ2PJ93');
    </script>
    

</head>

<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WLWJSST"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://index.zshipu.com/go/">
                        çŸ¥è¯†é“ºçš„åšå®¢
                    </a>
                
                <p class="description">ä¸“æ³¨äºAndroidã€Javaã€Goè¯­è¨€(golang)ã€ç§»åŠ¨äº’è”ç½‘ã€é¡¹ç›®ç®¡ç†ã€è½¯ä»¶æ¶æ„</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://index.zshipu.com/go/">é¦–é¡µ</a>
                    
                    <a  href="https://index.zshipu.com" title="æ€»ç«™">æ€»ç«™</a>
                    
                    <a  href="https://index.zshipu.com/go/archives/" title="å½’æ¡£">å½’æ¡£</a>
                    
                    <a  href="https://index.zshipu.com/go/about/" title="å…³äº">å…³äº</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#å‡†å¤‡ç¯èŠ‚">å‡†å¤‡ç¯èŠ‚</a></li>
    <li><a href="#grpc">Grpc</a>
      <ul>
        <li><a href="#æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</a></li>
        <li><a href="#å®‰è£…">å®‰è£…</a></li>
      </ul>
    </li>
    <li><a href="#protoc-plugin">Protoc Plugin</a>
      <ul>
        <li><a href="#æ˜¯ä»€ä¹ˆ-1">æ˜¯ä»€ä¹ˆ</a></li>
        <li><a href="#å®‰è£…-1">å®‰è£…</a></li>
      </ul>
    </li>
    <li><a href="#protocol-buffers-v3">Protocol Buffers v3</a>
      <ul>
        <li><a href="#æ˜¯ä»€ä¹ˆ-2">æ˜¯ä»€ä¹ˆ</a></li>
        <li><a href="#å®‰è£…-2">å®‰è£…</a></li>
        <li><a href="#protocä½¿ç”¨">protocä½¿ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#grpc-gateway">Grpc-gateway</a>
      <ul>
        <li><a href="#æ˜¯ä»€ä¹ˆ-3">æ˜¯ä»€ä¹ˆ</a></li>
        <li><a href="#å®‰è£…-3">å®‰è£…</a></li>
      </ul>
    </li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a>
      <ul>
        <li><a href="#ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">ã€Œè¿è½½ä¸€ã€gRPCä»‹ç»ä¸ç¯å¢ƒå®‰è£…</h1>
        </header>
        <date class="post-meta meta-date">
            2018å¹´2æœˆ23æ—¥
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    é˜…è¯»</span></span>
        </div>
        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">æ–‡ç« ç›®å½•</div>
            </div>
        </div>
        
        <div class="post-content">
            <p>å‡å®šæˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®éœ€æ±‚ï¼Œå¸Œæœ›ç”¨<code>Rpc</code>ä½œä¸ºå†…éƒ¨<code>API</code>çš„é€šè®¯ï¼ŒåŒæ—¶ä¹Ÿæƒ³å¯¹å¤–æä¾›<code>Restful Api</code>ï¼Œå†™ä¸¤å¥—åˆå¤ªç¹çä¸ç¬¦åˆ</p>
<p>äºæ˜¯æˆ‘ä»¬æƒ³åˆ°äº†<code>Grpc</code>ä»¥åŠ<code>Grpc Gateway</code>ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„</p>
<p>
        <img class="mx-auto" alt="image" src="https://camo.githubusercontent.com/e75a8b46b078a3c1df0ed9966a16c24add9ccb83/68747470733a2f2f646f63732e676f6f676c652e636f6d2f64726177696e67732f642f3132687034435071724e5046686174744c5f63496f4a707446766c41716d35774c513067677149356d6b43672f7075623f773d37343926683d333730" />   
    </p>
<h2 id="å‡†å¤‡ç¯èŠ‚">å‡†å¤‡ç¯èŠ‚</h2>
<p>åœ¨æ­£å¼å¼€å§‹æˆ‘ä»¬çš„<code>Grpc</code>+<code>Grpc Gateway</code>å®è·µå‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé…ç½®å¥½æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒ</p>
<ul>
<li>Grpc</li>
<li>Protoc Plugin</li>
<li>Protocol Buffers</li>
<li>Grpc-gateway</li>
</ul>
<h2 id="grpc">Grpc</h2>
<h3 id="æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</h3>
<p>Googleå¯¹<code>Grpc</code>çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>A high performance, open-source universal RPC framework</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯<code>Grpc</code>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºçš„é€šç”¨RPCæ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>å¼ºå¤§çš„<code>IDL</code>ï¼Œä½¿ç”¨<code>Protocol Buffers</code>ä½œä¸ºæ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œæ”¯æŒ<code>v2</code>ã€<code>v3</code>ï¼ˆæ¨è<code>v3</code>ï¼‰</li>
<li>è·¨è¯­è¨€ã€è·¨å¹³å°ï¼Œä¹Ÿå°±æ˜¯<code>Grpc</code>æ”¯æŒå¤šç§å¹³å°å’Œè¯­è¨€</li>
<li><strong>æ”¯æŒHTTP2</strong>ï¼ŒåŒå‘ä¼ è¾“ã€å¤šè·¯å¤ç”¨ã€è®¤è¯ç­‰</li>
</ul>
<h3 id="å®‰è£…">å®‰è£…</h3>
<p>1ã€å®˜æ–¹æ¨èï¼ˆéœ€ç§‘å­¦ä¸Šç½‘ï¼‰</p>
<pre tabindex="0"><code>go get -u google.golang.org/grpc
</code></pre><p>2ã€é€šè¿‡<code>github.com</code></p>
<p>è¿›å…¥åˆ°ç¬¬ä¸€ä¸ª$GOPATHç›®å½•ï¼ˆå› ä¸º<code>go get</code> ä¼šé»˜è®¤å®‰è£…åœ¨ç¬¬ä¸€ä¸ªä¸‹ï¼‰ä¸‹ï¼Œæ–°å»º<code>google.golang.org</code>ç›®å½•ï¼Œæ‹‰å–<code>golang</code>åœ¨<code>github</code>ä¸Šçš„é•œåƒåº“ï¼š</p>
<pre tabindex="0"><code>cd /usr/local/go/path/src   

mkdir google.golang.org

cd google.golang.org/

git clone https://github.com/grpc/grpc-go

mv grpc-go/ grpc/
</code></pre><p>ç›®å½•ç»“æ„ï¼š</p>
<pre tabindex="0"><code>google.golang.org/
â””â”€â”€ grpc
    ...
</code></pre><p>è€Œåœ¨<code>grpc</code>ä¸‹æœ‰è®¸å¤šå¸¸ç”¨çš„åŒ…ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://gowalker.org/google.golang.org/grpc/metadata">metadata</a>ï¼šå®šä¹‰äº†<code>grpc</code>æ‰€æ”¯æŒçš„å…ƒæ•°æ®ç»“æ„ï¼ŒåŒ…ä¸­æ–¹æ³•å¯ä»¥å¯¹<code>MD</code>è¿›è¡Œè·å–å’Œå¤„ç†</li>
<li><a href="https://gowalker.org/google.golang.org/grpc/credentials">credentials</a>ï¼šå®ç°äº†<code>grpc</code>æ‰€æ”¯æŒçš„å„ç§è®¤è¯å‡­æ®ï¼Œå°è£…äº†å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯è¿›è¡Œèº«ä»½éªŒè¯æ‰€éœ€è¦çš„æ‰€æœ‰çŠ¶æ€ï¼Œå¹¶åšå‡ºå„ç§æ–­è¨€</li>
<li><a href="https://gowalker.org/google.golang.org/grpc/codes">codes</a>ï¼šå®šä¹‰äº†<code>grpc</code>ä½¿ç”¨çš„æ ‡å‡†é”™è¯¯ç ï¼Œå¯é€šç”¨</li>
</ul>
<h2 id="protoc-plugin">Protoc Plugin</h2>
<h3 id="æ˜¯ä»€ä¹ˆ-1">æ˜¯ä»€ä¹ˆ</h3>
<p>ç¼–è¯‘å™¨æ’ä»¶</p>
<h3 id="å®‰è£…-1">å®‰è£…</h3>
<pre tabindex="0"><code>go get -u github.com/golang/protobuf/protoc-gen-go
</code></pre><p>å°†<code>Protoc Plugin</code>çš„å¯æ‰§è¡Œæ–‡ä»¶ä»$GOPATHä¸­ç§»åŠ¨åˆ°$GOBINä¸‹</p>
<pre tabindex="0"><code>mv /usr/local/go/path/bin/protoc-gen-go /usr/local/go/bin/
</code></pre><h2 id="protocol-buffers-v3">Protocol Buffers v3</h2>
<h3 id="æ˜¯ä»€ä¹ˆ-2">æ˜¯ä»€ä¹ˆ</h3>
<blockquote>
<p>Protocol buffers are a flexible, efficient, automated mechanism for serializing structured data â€“ think XML, but smaller, faster, and simpler. You define how you want your data to be structured once, then you can use special generated source code to easily write and read your structured data to and from a variety of data streams and using a variety of languages. You can even update your data structure without breaking deployed programs that are compiled against the &ldquo;old&rdquo; format.</p>
</blockquote>
<p><code>Protocol Buffers</code>æ˜¯<code>Google</code>æ¨å‡ºçš„ä¸€ç§æ•°æ®æè¿°è¯­è¨€ï¼Œæ”¯æŒå¤šè¯­è¨€ã€å¤šå¹³å°ï¼Œå®ƒæ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„æ ¼å¼ï¼Œæ€»å¾—æ¥è¯´å°±æ˜¯æ›´å°ã€æ›´å¿«ã€æ›´ç®€å•ã€æ›´çµæ´»ï¼Œç›®å‰åˆ†åˆ«æœ‰<code>v2</code>ã€<code>v3</code>çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨<code>v3</code></p>
<ul>
<li><a href="https://developers.google.com/protocol-buffers/docs/proto">proto2 æ–‡æ¡£åœ°å€</a></li>
<li><a href="https://developers.google.com/protocol-buffers/docs/proto3">proto3 æ–‡æ¡£åœ°å€</a></li>
</ul>
<p>å»ºè®®å¯ä»¥é˜…è¯»ä¸‹å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œæœ¬ç³»åˆ—ä¼šåœ¨ä½¿ç”¨æ—¶ç®€å•ä»‹ç»æ‰€æ¶‰åŠçš„å†…å®¹</p>
<h3 id="å®‰è£…-2">å®‰è£…</h3>
<pre tabindex="0"><code>wget https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.zip
unzip protobuf-all-3.5.1.zip
cd protobuf-3.5.1/
./configure
make
make install
</code></pre><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre tabindex="0"><code>protoc --version
</code></pre><p>å¦‚æœå‡ºç°æŠ¥é”™</p>
<pre tabindex="0"><code>protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file: No such file or directory
</code></pre><p>åˆ™æ‰§è¡Œ<code>ldconfig</code>åï¼Œå†æ¬¡è¿è¡Œå³å¯æˆåŠŸ</p>
<h4 id="ä¸ºä»€ä¹ˆè¦æ‰§è¡Œldconfig">ä¸ºä»€ä¹ˆè¦æ‰§è¡Œ<code>ldconfig</code></h4>
<p>æˆ‘ä»¬é€šè¿‡æ§åˆ¶å°è¾“å‡ºçš„ä¿¡æ¯å¯ä»¥çŸ¥é“ï¼Œ<code>Protocol Buffers Libraries</code>çš„é»˜è®¤å®‰è£…è·¯å¾„åœ¨<code>/usr/local/lib</code></p>
<pre tabindex="0"><code>Libraries have been installed in:
   /usr/local/lib

If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the `-LLIBDIR&#39;
flag during linking and do at least one of the following:
   - add LIBDIR to the `LD_LIBRARY_PATH&#39; environment variable
     during execution
   - add LIBDIR to the `LD_RUN_PATH&#39; environment variable
     during linking
   - use the `-Wl,-rpath -Wl,LIBDIR&#39; linker flag
   - have your system administrator add LIBDIR to `/etc/ld.so.conf&#39;

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
</code></pre><p>è€Œæˆ‘ä»¬å®‰è£…äº†ä¸€ä¸ªæ–°çš„åŠ¨æ€é“¾æ¥åº“ï¼Œ<code>ldconfig</code>ä¸€èˆ¬åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è¿è¡Œï¼Œæ‰€ä»¥ç°åœ¨ä¼šæ‰¾ä¸åˆ°è¿™ä¸ª<code>lib</code>ï¼Œå› æ­¤æˆ‘ä»¬è¦æ‰‹åŠ¨æ‰§è¡Œ<code>ldconfig</code>ï¼Œ<strong>è®©åŠ¨æ€é“¾æ¥åº“ä¸ºç³»ç»Ÿæ‰€å…±äº«ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ç®¡ç†å‘½ä»¤</strong>ï¼Œè¿™å°±æ˜¯<code>ldconfig</code>å‘½ä»¤çš„ä½œç”¨</p>
<h3 id="protocä½¿ç”¨">protocä½¿ç”¨</h3>
<p>æˆ‘ä»¬æŒ‰ç…§æƒ¯ä¾‹æ‰§è¡Œ<code>protoc --help</code>ï¼ˆæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼‰ï¼Œæˆ‘ä»¬æŠ½å‡ºå‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤è¿›è¡Œè®²è§£</p>
<p>1ã€<code>-IPATH, --proto_path=PATH</code>ï¼šæŒ‡å®š<code>import</code>æœç´¢çš„ç›®å½•ï¼Œå¯æŒ‡å®šå¤šä¸ªï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤å½“å‰å·¥ä½œç›®å½•</p>
<p>2ã€<code>--go_out</code>ï¼šç”Ÿæˆ<code>golang</code>æºæ–‡ä»¶</p>
<h4 id="å‚æ•°">å‚æ•°</h4>
<p>è‹¥è¦å°†é¢å¤–çš„å‚æ•°ä¼ é€’ç»™æ’ä»¶ï¼Œå¯ä½¿ç”¨ä»è¾“å‡ºç›®å½•ä¸­åˆ†ç¦»å‡ºæ¥çš„é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨:</p>
<pre tabindex="0"><code>protoc --go_out=plugins=grpc,import_path=mypackage:. *.proto
</code></pre><ul>
<li><code>import_prefix=xxx</code>ï¼šå°†æŒ‡å®šå‰ç¼€æ·»åŠ åˆ°æ‰€æœ‰<code>import</code>è·¯å¾„çš„å¼€å¤´</li>
<li><code>import_path=foo/bar</code>ï¼šå¦‚æœæ–‡ä»¶æ²¡æœ‰å£°æ˜<code>go_package</code>ï¼Œåˆ™ç”¨ä½œåŒ…ã€‚å¦‚æœå®ƒåŒ…å«æ–œæ ï¼Œé‚£ä¹ˆæœ€å³è¾¹çš„æ–œæ å°†è¢«å¿½ç•¥ã€‚</li>
<li><code>plugins=plugin1+plugin2</code>ï¼šæŒ‡å®šè¦åŠ è½½çš„å­æ’ä»¶åˆ—è¡¨ï¼ˆæˆ‘ä»¬æ‰€ä¸‹è½½çš„repoä¸­å”¯ä¸€çš„æ’ä»¶æ˜¯grpcï¼‰</li>
<li><code>Mfoo/bar.proto=quux/shme</code>ï¼š <code>M</code>å‚æ•°ï¼ŒæŒ‡å®š<code>.proto</code>æ–‡ä»¶ç¼–è¯‘åçš„åŒ…åï¼ˆ<code>foo/bar.proto</code>ç¼–è¯‘åä¸ºåŒ…åä¸º<code>quux/shme</code>ï¼‰</li>
</ul>
<h4 id="grpcæ”¯æŒ">Grpcæ”¯æŒ</h4>
<p>å¦‚æœ<code>proto</code>æ–‡ä»¶æŒ‡å®šäº†<code>RPC</code>æœåŠ¡ï¼Œ<code>protoc-gen-go</code>å¯ä»¥ç”Ÿæˆä¸<code>grpc</code>ç›¸å…¼å®¹çš„ä»£ç ï¼Œæˆ‘ä»¬ä»…éœ€è¦å°†<code>plugins=grpc</code>å‚æ•°ä¼ é€’ç»™<code>--go_out</code>ï¼Œå°±å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„</p>
<pre tabindex="0"><code>protoc --go_out=plugins=grpc:. *.proto
</code></pre><h2 id="grpc-gateway">Grpc-gateway</h2>
<h3 id="æ˜¯ä»€ä¹ˆ-3">æ˜¯ä»€ä¹ˆ</h3>
<blockquote>
<p>grpc-gateway is a plugin of protoc. It reads gRPC service definition, and generates a reverse-proxy server which translates a RESTful JSON API into gRPC. This server is generated according to custom options in your gRPC definition.</p>
</blockquote>
<p><a href="https://github.com/grpc-ecosystem/grpc-gateway">grpc-gateway</a>æ˜¯protocçš„ä¸€ä¸ªæ’ä»¶ã€‚å®ƒè¯»å–gRPCæœåŠ¡å®šä¹‰ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå°†RESTful JSON APIè½¬æ¢ä¸ºgRPCã€‚æ­¤æœåŠ¡å™¨æ˜¯æ ¹æ®gRPCå®šä¹‰ä¸­çš„è‡ªå®šä¹‰é€‰é¡¹ç”Ÿæˆçš„ã€‚</p>
<h3 id="å®‰è£…-3">å®‰è£…</h3>
<pre tabindex="0"><code>go get -u github.com/grpc-ecosystem/grpc-gateway/protoc-gen-grpc-gateway
</code></pre><p>å¦‚æœå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œæˆ‘ä»¬åˆ†æé”™è¯¯æç¤ºå¯å¾—çŸ¥æ˜¯è¿æ¥è¶…æ—¶ï¼ˆå¤§æ¦‚æ˜¯è¢«å¢™äº†ï¼‰</p>
<pre tabindex="0"><code>package google.golang.org/genproto/googleapis/api/annotations: unrecognized import path &#34;google.golang.org/genproto/googleapis/api/annotations&#34; (https fetch: Get https://google.golang.org/genproto/googleapis/api/annotations?go-get=1: dial tcp 216.239.37.1:443: getsockopt: connection timed out)
</code></pre><p>æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ</p>
<p>1ã€ç§‘å­¦ä¸Šç½‘</p>
<p>2ã€é€šè¿‡<code>github.com</code></p>
<p>è¿›å…¥åˆ°ç¬¬ä¸€ä¸ª$GOTPATHç›®å½•çš„<code>google.golang.org</code>ç›®å½•ä¸‹ï¼Œæ‹‰å–<code>genproto</code>åœ¨<code>github</code>ä¸Šçš„<code>go-genproto</code>é•œåƒåº“ï¼š</p>
<pre tabindex="0"><code>cd /usr/local/go/path/src/google.golang.org

git clone https://github.com/google/go-genproto.git

mv go-genproto/ genproto/
</code></pre><p>åœ¨å®‰è£…å®Œæ¯•åï¼Œæˆ‘ä»¬å°†<code>grpc-gateway</code>çš„å¯æ‰§è¡Œæ–‡ä»¶ä»$GOPATHä¸­ç§»åŠ¨åˆ°$GOBIN</p>
<pre tabindex="0"><code>mv /usr/local/go/path/bin/protoc-gen-grpc-gateway /usr/local/go/bin/
</code></pre><p>åˆ°è¿™é‡Œæˆ‘ä»¬è¿™èŠ‚å°±åŸºæœ¬å®Œæˆäº†ï¼Œå»ºè®®å¤šåå¤çœ‹å‡ éåŠ æ·±å¯¹å„ä¸ªç»„ä»¶çš„ç†è§£ï¼</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<h3 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h3>
<ul>
<li><a href="https://github.com/zshipu/grpc-hello-world">grpc-hello-world</a></li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>åŸæ–‡ä½œè€…ï¼š</strong><a rel="author" href="https://index.zshipu.com/go/">çŸ¥è¯†é“º</a></li>
        <li style="word-break:break-all"><strong>åŸæ–‡é“¾æ¥ï¼š</strong><a href="https://index.zshipu.com/go/posts/go/grpc-gateway/2018-02-23-install/">https://index.zshipu.com/go/posts/go/grpc-gateway/2018-02-23-install/</a></li>
        <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ˆä½œè€…ï¼ŒåŸæ–‡é“¾æ¥ï¼‰ï¼Œå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚</li>
        <li><strong>å…è´£å£°æ˜ï¼š</strong>æœ¬é¡µé¢å†…å®¹å‡æ¥æºäºç«™å†…ç¼–è¾‘å‘å¸ƒï¼Œéƒ¨åˆ†ä¿¡æ¯æ¥æºäº’è”ç½‘ï¼Œå¹¶ä¸æ„å‘³ç€æœ¬ç«™èµåŒå…¶è§‚ç‚¹æˆ–è€…è¯å®å…¶å†…å®¹çš„çœŸå®æ€§ï¼Œå¦‚æ¶‰åŠç‰ˆæƒç­‰é—®é¢˜ï¼Œè¯·ç«‹å³è”ç³»å®¢æœè¿›è¡Œæ›´æ”¹æˆ–åˆ é™¤ï¼Œä¿è¯æ‚¨çš„åˆæ³•æƒç›Šã€‚è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚ä¹Ÿå¯ä»¥é‚®ä»¶è‡³ sblig@126.com</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/go/posts/go/gin/2018-02-15-log/">ã€Œè¿è½½å…­ã€ç¼–å†™ä¸€ä¸ªç®€å•çš„æ–‡ä»¶æ—¥å¿—</a></li>
        
        <li><a href="/go/posts/go/gin/2018-02-14-jwt/">ã€Œè¿è½½äº”ã€ä½¿ç”¨ JWT è¿›è¡Œèº«ä»½æ ¡éªŒ</a></li>
        
        <li><a href="/go/posts/go/gin/2018-02-13-api-03/">ã€Œè¿è½½å››ã€Ginæ­å»ºBlog API&#39;s ï¼ˆä¸‰ï¼‰</a></li>
        
        <li><a href="/go/posts/go/gin/2018-02-12-api-02/">ã€Œè¿è½½ä¸‰ã€Ginæ­å»ºBlog API&#39;s ï¼ˆäºŒï¼‰</a></li>
        
        <li><a href="/go/posts/go/gin/2018-02-11-api-01/">ã€Œè¿è½½äºŒã€Ginæ­å»ºBlog API&#39;s ï¼ˆä¸€ï¼‰</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/go/tags/go'>go</a></li>
                
                <li><a href='/go/tags/grpc-gateway'>grpc-gateway</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "zshipu/zshipu-index"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2025 <a href="https://index.zshipu.com/go/">çŸ¥è¯†é“ºçš„åšå®¢ By çŸ¥è¯†é“º</a>
        
        | <a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">æµ™ ICP å¤‡19032823å·-1</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">é£é›ªæ— æƒ…</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/go/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://index.zshipu.com/go/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://index.zshipu.com/go/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">æœ€è¿‘æ–‡ç« </h3>
<ul class="widget-list">
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go1.16-3/" title="Go1.16 æ–°ç‰¹æ€§ï¼šè¯¦è§£å†…å­˜ç®¡ç†æœºåˆ¶çš„å˜æ›´ï¼Œä½ éœ€è¦äº†è§£">Go1.16 æ–°ç‰¹æ€§ï¼šè¯¦è§£å†…å­˜ç®¡ç†æœºåˆ¶çš„å˜æ›´ï¼Œä½ éœ€è¦äº†è§£</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go1.16-2/" title="Go1.16 æ–°ç‰¹æ€§ï¼šå¿«é€Ÿä¸Šæ‰‹ Go embed">Go1.16 æ–°ç‰¹æ€§ï¼šå¿«é€Ÿä¸Šæ‰‹ Go embed</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go1.16-1/" title="Go1.16 å³å°†æ­£å¼å‘å¸ƒï¼Œä»¥ä¸‹å˜æ›´ä½ éœ€è¦çŸ¥é“">Go1.16 å³å°†æ­£å¼å‘å¸ƒï¼Œä»¥ä¸‹å˜æ›´ä½ éœ€è¦çŸ¥é“</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/generics-proposal/" title="å¿«æŠ¥ï¼šæ­£å¼ææ¡ˆå°†æ³›å‹ç‰¹æ€§åŠ å…¥ Go è¯­è¨€">å¿«æŠ¥ï¼šæ­£å¼ææ¡ˆå°†æ³›å‹ç‰¹æ€§åŠ å…¥ Go è¯­è¨€</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/news/2021-ecug/" title="æ¨èä¸€ä¸ªç‰›é€¼çš„æŠ€æœ¯ç¤¾åŒºï¼">æ¨èä¸€ä¸ªç‰›é€¼çš„æŠ€æœ¯ç¤¾åŒºï¼</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/news/2020-top100/" title="åè¡€æ•´ç† | å¿«é€Ÿäº†è§£å…¨çƒè½¯ä»¶æ¡ˆä¾‹ï¼ˆTop100ï¼‰">åè¡€æ•´ç† | å¿«é€Ÿäº†è§£å…¨çƒè½¯ä»¶æ¡ˆä¾‹ï¼ˆTop100ï¼‰</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go-error2panic/" title="Go é”™è¯¯å¤„ç†ï¼šç”¨ panic å–ä»£ err != nil çš„æ¨¡å¼">Go é”™è¯¯å¤„ç†ï¼šç”¨ panic å–ä»£ err != nil çš„æ¨¡å¼</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go-concurrent-lock/" title="Go å¹¶å‘ï¼šä¸€äº›æœ‰è¶£çš„ç°è±¡å’Œè¦é¿å¼€çš„ â€œå‘â€">Go å¹¶å‘ï¼šä¸€äº›æœ‰è¶£çš„ç°è±¡å’Œè¦é¿å¼€çš„ â€œå‘â€</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/go2-errors/" title="å…ˆç¹ä¸ºå¿«ï¼ŒGo2 Error çš„æŒ£æ‰ä¹‹è·¯">å…ˆç¹ä¸ºå¿«ï¼ŒGo2 Error çš„æŒ£æ‰ä¹‹è·¯</a>
    </li>
    
    <li>
        <a href="https://index.zshipu.com/go/posts/go/gophercon2020-errors/" title="é‡ç£…ï¼šGo errors å°†ä¸ä¼šæœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ”¹è¿›è®¡åˆ’">é‡ç£…ï¼šGo errors å°†ä¸ä¼šæœ‰ä»»ä½•è¿›ä¸€æ­¥çš„æ”¹è¿›è®¡åˆ’</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">ç¦åˆ©æ´¾é€</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://pplx.ai/sblig3912" title="ä¸€èµ·ä¸Š Cometï¼ŒAI å·¥å…·å…è´¹ç”¨è¿˜é€é’±ï½" target="_blank" style="color:red">
                
                    <img src="https://cdn.jsdelivr.net/gh/zshipu/images/2025/202510250843697.png">
                
            </a>
        </li>
        
        <li>
            <a href="https://pplx.ai/sblig3912" title="é‚€è¯·æœ‰ç¤¼ ğŸ ä¸€èµ·ç”¨ Cometï¼ŒAI åŠ©ä½ æ›´é«˜æ•ˆè¿˜é€é’±ï¼" target="_blank" style="color:red">
                
                    <img src="https://cdn.jsdelivr.net/gh/zshipu/images/2025/202510250850822.png">
                
            </a>
        </li>
        
        <li>
            <a href="https://pplx.ai/sblig3912" title="AI å·¥å…·çœŸé¦™ï¼æˆ‘ç”¨çš„ Comet å…è´¹é€ä¸€ä¸ªæœˆ Proï½" target="_blank" style="color:red">
                
                    <img src="https://cdn.jsdelivr.net/gh/zshipu/images/2025/202510250851688.png">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/go/categories/'>åˆ†ç±»</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/go/tags/'>æ ‡ç­¾</a></h3>
<div class="tagcloud">
    
    <a href="https://index.zshipu.com/go/tags/ecug/">Ecug</a>
    
    <a href="https://index.zshipu.com/go/tags/gin/">Gin</a>
    
    <a href="https://index.zshipu.com/go/tags/go/">Go</a>
    
    <a href="https://index.zshipu.com/go/tags/go-modules/">Go-Modules</a>
    
    <a href="https://index.zshipu.com/go/tags/grpc/">Grpc</a>
    
    <a href="https://index.zshipu.com/go/tags/grpc-gateway/">Grpc-Gateway</a>
    
    <a href="https://index.zshipu.com/go/tags/kubernetes/">Kubernetes</a>
    
    <a href="https://index.zshipu.com/go/tags/prometheus/">Prometheus</a>
    
    <a href="https://index.zshipu.com/go/tags/protobuf/">Protobuf</a>
    
    <a href="https://index.zshipu.com/go/tags/top100/">Top100</a>
    
    <a href="https://index.zshipu.com/go/tags/untagged/">Untagged</a>
    
    <a href="https://index.zshipu.com/go/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">å¾®æœåŠ¡</a>
    
    <a href="https://index.zshipu.com/go/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">æ•°æ®åˆ†æ</a>
    
    <a href="https://index.zshipu.com/go/tags/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/">æœåŠ¡æ²»ç†</a>
    
    <a href="https://index.zshipu.com/go/tags/%E6%B3%9B%E5%9E%8B/">æ³›å‹</a>
    
    <a href="https://index.zshipu.com/go/tags/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86/">æ·±åº¦è§£å¯†</a>
    
    <a href="https://index.zshipu.com/go/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">æºç åˆ†æ</a>
    
    <a href="https://index.zshipu.com/go/tags/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/">ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.zshipu.com//" title="çŸ¥è¯†é“ºçš„åšå®¢">çŸ¥è¯†é“ºçš„åšå®¢</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">å…¶å®ƒ</h3>
        <ul class="widget-list">
            <li><a href="https://index.zshipu.com/go/index.xml">æ–‡ç«  RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>