<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Prompt Gallery</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #1a1a1a; 
            color: #fff; 
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
        .success { background: #22c55e; }
        .error { background: #ef4444; }
        .warning { background: #f59e0b; }
        .info { background: #3b82f6; }
        pre { 
            background: #2a2a2a; 
            padding: 10px; 
            border-radius: 5px; 
            overflow-x: auto; 
        }
    </style>
</head>
<body>
    <h1>ğŸ” Prompt Gallery è¯Šæ–­é¡µé¢</h1>
    
    <div class="status info">
        <h3>ğŸ“ å½“å‰è®¿é—®ä¿¡æ¯</h3>
        <p><strong>URL:</strong> <span id="current-url"></span></p>
        <p><strong>Base URL:</strong> <span id="base-url"></span></p>
        <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
        <p><strong>æ—¶é—´:</strong> <span id="current-time"></span></p>
    </div>

    <div class="status" id="resource-status">
        <h3>ğŸ“¦ èµ„æºåŠ è½½æµ‹è¯•</h3>
        <div id="resource-tests"></div>
    </div>

    <div class="status" id="api-status">
        <h3>ğŸ”— API è¿æ¥æµ‹è¯•</h3>
        <div id="api-tests"></div>
    </div>

    <div class="status info">
        <h3>ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ</h3>
        <ul>
            <li><strong>å¦‚æœèµ„æº 404:</strong> æ£€æŸ¥æœåŠ¡å™¨é…ç½®ï¼Œç¡®ä¿ /prompt-gallery/ è·¯å¾„æ­£ç¡®æ˜ å°„</li>
            <li><strong>å¦‚æœ CORS é”™è¯¯:</strong> æ£€æŸ¥ Firebase é…ç½®å’ŒåŸŸåç™½åå•</li>
            <li><strong>å¦‚æœ JS é”™è¯¯:</strong> æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œå¯èƒ½æ˜¯ä»£ç æ··æ·†å¯¼è‡´çš„é—®é¢˜</li>
            <li><strong>å¦‚æœå®Œå…¨ç©ºç™½:</strong> å¯èƒ½æ˜¯ React åˆå§‹åŒ–å¤±è´¥ï¼Œæ£€æŸ¥ importmap å’Œå¤–éƒ¨ä¾èµ–</li>
        </ul>
    </div>

    <div class="status warning">
        <h3>ğŸš¨ ç´§æ€¥ä¿®å¤</h3>
        <p>å¦‚æœä¸»é¡µé¢æ— æ³•è®¿é—®ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹é“¾æ¥ï¼š</p>
        <ul>
            <li><a href="./index.html" style="color: #60a5fa;">ç›´æ¥è®¿é—® index.html</a></li>
            <li><a href="../index.html" style="color: #60a5fa;">ä¸Šçº§ç›®å½• index.html</a></li>
            <li><a href="/prompt-gallery/index.html" style="color: #60a5fa;">å®Œæ•´è·¯å¾„ index.html</a></li>
        </ul>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰ä¿¡æ¯
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('base-url').textContent = window.location.origin + window.location.pathname;
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('current-time').textContent = new Date().toLocaleString();

        // æµ‹è¯•èµ„æºåŠ è½½
        async function testResources() {
            const resourceTests = document.getElementById('resource-tests');
            const resources = [
                '/prompt-gallery/assets/index-DTG02IPP.css',
                '/prompt-gallery/assets/index-DtnJIl8v.js',
                '/prompt-gallery/index.html'
            ];

            for (const resource of resources) {
                try {
                    const response = await fetch(resource, { method: 'HEAD' });
                    const status = response.ok ? 'success' : 'error';
                    const statusText = response.ok ? 'âœ… å¯è®¿é—®' : `âŒ ${response.status} ${response.statusText}`;
                    
                    resourceTests.innerHTML += `
                        <div class="${status}" style="margin: 5px 0; padding: 5px;">
                            <strong>${resource}</strong>: ${statusText}
                        </div>
                    `;
                } catch (error) {
                    resourceTests.innerHTML += `
                        <div class="error" style="margin: 5px 0; padding: 5px;">
                            <strong>${resource}</strong>: âŒ ç½‘ç»œé”™è¯¯ - ${error.message}
                        </div>
                    `;
                }
            }
        }

        // æµ‹è¯• API è¿æ¥
        async function testAPIs() {
            const apiTests = document.getElementById('api-tests');
            
            // æµ‹è¯• Firebase
            try {
                // è¿™é‡Œåªæ˜¯æµ‹è¯•ç½‘ç»œè¿æ¥ï¼Œä¸åšå®é™… API è°ƒç”¨
                const response = await fetch('https://firestore.googleapis.com/', { method: 'HEAD' });
                const status = response.ok || response.status === 404 ? 'success' : 'error';
                const statusText = response.ok || response.status === 404 ? 'âœ… Firebase å¯è¿æ¥' : `âŒ Firebase è¿æ¥å¤±è´¥`;
                
                apiTests.innerHTML += `
                    <div class="${status}" style="margin: 5px 0; padding: 5px;">
                        <strong>Firebase:</strong> ${statusText}
                    </div>
                `;
            } catch (error) {
                apiTests.innerHTML += `
                    <div class="error" style="margin: 5px 0; padding: 5px;">
                        <strong>Firebase:</strong> âŒ ç½‘ç»œé”™è¯¯ - ${error.message}
                    </div>
                `;
            }

            // æµ‹è¯•å¤–éƒ¨ CDN
            try {
                const response = await fetch('https://aistudiocdn.com/react@^19.2.0/', { method: 'HEAD' });
                const status = response.ok ? 'success' : 'error';
                const statusText = response.ok ? 'âœ… CDN å¯è®¿é—®' : `âŒ CDN è®¿é—®å¤±è´¥`;
                
                apiTests.innerHTML += `
                    <div class="${status}" style="margin: 5px 0; padding: 5px;">
                        <strong>AI Studio CDN:</strong> ${statusText}
                    </div>
                `;
            } catch (error) {
                apiTests.innerHTML += `
                    <div class="error" style="margin: 5px 0; padding: 5px;">
                        <strong>AI Studio CDN:</strong> âŒ ç½‘ç»œé”™è¯¯ - ${error.message}
                    </div>
                `;
            }
        }

        // è¿è¡Œæµ‹è¯•
        testResources();
        testAPIs();

        // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°æµ‹è¯•
        setInterval(() => {
            document.getElementById('resource-tests').innerHTML = '';
            document.getElementById('api-tests').innerHTML = '';
            testResources();
            testAPIs();
        }, 30000);
    </script>
</body>
</html>